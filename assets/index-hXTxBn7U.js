var Nh=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var W_=Nh((z_,Ei)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(s){if(s.ep)return;s.ep=!0;const c=t(s);fetch(s.href,c)}})();/*! jQuery v1.11.2 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */(function(n,e){typeof Ei=="object"&&typeof Ei.exports=="object"?Ei.exports=n.document?e(n,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(n)})(typeof window<"u"?window:void 0,function(n,e){var t=[],i=t.slice,s=t.concat,c=t.push,u=t.indexOf,d={},f=d.toString,m=d.hasOwnProperty,g={},_="1.11.2",o=function(r,a){return new o.fn.init(r,a)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^-ms-/,R=/-([\da-z])/gi,B=function(r,a){return a.toUpperCase()};o.fn=o.prototype={jquery:_,constructor:o,selector:"",length:0,toArray:function(){return i.call(this)},get:function(r){return r!=null?0>r?this[r+this.length]:this[r]:i.call(this)},pushStack:function(r){var a=o.merge(this.constructor(),r);return a.prevObject=this,a.context=this.context,a},each:function(r,a){return o.each(this,r,a)},map:function(r){return this.pushStack(o.map(this,function(a,l){return r.call(a,l,a)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(r){var a=this.length,l=+r+(0>r?a:0);return this.pushStack(l>=0&&a>l?[this[l]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:c,sort:t.sort,splice:t.splice},o.extend=o.fn.extend=function(){var r,a,l,h,p,v,y=arguments[0]||{},C=1,S=arguments.length,x=!1;for(typeof y=="boolean"&&(x=y,y=arguments[C]||{},C++),typeof y=="object"||o.isFunction(y)||(y={}),C===S&&(y=this,C--);S>C;C++)if((p=arguments[C])!=null)for(h in p)r=y[h],l=p[h],y!==l&&(x&&l&&(o.isPlainObject(l)||(a=o.isArray(l)))?(a?(a=!1,v=r&&o.isArray(r)?r:[]):v=r&&o.isPlainObject(r)?r:{},y[h]=o.extend(x,v,l)):l!==void 0&&(y[h]=l));return y},o.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(r){throw new Error(r)},noop:function(){},isFunction:function(r){return o.type(r)==="function"},isArray:Array.isArray||function(r){return o.type(r)==="array"},isWindow:function(r){return r!=null&&r==r.window},isNumeric:function(r){return!o.isArray(r)&&r-parseFloat(r)+1>=0},isEmptyObject:function(r){var a;for(a in r)return!1;return!0},isPlainObject:function(r){var a;if(!r||o.type(r)!=="object"||r.nodeType||o.isWindow(r))return!1;try{if(r.constructor&&!m.call(r,"constructor")&&!m.call(r.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}if(g.ownLast)for(a in r)return m.call(r,a);for(a in r);return a===void 0||m.call(r,a)},type:function(r){return r==null?r+"":typeof r=="object"||typeof r=="function"?d[f.call(r)]||"object":typeof r},globalEval:function(r){r&&o.trim(r)&&(n.execScript||function(a){n.eval.call(n,a)})(r)},camelCase:function(r){return r.replace(N,"ms-").replace(R,B)},nodeName:function(r,a){return r.nodeName&&r.nodeName.toLowerCase()===a.toLowerCase()},each:function(r,a,l){var h,p=0,v=r.length,y=K(r);if(l){if(y)for(;v>p&&(h=a.apply(r[p],l),h!==!1);p++);else for(p in r)if(h=a.apply(r[p],l),h===!1)break}else if(y)for(;v>p&&(h=a.call(r[p],p,r[p]),h!==!1);p++);else for(p in r)if(h=a.call(r[p],p,r[p]),h===!1)break;return r},trim:function(r){return r==null?"":(r+"").replace(b,"")},makeArray:function(r,a){var l=a||[];return r!=null&&(K(Object(r))?o.merge(l,typeof r=="string"?[r]:r):c.call(l,r)),l},inArray:function(r,a,l){var h;if(a){if(u)return u.call(a,r,l);for(h=a.length,l=l?0>l?Math.max(0,h+l):l:0;h>l;l++)if(l in a&&a[l]===r)return l}return-1},merge:function(r,a){for(var l=+a.length,h=0,p=r.length;l>h;)r[p++]=a[h++];if(l!==l)for(;a[h]!==void 0;)r[p++]=a[h++];return r.length=p,r},grep:function(r,a,l){for(var h,p=[],v=0,y=r.length,C=!l;y>v;v++)h=!a(r[v],v),h!==C&&p.push(r[v]);return p},map:function(r,a,l){var h,p=0,v=r.length,y=K(r),C=[];if(y)for(;v>p;p++)h=a(r[p],p,l),h!=null&&C.push(h);else for(p in r)h=a(r[p],p,l),h!=null&&C.push(h);return s.apply([],C)},guid:1,proxy:function(r,a){var l,h,p;return typeof a=="string"&&(p=r[a],a=r,r=p),o.isFunction(r)?(l=i.call(arguments,2),h=function(){return r.apply(a||this,l.concat(i.call(arguments)))},h.guid=r.guid=r.guid||o.guid++,h):void 0},now:function(){return+new Date},support:g}),o.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(r,a){d["[object "+a+"]"]=a.toLowerCase()});function K(r){var a=r.length,l=o.type(r);return l==="function"||o.isWindow(r)?!1:r.nodeType===1&&a?!0:l==="array"||a===0||typeof a=="number"&&a>0&&a-1 in r}var re=function(r){var a,l,h,p,v,y,C,S,x,I,M,k,F,Y,G,X,Ue,Se,mt,q="sizzle"+1*new Date,xe=r.document,J=0,_e=0,gt=_r(),hi=_r(),Xe=_r(),Ft=function(E,w){return E===w&&(M=!0),0},_t=1<<31,vt={}.hasOwnProperty,De=[],We=De.pop,mh=De.push,yt=De.push,ra=De.slice,Lt=function(E,w){for(var T=0,O=E.length;O>T;T++)if(E[T]===w)return T;return-1},pr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ae="[\\x20\\t\\r\\n\\f]",Zt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",sa=Zt.replace("w","w#"),oa="\\["+ae+"*("+Zt+")(?:"+ae+"*([*^$|!~]?=)"+ae+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+sa+"))|)"+ae+"*\\]",mr=":("+Zt+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+oa+")*)|.*)\\)|)",gh=new RegExp(ae+"+","g"),di=new RegExp("^"+ae+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ae+"+$","g"),_h=new RegExp("^"+ae+"*,"+ae+"*"),vh=new RegExp("^"+ae+"*([>+~]|"+ae+")"+ae+"*"),yh=new RegExp("="+ae+`*([^\\]'"]*?)`+ae+"*\\]","g"),Eh=new RegExp(mr),Ch=new RegExp("^"+sa+"$"),fi={ID:new RegExp("^#("+Zt+")"),CLASS:new RegExp("^\\.("+Zt+")"),TAG:new RegExp("^("+Zt.replace("w","w*")+")"),ATTR:new RegExp("^"+oa),PSEUDO:new RegExp("^"+mr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ae+"*(even|odd|(([+-]|)(\\d*)n|)"+ae+"*(?:([+-]|)"+ae+"*(\\d+)|))"+ae+"*\\)|)","i"),bool:new RegExp("^(?:"+pr+")$","i"),needsContext:new RegExp("^"+ae+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ae+"*((?:-\\d)?\\d*)"+ae+"*\\)|)(?=[^-]|$)","i")},wh=/^(?:input|select|textarea|button)$/i,Th=/^h\d$/i,Cn=/^[^{]+\{\s*\[native \w/,bh=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gr=/[+~]/,Sh=/'|\\/g,it=new RegExp("\\\\([\\da-f]{1,6}"+ae+"?|("+ae+")|.)","ig"),rt=function(E,w,T){var O="0x"+w-65536;return O!==O||T?w:0>O?String.fromCharCode(O+65536):String.fromCharCode(O>>10|55296,1023&O|56320)},aa=function(){k()};try{yt.apply(De=ra.call(xe.childNodes),xe.childNodes),De[xe.childNodes.length].nodeType}catch{yt={apply:De.length?function(w,T){mh.apply(w,ra.call(T))}:function(w,T){for(var O=w.length,A=0;w[O++]=T[A++];);w.length=O-1}}}function ce(E,w,T,O){var A,P,D,j,V,Q,W,$,ue,ee;if((w?w.ownerDocument||w:xe)!==F&&k(w),w=w||F,T=T||[],j=w.nodeType,typeof E!="string"||!E||j!==1&&j!==9&&j!==11)return T;if(!O&&G){if(j!==11&&(A=bh.exec(E)))if(D=A[1]){if(j===9){if(P=w.getElementById(D),!P||!P.parentNode)return T;if(P.id===D)return T.push(P),T}else if(w.ownerDocument&&(P=w.ownerDocument.getElementById(D))&&mt(w,P)&&P.id===D)return T.push(P),T}else{if(A[2])return yt.apply(T,w.getElementsByTagName(E)),T;if((D=A[3])&&l.getElementsByClassName)return yt.apply(T,w.getElementsByClassName(D)),T}if(l.qsa&&(!X||!X.test(E))){if($=W=q,ue=w,ee=j!==1&&E,j===1&&w.nodeName.toLowerCase()!=="object"){for(Q=y(E),(W=w.getAttribute("id"))?$=W.replace(Sh,"\\$&"):w.setAttribute("id",$),$="[id='"+$+"'] ",V=Q.length;V--;)Q[V]=$+pi(Q[V]);ue=gr.test(E)&&yr(w.parentNode)||w,ee=Q.join(",")}if(ee)try{return yt.apply(T,ue.querySelectorAll(ee)),T}catch{}finally{W||w.removeAttribute("id")}}}return S(E.replace(di,"$1"),w,T,O)}function _r(){var E=[];function w(T,O){return E.push(T+" ")>h.cacheLength&&delete w[E.shift()],w[T+" "]=O}return w}function ze(E){return E[q]=!0,E}function Je(E){var w=F.createElement("div");try{return!!E(w)}catch{return!1}finally{w.parentNode&&w.parentNode.removeChild(w),w=null}}function vr(E,w){for(var T=E.split("|"),O=E.length;O--;)h.attrHandle[T[O]]=w}function la(E,w){var T=w&&E,O=T&&E.nodeType===1&&w.nodeType===1&&(~w.sourceIndex||_t)-(~E.sourceIndex||_t);if(O)return O;if(T){for(;T=T.nextSibling;)if(T===w)return-1}return E?1:-1}function xh(E){return function(w){var T=w.nodeName.toLowerCase();return T==="input"&&w.type===E}}function Ah(E){return function(w){var T=w.nodeName.toLowerCase();return(T==="input"||T==="button")&&w.type===E}}function jt(E){return ze(function(w){return w=+w,ze(function(T,O){for(var A,P=E([],T.length,w),D=P.length;D--;)T[A=P[D]]&&(T[A]=!(O[A]=T[A]))})})}function yr(E){return E&&typeof E.getElementsByTagName<"u"&&E}l=ce.support={},v=ce.isXML=function(E){var w=E&&(E.ownerDocument||E).documentElement;return w?w.nodeName!=="HTML":!1},k=ce.setDocument=function(E){var w,T,O=E?E.ownerDocument||E:xe;return O!==F&&O.nodeType===9&&O.documentElement?(F=O,Y=O.documentElement,T=O.defaultView,T&&T!==T.top&&(T.addEventListener?T.addEventListener("unload",aa,!1):T.attachEvent&&T.attachEvent("onunload",aa)),G=!v(O),l.attributes=Je(function(A){return A.className="i",!A.getAttribute("className")}),l.getElementsByTagName=Je(function(A){return A.appendChild(O.createComment("")),!A.getElementsByTagName("*").length}),l.getElementsByClassName=Cn.test(O.getElementsByClassName),l.getById=Je(function(A){return Y.appendChild(A).id=q,!O.getElementsByName||!O.getElementsByName(q).length}),l.getById?(h.find.ID=function(A,P){if(typeof P.getElementById<"u"&&G){var D=P.getElementById(A);return D&&D.parentNode?[D]:[]}},h.filter.ID=function(A){var P=A.replace(it,rt);return function(D){return D.getAttribute("id")===P}}):(delete h.find.ID,h.filter.ID=function(A){var P=A.replace(it,rt);return function(D){var j=typeof D.getAttributeNode<"u"&&D.getAttributeNode("id");return j&&j.value===P}}),h.find.TAG=l.getElementsByTagName?function(A,P){return typeof P.getElementsByTagName<"u"?P.getElementsByTagName(A):l.qsa?P.querySelectorAll(A):void 0}:function(A,P){var D,j=[],V=0,Q=P.getElementsByTagName(A);if(A==="*"){for(;D=Q[V++];)D.nodeType===1&&j.push(D);return j}return Q},h.find.CLASS=l.getElementsByClassName&&function(A,P){return G?P.getElementsByClassName(A):void 0},Ue=[],X=[],(l.qsa=Cn.test(O.querySelectorAll))&&(Je(function(A){Y.appendChild(A).innerHTML="<a id='"+q+"'></a><select id='"+q+"-\f]' msallowcapture=''><option selected=''></option></select>",A.querySelectorAll("[msallowcapture^='']").length&&X.push("[*^$]="+ae+`*(?:''|"")`),A.querySelectorAll("[selected]").length||X.push("\\["+ae+"*(?:value|"+pr+")"),A.querySelectorAll("[id~="+q+"-]").length||X.push("~="),A.querySelectorAll(":checked").length||X.push(":checked"),A.querySelectorAll("a#"+q+"+*").length||X.push(".#.+[+~]")}),Je(function(A){var P=O.createElement("input");P.setAttribute("type","hidden"),A.appendChild(P).setAttribute("name","D"),A.querySelectorAll("[name=d]").length&&X.push("name"+ae+"*[*^$|!~]?="),A.querySelectorAll(":enabled").length||X.push(":enabled",":disabled"),A.querySelectorAll("*,:x"),X.push(",.*:")})),(l.matchesSelector=Cn.test(Se=Y.matches||Y.webkitMatchesSelector||Y.mozMatchesSelector||Y.oMatchesSelector||Y.msMatchesSelector))&&Je(function(A){l.disconnectedMatch=Se.call(A,"div"),Se.call(A,"[s!='']:x"),Ue.push("!=",mr)}),X=X.length&&new RegExp(X.join("|")),Ue=Ue.length&&new RegExp(Ue.join("|")),w=Cn.test(Y.compareDocumentPosition),mt=w||Cn.test(Y.contains)?function(A,P){var D=A.nodeType===9?A.documentElement:A,j=P&&P.parentNode;return A===j||!(!j||j.nodeType!==1||!(D.contains?D.contains(j):A.compareDocumentPosition&&16&A.compareDocumentPosition(j)))}:function(A,P){if(P){for(;P=P.parentNode;)if(P===A)return!0}return!1},Ft=w?function(A,P){if(A===P)return M=!0,0;var D=!A.compareDocumentPosition-!P.compareDocumentPosition;return D||(D=(A.ownerDocument||A)===(P.ownerDocument||P)?A.compareDocumentPosition(P):1,1&D||!l.sortDetached&&P.compareDocumentPosition(A)===D?A===O||A.ownerDocument===xe&&mt(xe,A)?-1:P===O||P.ownerDocument===xe&&mt(xe,P)?1:I?Lt(I,A)-Lt(I,P):0:4&D?-1:1)}:function(A,P){if(A===P)return M=!0,0;var D,j=0,V=A.parentNode,Q=P.parentNode,W=[A],$=[P];if(!V||!Q)return A===O?-1:P===O?1:V?-1:Q?1:I?Lt(I,A)-Lt(I,P):0;if(V===Q)return la(A,P);for(D=A;D=D.parentNode;)W.unshift(D);for(D=P;D=D.parentNode;)$.unshift(D);for(;W[j]===$[j];)j++;return j?la(W[j],$[j]):W[j]===xe?-1:$[j]===xe?1:0},O):F},ce.matches=function(E,w){return ce(E,null,null,w)},ce.matchesSelector=function(E,w){if((E.ownerDocument||E)!==F&&k(E),w=w.replace(yh,"='$1']"),!(!l.matchesSelector||!G||Ue&&Ue.test(w)||X&&X.test(w)))try{var T=Se.call(E,w);if(T||l.disconnectedMatch||E.document&&E.document.nodeType!==11)return T}catch{}return ce(w,F,null,[E]).length>0},ce.contains=function(E,w){return(E.ownerDocument||E)!==F&&k(E),mt(E,w)},ce.attr=function(E,w){(E.ownerDocument||E)!==F&&k(E);var T=h.attrHandle[w.toLowerCase()],O=T&&vt.call(h.attrHandle,w.toLowerCase())?T(E,w,!G):void 0;return O!==void 0?O:l.attributes||!G?E.getAttribute(w):(O=E.getAttributeNode(w))&&O.specified?O.value:null},ce.error=function(E){throw new Error("Syntax error, unrecognized expression: "+E)},ce.uniqueSort=function(E){var w,T=[],O=0,A=0;if(M=!l.detectDuplicates,I=!l.sortStable&&E.slice(0),E.sort(Ft),M){for(;w=E[A++];)w===E[A]&&(O=T.push(A));for(;O--;)E.splice(T[O],1)}return I=null,E},p=ce.getText=function(E){var w,T="",O=0,A=E.nodeType;if(A){if(A===1||A===9||A===11){if(typeof E.textContent=="string")return E.textContent;for(E=E.firstChild;E;E=E.nextSibling)T+=p(E)}else if(A===3||A===4)return E.nodeValue}else for(;w=E[O++];)T+=p(w);return T},h=ce.selectors={cacheLength:50,createPseudo:ze,match:fi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(E){return E[1]=E[1].replace(it,rt),E[3]=(E[3]||E[4]||E[5]||"").replace(it,rt),E[2]==="~="&&(E[3]=" "+E[3]+" "),E.slice(0,4)},CHILD:function(E){return E[1]=E[1].toLowerCase(),E[1].slice(0,3)==="nth"?(E[3]||ce.error(E[0]),E[4]=+(E[4]?E[5]+(E[6]||1):2*(E[3]==="even"||E[3]==="odd")),E[5]=+(E[7]+E[8]||E[3]==="odd")):E[3]&&ce.error(E[0]),E},PSEUDO:function(E){var w,T=!E[6]&&E[2];return fi.CHILD.test(E[0])?null:(E[3]?E[2]=E[4]||E[5]||"":T&&Eh.test(T)&&(w=y(T,!0))&&(w=T.indexOf(")",T.length-w)-T.length)&&(E[0]=E[0].slice(0,w),E[2]=T.slice(0,w)),E.slice(0,3))}},filter:{TAG:function(E){var w=E.replace(it,rt).toLowerCase();return E==="*"?function(){return!0}:function(T){return T.nodeName&&T.nodeName.toLowerCase()===w}},CLASS:function(E){var w=gt[E+" "];return w||(w=new RegExp("(^|"+ae+")"+E+"("+ae+"|$)"))&&gt(E,function(T){return w.test(typeof T.className=="string"&&T.className||typeof T.getAttribute<"u"&&T.getAttribute("class")||"")})},ATTR:function(E,w,T){return function(O){var A=ce.attr(O,E);return A==null?w==="!=":w?(A+="",w==="="?A===T:w==="!="?A!==T:w==="^="?T&&A.indexOf(T)===0:w==="*="?T&&A.indexOf(T)>-1:w==="$="?T&&A.slice(-T.length)===T:w==="~="?(" "+A.replace(gh," ")+" ").indexOf(T)>-1:w==="|="?A===T||A.slice(0,T.length+1)===T+"-":!1):!0}},CHILD:function(E,w,T,O,A){var P=E.slice(0,3)!=="nth",D=E.slice(-4)!=="last",j=w==="of-type";return O===1&&A===0?function(V){return!!V.parentNode}:function(V,Q,W){var $,ue,ee,oe,Ae,Ie,He=P!==D?"nextSibling":"previousSibling",fe=V.parentNode,wn=j&&V.nodeName.toLowerCase(),Tn=!W&&!j;if(fe){if(P){for(;He;){for(ee=V;ee=ee[He];)if(j?ee.nodeName.toLowerCase()===wn:ee.nodeType===1)return!1;Ie=He=E==="only"&&!Ie&&"nextSibling"}return!0}if(Ie=[D?fe.firstChild:fe.lastChild],D&&Tn){for(ue=fe[q]||(fe[q]={}),$=ue[E]||[],Ae=$[0]===J&&$[1],oe=$[0]===J&&$[2],ee=Ae&&fe.childNodes[Ae];ee=++Ae&&ee&&ee[He]||(oe=Ae=0)||Ie.pop();)if(ee.nodeType===1&&++oe&&ee===V){ue[E]=[J,Ae,oe];break}}else if(Tn&&($=(V[q]||(V[q]={}))[E])&&$[0]===J)oe=$[1];else for(;(ee=++Ae&&ee&&ee[He]||(oe=Ae=0)||Ie.pop())&&!((j?ee.nodeName.toLowerCase()===wn:ee.nodeType===1)&&++oe&&(Tn&&((ee[q]||(ee[q]={}))[E]=[J,oe]),ee===V)););return oe-=A,oe===O||oe%O===0&&oe/O>=0}}},PSEUDO:function(E,w){var T,O=h.pseudos[E]||h.setFilters[E.toLowerCase()]||ce.error("unsupported pseudo: "+E);return O[q]?O(w):O.length>1?(T=[E,E,"",w],h.setFilters.hasOwnProperty(E.toLowerCase())?ze(function(A,P){for(var D,j=O(A,w),V=j.length;V--;)D=Lt(A,j[V]),A[D]=!(P[D]=j[V])}):function(A){return O(A,0,T)}):O}},pseudos:{not:ze(function(E){var w=[],T=[],O=C(E.replace(di,"$1"));return O[q]?ze(function(A,P,D,j){for(var V,Q=O(A,null,j,[]),W=A.length;W--;)(V=Q[W])&&(A[W]=!(P[W]=V))}):function(A,P,D){return w[0]=A,O(w,null,D,T),w[0]=null,!T.pop()}}),has:ze(function(E){return function(w){return ce(E,w).length>0}}),contains:ze(function(E){return E=E.replace(it,rt),function(w){return(w.textContent||w.innerText||p(w)).indexOf(E)>-1}}),lang:ze(function(E){return Ch.test(E||"")||ce.error("unsupported lang: "+E),E=E.replace(it,rt).toLowerCase(),function(w){var T;do if(T=G?w.lang:w.getAttribute("xml:lang")||w.getAttribute("lang"))return T=T.toLowerCase(),T===E||T.indexOf(E+"-")===0;while((w=w.parentNode)&&w.nodeType===1);return!1}}),target:function(E){var w=r.location&&r.location.hash;return w&&w.slice(1)===E.id},root:function(E){return E===Y},focus:function(E){return E===F.activeElement&&(!F.hasFocus||F.hasFocus())&&!!(E.type||E.href||~E.tabIndex)},enabled:function(E){return E.disabled===!1},disabled:function(E){return E.disabled===!0},checked:function(E){var w=E.nodeName.toLowerCase();return w==="input"&&!!E.checked||w==="option"&&!!E.selected},selected:function(E){return E.parentNode&&E.parentNode.selectedIndex,E.selected===!0},empty:function(E){for(E=E.firstChild;E;E=E.nextSibling)if(E.nodeType<6)return!1;return!0},parent:function(E){return!h.pseudos.empty(E)},header:function(E){return Th.test(E.nodeName)},input:function(E){return wh.test(E.nodeName)},button:function(E){var w=E.nodeName.toLowerCase();return w==="input"&&E.type==="button"||w==="button"},text:function(E){var w;return E.nodeName.toLowerCase()==="input"&&E.type==="text"&&((w=E.getAttribute("type"))==null||w.toLowerCase()==="text")},first:jt(function(){return[0]}),last:jt(function(E,w){return[w-1]}),eq:jt(function(E,w,T){return[0>T?T+w:T]}),even:jt(function(E,w){for(var T=0;w>T;T+=2)E.push(T);return E}),odd:jt(function(E,w){for(var T=1;w>T;T+=2)E.push(T);return E}),lt:jt(function(E,w,T){for(var O=0>T?T+w:T;--O>=0;)E.push(O);return E}),gt:jt(function(E,w,T){for(var O=0>T?T+w:T;++O<w;)E.push(O);return E})}},h.pseudos.nth=h.pseudos.eq;for(a in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[a]=xh(a);for(a in{submit:!0,reset:!0})h.pseudos[a]=Ah(a);function ca(){}ca.prototype=h.filters=h.pseudos,h.setFilters=new ca,y=ce.tokenize=function(E,w){var T,O,A,P,D,j,V,Q=hi[E+" "];if(Q)return w?0:Q.slice(0);for(D=E,j=[],V=h.preFilter;D;){(!T||(O=_h.exec(D)))&&(O&&(D=D.slice(O[0].length)||D),j.push(A=[])),T=!1,(O=vh.exec(D))&&(T=O.shift(),A.push({value:T,type:O[0].replace(di," ")}),D=D.slice(T.length));for(P in h.filter)!(O=fi[P].exec(D))||V[P]&&!(O=V[P](O))||(T=O.shift(),A.push({value:T,type:P,matches:O}),D=D.slice(T.length));if(!T)break}return w?D.length:D?ce.error(E):hi(E,j).slice(0)};function pi(E){for(var w=0,T=E.length,O="";T>w;w++)O+=E[w].value;return O}function Er(E,w,T){var O=w.dir,A=T&&O==="parentNode",P=_e++;return w.first?function(D,j,V){for(;D=D[O];)if(D.nodeType===1||A)return E(D,j,V)}:function(D,j,V){var Q,W,$=[J,P];if(V){for(;D=D[O];)if((D.nodeType===1||A)&&E(D,j,V))return!0}else for(;D=D[O];)if(D.nodeType===1||A){if(W=D[q]||(D[q]={}),(Q=W[O])&&Q[0]===J&&Q[1]===P)return $[2]=Q[2];if(W[O]=$,$[2]=E(D,j,V))return!0}}}function Cr(E){return E.length>1?function(w,T,O){for(var A=E.length;A--;)if(!E[A](w,T,O))return!1;return!0}:E[0]}function Ih(E,w,T){for(var O=0,A=w.length;A>O;O++)ce(E,w[O],T);return T}function mi(E,w,T,O,A){for(var P,D=[],j=0,V=E.length,Q=w!=null;V>j;j++)(P=E[j])&&(!T||T(P,O,A))&&(D.push(P),Q&&w.push(j));return D}function wr(E,w,T,O,A,P){return O&&!O[q]&&(O=wr(O)),A&&!A[q]&&(A=wr(A,P)),ze(function(D,j,V,Q){var W,$,ue,ee=[],oe=[],Ae=j.length,Ie=D||Ih(w||"*",V.nodeType?[V]:V,[]),He=!E||!D&&w?Ie:mi(Ie,ee,E,V,Q),fe=T?A||(D?E:Ae||O)?[]:j:He;if(T&&T(He,fe,V,Q),O)for(W=mi(fe,oe),O(W,[],V,Q),$=W.length;$--;)(ue=W[$])&&(fe[oe[$]]=!(He[oe[$]]=ue));if(D){if(A||E){if(A){for(W=[],$=fe.length;$--;)(ue=fe[$])&&W.push(He[$]=ue);A(null,fe=[],W,Q)}for($=fe.length;$--;)(ue=fe[$])&&(W=A?Lt(D,ue):ee[$])>-1&&(D[W]=!(j[W]=ue))}}else fe=mi(fe===j?fe.splice(Ae,fe.length):fe),A?A(null,j,fe,Q):yt.apply(j,fe)})}function Tr(E){for(var w,T,O,A=E.length,P=h.relative[E[0].type],D=P||h.relative[" "],j=P?1:0,V=Er(function($){return $===w},D,!0),Q=Er(function($){return Lt(w,$)>-1},D,!0),W=[function($,ue,ee){var oe=!P&&(ee||ue!==x)||((w=ue).nodeType?V($,ue,ee):Q($,ue,ee));return w=null,oe}];A>j;j++)if(T=h.relative[E[j].type])W=[Er(Cr(W),T)];else{if(T=h.filter[E[j].type].apply(null,E[j].matches),T[q]){for(O=++j;A>O&&!h.relative[E[O].type];O++);return wr(j>1&&Cr(W),j>1&&pi(E.slice(0,j-1).concat({value:E[j-2].type===" "?"*":""})).replace(di,"$1"),T,O>j&&Tr(E.slice(j,O)),A>O&&Tr(E=E.slice(O)),A>O&&pi(E))}W.push(T)}return Cr(W)}function Oh(E,w){var T=w.length>0,O=E.length>0,A=function(P,D,j,V,Q){var W,$,ue,ee=0,oe="0",Ae=P&&[],Ie=[],He=x,fe=P||O&&h.find.TAG("*",Q),wn=J+=He==null?1:Math.random()||.1,Tn=fe.length;for(Q&&(x=D!==F&&D);oe!==Tn&&(W=fe[oe])!=null;oe++){if(O&&W){for($=0;ue=E[$++];)if(ue(W,D,j)){V.push(W);break}Q&&(J=wn)}T&&((W=!ue&&W)&&ee--,P&&Ae.push(W))}if(ee+=oe,T&&oe!==ee){for($=0;ue=w[$++];)ue(Ae,Ie,D,j);if(P){if(ee>0)for(;oe--;)Ae[oe]||Ie[oe]||(Ie[oe]=We.call(V));Ie=mi(Ie)}yt.apply(V,Ie),Q&&!P&&Ie.length>0&&ee+w.length>1&&ce.uniqueSort(V)}return Q&&(J=wn,x=He),Ae};return T?ze(A):A}return C=ce.compile=function(E,w){var T,O=[],A=[],P=Xe[E+" "];if(!P){for(w||(w=y(E)),T=w.length;T--;)P=Tr(w[T]),P[q]?O.push(P):A.push(P);P=Xe(E,Oh(A,O)),P.selector=E}return P},S=ce.select=function(E,w,T,O){var A,P,D,j,V,Q=typeof E=="function"&&E,W=!O&&y(E=Q.selector||E);if(T=T||[],W.length===1){if(P=W[0]=W[0].slice(0),P.length>2&&(D=P[0]).type==="ID"&&l.getById&&w.nodeType===9&&G&&h.relative[P[1].type]){if(w=(h.find.ID(D.matches[0].replace(it,rt),w)||[])[0],!w)return T;Q&&(w=w.parentNode),E=E.slice(P.shift().value.length)}for(A=fi.needsContext.test(E)?0:P.length;A--&&(D=P[A],!h.relative[j=D.type]);)if((V=h.find[j])&&(O=V(D.matches[0].replace(it,rt),gr.test(P[0].type)&&yr(w.parentNode)||w))){if(P.splice(A,1),E=O.length&&pi(P),!E)return yt.apply(T,O),T;break}}return(Q||C(E,W))(O,w,!G,T,gr.test(E)&&yr(w.parentNode)||w),T},l.sortStable=q.split("").sort(Ft).join("")===q,l.detectDuplicates=!!M,k(),l.sortDetached=Je(function(E){return 1&E.compareDocumentPosition(F.createElement("div"))}),Je(function(E){return E.innerHTML="<a href='#'></a>",E.firstChild.getAttribute("href")==="#"})||vr("type|href|height|width",function(E,w,T){return T?void 0:E.getAttribute(w,w.toLowerCase()==="type"?1:2)}),l.attributes&&Je(function(E){return E.innerHTML="<input/>",E.firstChild.setAttribute("value",""),E.firstChild.getAttribute("value")===""})||vr("value",function(E,w,T){return T||E.nodeName.toLowerCase()!=="input"?void 0:E.defaultValue}),Je(function(E){return E.getAttribute("disabled")==null})||vr(pr,function(E,w,T){var O;return T?void 0:E[w]===!0?w.toLowerCase():(O=E.getAttributeNode(w))&&O.specified?O.value:null}),ce}(n);o.find=re,o.expr=re.selectors,o.expr[":"]=o.expr.pseudos,o.unique=re.uniqueSort,o.text=re.getText,o.isXMLDoc=re.isXML,o.contains=re.contains;var se=o.expr.match.needsContext,H=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Ne=/^.[^:#\[\.,]*$/;function Ot(r,a,l){if(o.isFunction(a))return o.grep(r,function(h,p){return!!a.call(h,p,h)!==l});if(a.nodeType)return o.grep(r,function(h){return h===a!==l});if(typeof a=="string"){if(Ne.test(a))return o.filter(a,r,l);a=o.filter(a,r)}return o.grep(r,function(h){return o.inArray(h,a)>=0!==l})}o.filter=function(r,a,l){var h=a[0];return l&&(r=":not("+r+")"),a.length===1&&h.nodeType===1?o.find.matchesSelector(h,r)?[h]:[]:o.find.matches(r,o.grep(a,function(p){return p.nodeType===1}))},o.fn.extend({find:function(r){var a,l=[],h=this,p=h.length;if(typeof r!="string")return this.pushStack(o(r).filter(function(){for(a=0;p>a;a++)if(o.contains(h[a],this))return!0}));for(a=0;p>a;a++)o.find(r,h[a],l);return l=this.pushStack(p>1?o.unique(l):l),l.selector=this.selector?this.selector+" "+r:r,l},filter:function(r){return this.pushStack(Ot(this,r||[],!1))},not:function(r){return this.pushStack(Ot(this,r||[],!0))},is:function(r){return!!Ot(this,typeof r=="string"&&se.test(r)?o(r):r||[],!1).length}});var ut,U=n.document,Zn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,je=o.fn.init=function(r,a){var l,h;if(!r)return this;if(typeof r=="string"){if(l=r.charAt(0)==="<"&&r.charAt(r.length-1)===">"&&r.length>=3?[null,r,null]:Zn.exec(r),!l||!l[1]&&a)return!a||a.jquery?(a||ut).find(r):this.constructor(a).find(r);if(l[1]){if(a=a instanceof o?a[0]:a,o.merge(this,o.parseHTML(l[1],a&&a.nodeType?a.ownerDocument||a:U,!0)),H.test(l[1])&&o.isPlainObject(a))for(l in a)o.isFunction(this[l])?this[l](a[l]):this.attr(l,a[l]);return this}if(h=U.getElementById(l[2]),h&&h.parentNode){if(h.id!==l[2])return ut.find(r);this.length=1,this[0]=h}return this.context=U,this.selector=r,this}return r.nodeType?(this.context=this[0]=r,this.length=1,this):o.isFunction(r)?typeof ut.ready<"u"?ut.ready(r):r(o):(r.selector!==void 0&&(this.selector=r.selector,this.context=r.context),o.makeArray(r,this))};je.prototype=o.fn,ut=o(U);var ht=/^(?:parents|prev(?:Until|All))/,nt={children:!0,contents:!0,next:!0,prev:!0};o.extend({dir:function(r,a,l){for(var h=[],p=r[a];p&&p.nodeType!==9&&(l===void 0||p.nodeType!==1||!o(p).is(l));)p.nodeType===1&&h.push(p),p=p[a];return h},sibling:function(r,a){for(var l=[];r;r=r.nextSibling)r.nodeType===1&&r!==a&&l.push(r);return l}}),o.fn.extend({has:function(r){var a,l=o(r,this),h=l.length;return this.filter(function(){for(a=0;h>a;a++)if(o.contains(this,l[a]))return!0})},closest:function(r,a){for(var l,h=0,p=this.length,v=[],y=se.test(r)||typeof r!="string"?o(r,a||this.context):0;p>h;h++)for(l=this[h];l&&l!==a;l=l.parentNode)if(l.nodeType<11&&(y?y.index(l)>-1:l.nodeType===1&&o.find.matchesSelector(l,r))){v.push(l);break}return this.pushStack(v.length>1?o.unique(v):v)},index:function(r){return r?typeof r=="string"?o.inArray(this[0],o(r)):o.inArray(r.jquery?r[0]:r,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(r,a){return this.pushStack(o.unique(o.merge(this.get(),o(r,a))))},addBack:function(r){return this.add(r==null?this.prevObject:this.prevObject.filter(r))}});function ei(r,a){do r=r[a];while(r&&r.nodeType!==1);return r}o.each({parent:function(r){var a=r.parentNode;return a&&a.nodeType!==11?a:null},parents:function(r){return o.dir(r,"parentNode")},parentsUntil:function(r,a,l){return o.dir(r,"parentNode",l)},next:function(r){return ei(r,"nextSibling")},prev:function(r){return ei(r,"previousSibling")},nextAll:function(r){return o.dir(r,"nextSibling")},prevAll:function(r){return o.dir(r,"previousSibling")},nextUntil:function(r,a,l){return o.dir(r,"nextSibling",l)},prevUntil:function(r,a,l){return o.dir(r,"previousSibling",l)},siblings:function(r){return o.sibling((r.parentNode||{}).firstChild,r)},children:function(r){return o.sibling(r.firstChild)},contents:function(r){return o.nodeName(r,"iframe")?r.contentDocument||r.contentWindow.document:o.merge([],r.childNodes)}},function(r,a){o.fn[r]=function(l,h){var p=o.map(this,a,l);return r.slice(-5)!=="Until"&&(h=l),h&&typeof h=="string"&&(p=o.filter(h,p)),this.length>1&&(nt[r]||(p=o.unique(p)),ht.test(r)&&(p=p.reverse())),this.pushStack(p)}});var Be=/\S+/g,co={};function xu(r){var a=co[r]={};return o.each(r.match(Be)||[],function(l,h){a[h]=!0}),a}o.Callbacks=function(r){r=typeof r=="string"?co[r]||xu(r):o.extend({},r);var a,l,h,p,v,y,C=[],S=!r.once&&[],x=function(M){for(l=r.memory&&M,h=!0,v=y||0,y=0,p=C.length,a=!0;C&&p>v;v++)if(C[v].apply(M[0],M[1])===!1&&r.stopOnFalse){l=!1;break}a=!1,C&&(S?S.length&&x(S.shift()):l?C=[]:I.disable())},I={add:function(){if(C){var M=C.length;(function k(F){o.each(F,function(Y,G){var X=o.type(G);X==="function"?r.unique&&I.has(G)||C.push(G):G&&G.length&&X!=="string"&&k(G)})})(arguments),a?p=C.length:l&&(y=M,x(l))}return this},remove:function(){return C&&o.each(arguments,function(M,k){for(var F;(F=o.inArray(k,C,F))>-1;)C.splice(F,1),a&&(p>=F&&p--,v>=F&&v--)}),this},has:function(M){return M?o.inArray(M,C)>-1:!(!C||!C.length)},empty:function(){return C=[],p=0,this},disable:function(){return C=S=l=void 0,this},disabled:function(){return!C},lock:function(){return S=void 0,l||I.disable(),this},locked:function(){return!S},fireWith:function(M,k){return!C||h&&!S||(k=k||[],k=[M,k.slice?k.slice():k],a?S.push(k):x(k)),this},fire:function(){return I.fireWith(this,arguments),this},fired:function(){return!!h}};return I},o.extend({Deferred:function(r){var a=[["resolve","done",o.Callbacks("once memory"),"resolved"],["reject","fail",o.Callbacks("once memory"),"rejected"],["notify","progress",o.Callbacks("memory")]],l="pending",h={state:function(){return l},always:function(){return p.done(arguments).fail(arguments),this},then:function(){var v=arguments;return o.Deferred(function(y){o.each(a,function(C,S){var x=o.isFunction(v[C])&&v[C];p[S[1]](function(){var I=x&&x.apply(this,arguments);I&&o.isFunction(I.promise)?I.promise().done(y.resolve).fail(y.reject).progress(y.notify):y[S[0]+"With"](this===h?y.promise():this,x?[I]:arguments)})}),v=null}).promise()},promise:function(v){return v!=null?o.extend(v,h):h}},p={};return h.pipe=h.then,o.each(a,function(v,y){var C=y[2],S=y[3];h[y[1]]=C.add,S&&C.add(function(){l=S},a[1^v][2].disable,a[2][2].lock),p[y[0]]=function(){return p[y[0]+"With"](this===p?h:this,arguments),this},p[y[0]+"With"]=C.fireWith}),h.promise(p),r&&r.call(p,p),p},when:function(r){var a=0,l=i.call(arguments),h=l.length,p=h!==1||r&&o.isFunction(r.promise)?h:0,v=p===1?r:o.Deferred(),y=function(I,M,k){return function(F){M[I]=this,k[I]=arguments.length>1?i.call(arguments):F,k===C?v.notifyWith(M,k):--p||v.resolveWith(M,k)}},C,S,x;if(h>1)for(C=new Array(h),S=new Array(h),x=new Array(h);h>a;a++)l[a]&&o.isFunction(l[a].promise)?l[a].promise().done(y(a,x,l)).fail(v.reject).progress(y(a,S,C)):--p;return p||v.resolveWith(x,l),v.promise()}});var ti;o.fn.ready=function(r){return o.ready.promise().done(r),this},o.extend({isReady:!1,readyWait:1,holdReady:function(r){r?o.readyWait++:o.ready(!0)},ready:function(r){if(r===!0?!--o.readyWait:!o.isReady){if(!U.body)return setTimeout(o.ready);o.isReady=!0,r!==!0&&--o.readyWait>0||(ti.resolveWith(U,[o]),o.fn.triggerHandler&&(o(U).triggerHandler("ready"),o(U).off("ready")))}}});function uo(){U.addEventListener?(U.removeEventListener("DOMContentLoaded",dt,!1),n.removeEventListener("load",dt,!1)):(U.detachEvent("onreadystatechange",dt),n.detachEvent("onload",dt))}function dt(){(U.addEventListener||event.type==="load"||U.readyState==="complete")&&(uo(),o.ready())}o.ready.promise=function(r){if(!ti)if(ti=o.Deferred(),U.readyState==="complete")setTimeout(o.ready);else if(U.addEventListener)U.addEventListener("DOMContentLoaded",dt,!1),n.addEventListener("load",dt,!1);else{U.attachEvent("onreadystatechange",dt),n.attachEvent("onload",dt);var a=!1;try{a=n.frameElement==null&&U.documentElement}catch{}a&&a.doScroll&&function l(){if(!o.isReady){try{a.doScroll("left")}catch{return setTimeout(l,50)}uo(),o.ready()}}()}return ti.promise(r)};var $e="undefined",ho;for(ho in o(g))break;g.ownLast=ho!=="0",g.inlineBlockNeedsLayout=!1,o(function(){var r,a,l,h;l=U.getElementsByTagName("body")[0],l&&l.style&&(a=U.createElement("div"),h=U.createElement("div"),h.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",l.appendChild(h).appendChild(a),typeof a.style.zoom!==$e&&(a.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",g.inlineBlockNeedsLayout=r=a.offsetWidth===3,r&&(l.style.zoom=1)),l.removeChild(h))}),function(){var r=U.createElement("div");if(g.deleteExpando==null){g.deleteExpando=!0;try{delete r.test}catch{g.deleteExpando=!1}}r=null}(),o.acceptData=function(r){var a=o.noData[(r.nodeName+" ").toLowerCase()],l=+r.nodeType||1;return l!==1&&l!==9?!1:!a||a!==!0&&r.getAttribute("classid")===a};var Au=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Iu=/([A-Z])/g;function fo(r,a,l){if(l===void 0&&r.nodeType===1){var h="data-"+a.replace(Iu,"-$1").toLowerCase();if(l=r.getAttribute(h),typeof l=="string"){try{l=l==="true"?!0:l==="false"?!1:l==="null"?null:+l+""===l?+l:Au.test(l)?o.parseJSON(l):l}catch{}o.data(r,a,l)}else l=void 0}return l}function Zi(r){var a;for(a in r)if((a!=="data"||!o.isEmptyObject(r[a]))&&a!=="toJSON")return!1;return!0}function po(r,a,l,h){if(o.acceptData(r)){var p,v,y=o.expando,C=r.nodeType,S=C?o.cache:r,x=C?r[y]:r[y]&&y;if(x&&S[x]&&(h||S[x].data)||l!==void 0||typeof a!="string")return x||(x=C?r[y]=t.pop()||o.guid++:y),S[x]||(S[x]=C?{}:{toJSON:o.noop}),(typeof a=="object"||typeof a=="function")&&(h?S[x]=o.extend(S[x],a):S[x].data=o.extend(S[x].data,a)),v=S[x],h||(v.data||(v.data={}),v=v.data),l!==void 0&&(v[o.camelCase(a)]=l),typeof a=="string"?(p=v[a],p==null&&(p=v[o.camelCase(a)])):p=v,p}}function mo(r,a,l){if(o.acceptData(r)){var h,p,v=r.nodeType,y=v?o.cache:r,C=v?r[o.expando]:o.expando;if(y[C]){if(a&&(h=l?y[C]:y[C].data)){for(o.isArray(a)?a=a.concat(o.map(a,o.camelCase)):(a in h)?a=[a]:(a=o.camelCase(a),a=a in h?[a]:a.split(" ")),p=a.length;p--;)delete h[a[p]];if(l?!Zi(h):!o.isEmptyObject(h))return}(l||(delete y[C].data,Zi(y[C])))&&(v?o.cleanData([r],!0):g.deleteExpando||y!=y.window?delete y[C]:y[C]=null)}}}o.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(r){return r=r.nodeType?o.cache[r[o.expando]]:r[o.expando],!!r&&!Zi(r)},data:function(r,a,l){return po(r,a,l)},removeData:function(r,a){return mo(r,a)},_data:function(r,a,l){return po(r,a,l,!0)},_removeData:function(r,a){return mo(r,a,!0)}}),o.fn.extend({data:function(r,a){var l,h,p,v=this[0],y=v&&v.attributes;if(r===void 0){if(this.length&&(p=o.data(v),v.nodeType===1&&!o._data(v,"parsedAttrs"))){for(l=y.length;l--;)y[l]&&(h=y[l].name,h.indexOf("data-")===0&&(h=o.camelCase(h.slice(5)),fo(v,h,p[h])));o._data(v,"parsedAttrs",!0)}return p}return typeof r=="object"?this.each(function(){o.data(this,r)}):arguments.length>1?this.each(function(){o.data(this,r,a)}):v?fo(v,r,o.data(v,r)):void 0},removeData:function(r){return this.each(function(){o.removeData(this,r)})}}),o.extend({queue:function(r,a,l){var h;return r?(a=(a||"fx")+"queue",h=o._data(r,a),l&&(!h||o.isArray(l)?h=o._data(r,a,o.makeArray(l)):h.push(l)),h||[]):void 0},dequeue:function(r,a){a=a||"fx";var l=o.queue(r,a),h=l.length,p=l.shift(),v=o._queueHooks(r,a),y=function(){o.dequeue(r,a)};p==="inprogress"&&(p=l.shift(),h--),p&&(a==="fx"&&l.unshift("inprogress"),delete v.stop,p.call(r,y,v)),!h&&v&&v.empty.fire()},_queueHooks:function(r,a){var l=a+"queueHooks";return o._data(r,l)||o._data(r,l,{empty:o.Callbacks("once memory").add(function(){o._removeData(r,a+"queue"),o._removeData(r,l)})})}}),o.fn.extend({queue:function(r,a){var l=2;return typeof r!="string"&&(a=r,r="fx",l--),arguments.length<l?o.queue(this[0],r):a===void 0?this:this.each(function(){var h=o.queue(this,r,a);o._queueHooks(this,r),r==="fx"&&h[0]!=="inprogress"&&o.dequeue(this,r)})},dequeue:function(r){return this.each(function(){o.dequeue(this,r)})},clearQueue:function(r){return this.queue(r||"fx",[])},promise:function(r,a){var l,h=1,p=o.Deferred(),v=this,y=this.length,C=function(){--h||p.resolveWith(v,[v])};for(typeof r!="string"&&(a=r,r=void 0),r=r||"fx";y--;)l=o._data(v[y],r+"queueHooks"),l&&l.empty&&(h++,l.empty.add(C));return C(),p.promise(a)}});var ni=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Nt=["Top","Right","Bottom","Left"],_n=function(r,a){return r=a||r,o.css(r,"display")==="none"||!o.contains(r.ownerDocument,r)},Rt=o.access=function(r,a,l,h,p,v,y){var C=0,S=r.length,x=l==null;if(o.type(l)==="object"){p=!0;for(C in l)o.access(r,a,C,l[C],!0,v,y)}else if(h!==void 0&&(p=!0,o.isFunction(h)||(y=!0),x&&(y?(a.call(r,h),a=null):(x=a,a=function(I,M,k){return x.call(o(I),k)})),a))for(;S>C;C++)a(r[C],l,y?h:h.call(r[C],C,a(r[C],l)));return p?r:x?a.call(r):S?a(r[0],l):v},er=/^(?:checkbox|radio)$/i;(function(){var r=U.createElement("input"),a=U.createElement("div"),l=U.createDocumentFragment();if(a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",g.leadingWhitespace=a.firstChild.nodeType===3,g.tbody=!a.getElementsByTagName("tbody").length,g.htmlSerialize=!!a.getElementsByTagName("link").length,g.html5Clone=U.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",r.type="checkbox",r.checked=!0,l.appendChild(r),g.appendChecked=r.checked,a.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,l.appendChild(a),a.innerHTML="<input type='radio' checked='checked' name='t'/>",g.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,g.noCloneEvent=!0,a.attachEvent&&(a.attachEvent("onclick",function(){g.noCloneEvent=!1}),a.cloneNode(!0).click()),g.deleteExpando==null){g.deleteExpando=!0;try{delete a.test}catch{g.deleteExpando=!1}}})(),function(){var r,a,l=U.createElement("div");for(r in{submit:!0,change:!0,focusin:!0})a="on"+r,(g[r+"Bubbles"]=a in n)||(l.setAttribute(a,"t"),g[r+"Bubbles"]=l.attributes[a].expando===!1);l=null}();var tr=/^(?:input|select|textarea)$/i,Ou=/^key/,Nu=/^(?:mouse|pointer|contextmenu)|click/,go=/^(?:focusinfocus|focusoutblur)$/,_o=/^([^.]*)(?:\.(.+)|)$/;function ii(){return!0}function Kt(){return!1}function vo(){try{return U.activeElement}catch{}}o.event={global:{},add:function(r,a,l,h,p){var v,y,C,S,x,I,M,k,F,Y,G,X=o._data(r);if(X){for(l.handler&&(S=l,l=S.handler,p=S.selector),l.guid||(l.guid=o.guid++),(y=X.events)||(y=X.events={}),(I=X.handle)||(I=X.handle=function(Ue){return typeof o===$e||Ue&&o.event.triggered===Ue.type?void 0:o.event.dispatch.apply(I.elem,arguments)},I.elem=r),a=(a||"").match(Be)||[""],C=a.length;C--;)v=_o.exec(a[C])||[],F=G=v[1],Y=(v[2]||"").split(".").sort(),F&&(x=o.event.special[F]||{},F=(p?x.delegateType:x.bindType)||F,x=o.event.special[F]||{},M=o.extend({type:F,origType:G,data:h,handler:l,guid:l.guid,selector:p,needsContext:p&&o.expr.match.needsContext.test(p),namespace:Y.join(".")},S),(k=y[F])||(k=y[F]=[],k.delegateCount=0,x.setup&&x.setup.call(r,h,Y,I)!==!1||(r.addEventListener?r.addEventListener(F,I,!1):r.attachEvent&&r.attachEvent("on"+F,I))),x.add&&(x.add.call(r,M),M.handler.guid||(M.handler.guid=l.guid)),p?k.splice(k.delegateCount++,0,M):k.push(M),o.event.global[F]=!0);r=null}},remove:function(r,a,l,h,p){var v,y,C,S,x,I,M,k,F,Y,G,X=o.hasData(r)&&o._data(r);if(X&&(I=X.events)){for(a=(a||"").match(Be)||[""],x=a.length;x--;)if(C=_o.exec(a[x])||[],F=G=C[1],Y=(C[2]||"").split(".").sort(),F){for(M=o.event.special[F]||{},F=(h?M.delegateType:M.bindType)||F,k=I[F]||[],C=C[2]&&new RegExp("(^|\\.)"+Y.join("\\.(?:.*\\.|)")+"(\\.|$)"),S=v=k.length;v--;)y=k[v],!p&&G!==y.origType||l&&l.guid!==y.guid||C&&!C.test(y.namespace)||h&&h!==y.selector&&(h!=="**"||!y.selector)||(k.splice(v,1),y.selector&&k.delegateCount--,M.remove&&M.remove.call(r,y));S&&!k.length&&(M.teardown&&M.teardown.call(r,Y,X.handle)!==!1||o.removeEvent(r,F,X.handle),delete I[F])}else for(F in I)o.event.remove(r,F+a[x],l,h,!0);o.isEmptyObject(I)&&(delete X.handle,o._removeData(r,"events"))}},trigger:function(r,a,l,h){var p,v,y,C,S,x,I,M=[l||U],k=m.call(r,"type")?r.type:r,F=m.call(r,"namespace")?r.namespace.split("."):[];if(y=x=l=l||U,l.nodeType!==3&&l.nodeType!==8&&!go.test(k+o.event.triggered)&&(k.indexOf(".")>=0&&(F=k.split("."),k=F.shift(),F.sort()),v=k.indexOf(":")<0&&"on"+k,r=r[o.expando]?r:new o.Event(k,typeof r=="object"&&r),r.isTrigger=h?2:3,r.namespace=F.join("."),r.namespace_re=r.namespace?new RegExp("(^|\\.)"+F.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,r.result=void 0,r.target||(r.target=l),a=a==null?[r]:o.makeArray(a,[r]),S=o.event.special[k]||{},h||!S.trigger||S.trigger.apply(l,a)!==!1)){if(!h&&!S.noBubble&&!o.isWindow(l)){for(C=S.delegateType||k,go.test(C+k)||(y=y.parentNode);y;y=y.parentNode)M.push(y),x=y;x===(l.ownerDocument||U)&&M.push(x.defaultView||x.parentWindow||n)}for(I=0;(y=M[I++])&&!r.isPropagationStopped();)r.type=I>1?C:S.bindType||k,p=(o._data(y,"events")||{})[r.type]&&o._data(y,"handle"),p&&p.apply(y,a),p=v&&y[v],p&&p.apply&&o.acceptData(y)&&(r.result=p.apply(y,a),r.result===!1&&r.preventDefault());if(r.type=k,!h&&!r.isDefaultPrevented()&&(!S._default||S._default.apply(M.pop(),a)===!1)&&o.acceptData(l)&&v&&l[k]&&!o.isWindow(l)){x=l[v],x&&(l[v]=null),o.event.triggered=k;try{l[k]()}catch{}o.event.triggered=void 0,x&&(l[v]=x)}return r.result}},dispatch:function(r){r=o.event.fix(r);var a,l,h,p,v,y=[],C=i.call(arguments),S=(o._data(this,"events")||{})[r.type]||[],x=o.event.special[r.type]||{};if(C[0]=r,r.delegateTarget=this,!x.preDispatch||x.preDispatch.call(this,r)!==!1){for(y=o.event.handlers.call(this,r,S),a=0;(p=y[a++])&&!r.isPropagationStopped();)for(r.currentTarget=p.elem,v=0;(h=p.handlers[v++])&&!r.isImmediatePropagationStopped();)(!r.namespace_re||r.namespace_re.test(h.namespace))&&(r.handleObj=h,r.data=h.data,l=((o.event.special[h.origType]||{}).handle||h.handler).apply(p.elem,C),l!==void 0&&(r.result=l)===!1&&(r.preventDefault(),r.stopPropagation()));return x.postDispatch&&x.postDispatch.call(this,r),r.result}},handlers:function(r,a){var l,h,p,v,y=[],C=a.delegateCount,S=r.target;if(C&&S.nodeType&&(!r.button||r.type!=="click")){for(;S!=this;S=S.parentNode||this)if(S.nodeType===1&&(S.disabled!==!0||r.type!=="click")){for(p=[],v=0;C>v;v++)h=a[v],l=h.selector+" ",p[l]===void 0&&(p[l]=h.needsContext?o(l,this).index(S)>=0:o.find(l,this,null,[S]).length),p[l]&&p.push(h);p.length&&y.push({elem:S,handlers:p})}}return C<a.length&&y.push({elem:this,handlers:a.slice(C)}),y},fix:function(r){if(r[o.expando])return r;var a,l,h,p=r.type,v=r,y=this.fixHooks[p];for(y||(this.fixHooks[p]=y=Nu.test(p)?this.mouseHooks:Ou.test(p)?this.keyHooks:{}),h=y.props?this.props.concat(y.props):this.props,r=new o.Event(v),a=h.length;a--;)l=h[a],r[l]=v[l];return r.target||(r.target=v.srcElement||U),r.target.nodeType===3&&(r.target=r.target.parentNode),r.metaKey=!!r.metaKey,y.filter?y.filter(r,v):r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(r,a){return r.which==null&&(r.which=a.charCode!=null?a.charCode:a.keyCode),r}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(r,a){var l,h,p,v=a.button,y=a.fromElement;return r.pageX==null&&a.clientX!=null&&(h=r.target.ownerDocument||U,p=h.documentElement,l=h.body,r.pageX=a.clientX+(p&&p.scrollLeft||l&&l.scrollLeft||0)-(p&&p.clientLeft||l&&l.clientLeft||0),r.pageY=a.clientY+(p&&p.scrollTop||l&&l.scrollTop||0)-(p&&p.clientTop||l&&l.clientTop||0)),!r.relatedTarget&&y&&(r.relatedTarget=y===r.target?a.toElement:y),r.which||v===void 0||(r.which=1&v?1:2&v?3:4&v?2:0),r}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==vo()&&this.focus)try{return this.focus(),!1}catch{}},delegateType:"focusin"},blur:{trigger:function(){return this===vo()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return o.nodeName(this,"input")&&this.type==="checkbox"&&this.click?(this.click(),!1):void 0},_default:function(r){return o.nodeName(r.target,"a")}},beforeunload:{postDispatch:function(r){r.result!==void 0&&r.originalEvent&&(r.originalEvent.returnValue=r.result)}}},simulate:function(r,a,l,h){var p=o.extend(new o.Event,l,{type:r,isSimulated:!0,originalEvent:{}});h?o.event.trigger(p,null,a):o.event.dispatch.call(a,p),p.isDefaultPrevented()&&l.preventDefault()}},o.removeEvent=U.removeEventListener?function(r,a,l){r.removeEventListener&&r.removeEventListener(a,l,!1)}:function(r,a,l){var h="on"+a;r.detachEvent&&(typeof r[h]===$e&&(r[h]=null),r.detachEvent(h,l))},o.Event=function(r,a){return this instanceof o.Event?(r&&r.type?(this.originalEvent=r,this.type=r.type,this.isDefaultPrevented=r.defaultPrevented||r.defaultPrevented===void 0&&r.returnValue===!1?ii:Kt):this.type=r,a&&o.extend(this,a),this.timeStamp=r&&r.timeStamp||o.now(),void(this[o.expando]=!0)):new o.Event(r,a)},o.Event.prototype={isDefaultPrevented:Kt,isPropagationStopped:Kt,isImmediatePropagationStopped:Kt,preventDefault:function(){var r=this.originalEvent;this.isDefaultPrevented=ii,r&&(r.preventDefault?r.preventDefault():r.returnValue=!1)},stopPropagation:function(){var r=this.originalEvent;this.isPropagationStopped=ii,r&&(r.stopPropagation&&r.stopPropagation(),r.cancelBubble=!0)},stopImmediatePropagation:function(){var r=this.originalEvent;this.isImmediatePropagationStopped=ii,r&&r.stopImmediatePropagation&&r.stopImmediatePropagation(),this.stopPropagation()}},o.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(r,a){o.event.special[r]={delegateType:a,bindType:a,handle:function(l){var h,p=this,v=l.relatedTarget,y=l.handleObj;return(!v||v!==p&&!o.contains(p,v))&&(l.type=y.origType,h=y.handler.apply(this,arguments),l.type=a),h}}}),g.submitBubbles||(o.event.special.submit={setup:function(){return o.nodeName(this,"form")?!1:void o.event.add(this,"click._submit keypress._submit",function(r){var a=r.target,l=o.nodeName(a,"input")||o.nodeName(a,"button")?a.form:void 0;l&&!o._data(l,"submitBubbles")&&(o.event.add(l,"submit._submit",function(h){h._submit_bubble=!0}),o._data(l,"submitBubbles",!0))})},postDispatch:function(r){r._submit_bubble&&(delete r._submit_bubble,this.parentNode&&!r.isTrigger&&o.event.simulate("submit",this.parentNode,r,!0))},teardown:function(){return o.nodeName(this,"form")?!1:void o.event.remove(this,"._submit")}}),g.changeBubbles||(o.event.special.change={setup:function(){return tr.test(this.nodeName)?((this.type==="checkbox"||this.type==="radio")&&(o.event.add(this,"propertychange._change",function(r){r.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),o.event.add(this,"click._change",function(r){this._just_changed&&!r.isTrigger&&(this._just_changed=!1),o.event.simulate("change",this,r,!0)})),!1):void o.event.add(this,"beforeactivate._change",function(r){var a=r.target;tr.test(a.nodeName)&&!o._data(a,"changeBubbles")&&(o.event.add(a,"change._change",function(l){!this.parentNode||l.isSimulated||l.isTrigger||o.event.simulate("change",this.parentNode,l,!0)}),o._data(a,"changeBubbles",!0))})},handle:function(r){var a=r.target;return this!==a||r.isSimulated||r.isTrigger||a.type!=="radio"&&a.type!=="checkbox"?r.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return o.event.remove(this,"._change"),!tr.test(this.nodeName)}}),g.focusinBubbles||o.each({focus:"focusin",blur:"focusout"},function(r,a){var l=function(h){o.event.simulate(a,h.target,o.event.fix(h),!0)};o.event.special[a]={setup:function(){var h=this.ownerDocument||this,p=o._data(h,a);p||h.addEventListener(r,l,!0),o._data(h,a,(p||0)+1)},teardown:function(){var h=this.ownerDocument||this,p=o._data(h,a)-1;p?o._data(h,a,p):(h.removeEventListener(r,l,!0),o._removeData(h,a))}}}),o.fn.extend({on:function(r,a,l,h,p){var v,y;if(typeof r=="object"){typeof a!="string"&&(l=l||a,a=void 0);for(v in r)this.on(v,a,l,r[v],p);return this}if(l==null&&h==null?(h=a,l=a=void 0):h==null&&(typeof a=="string"?(h=l,l=void 0):(h=l,l=a,a=void 0)),h===!1)h=Kt;else if(!h)return this;return p===1&&(y=h,h=function(C){return o().off(C),y.apply(this,arguments)},h.guid=y.guid||(y.guid=o.guid++)),this.each(function(){o.event.add(this,r,h,l,a)})},one:function(r,a,l,h){return this.on(r,a,l,h,1)},off:function(r,a,l){var h,p;if(r&&r.preventDefault&&r.handleObj)return h=r.handleObj,o(r.delegateTarget).off(h.namespace?h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if(typeof r=="object"){for(p in r)this.off(p,a,r[p]);return this}return(a===!1||typeof a=="function")&&(l=a,a=void 0),l===!1&&(l=Kt),this.each(function(){o.event.remove(this,r,l,a)})},trigger:function(r,a){return this.each(function(){o.event.trigger(r,a,this)})},triggerHandler:function(r,a){var l=this[0];return l?o.event.trigger(r,a,l,!0):void 0}});function yo(r){var a=Eo.split("|"),l=r.createDocumentFragment();if(l.createElement)for(;a.length;)l.createElement(a.pop());return l}var Eo="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ru=/ jQuery\d+="(?:null|\d+)"/g,Co=new RegExp("<(?:"+Eo+")[\\s/>]","i"),nr=/^\s+/,wo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,To=/<([\w:]+)/,bo=/<tbody/i,Pu=/<|&#?\w+;/,Du=/<(?:script|style|link)/i,ku=/checked\s*(?:[^=]|=\s*.checked.)/i,So=/^$|\/(?:java|ecma)script/i,Mu=/^true\/(.*)/,Fu=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ve={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:g.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Lu=yo(U),ir=Lu.appendChild(U.createElement("div"));Ve.optgroup=Ve.option,Ve.tbody=Ve.tfoot=Ve.colgroup=Ve.caption=Ve.thead,Ve.th=Ve.td;function be(r,a){var l,h,p=0,v=typeof r.getElementsByTagName!==$e?r.getElementsByTagName(a||"*"):typeof r.querySelectorAll!==$e?r.querySelectorAll(a||"*"):void 0;if(!v)for(v=[],l=r.childNodes||r;(h=l[p])!=null;p++)!a||o.nodeName(h,a)?v.push(h):o.merge(v,be(h,a));return a===void 0||a&&o.nodeName(r,a)?o.merge([r],v):v}function ju(r){er.test(r.type)&&(r.defaultChecked=r.checked)}function xo(r,a){return o.nodeName(r,"table")&&o.nodeName(a.nodeType!==11?a:a.firstChild,"tr")?r.getElementsByTagName("tbody")[0]||r.appendChild(r.ownerDocument.createElement("tbody")):r}function Ao(r){return r.type=(o.find.attr(r,"type")!==null)+"/"+r.type,r}function Io(r){var a=Mu.exec(r.type);return a?r.type=a[1]:r.removeAttribute("type"),r}function rr(r,a){for(var l,h=0;(l=r[h])!=null;h++)o._data(l,"globalEval",!a||o._data(a[h],"globalEval"))}function Oo(r,a){if(a.nodeType===1&&o.hasData(r)){var l,h,p,v=o._data(r),y=o._data(a,v),C=v.events;if(C){delete y.handle,y.events={};for(l in C)for(h=0,p=C[l].length;p>h;h++)o.event.add(a,l,C[l][h])}y.data&&(y.data=o.extend({},y.data))}}function Bu(r,a){var l,h,p;if(a.nodeType===1){if(l=a.nodeName.toLowerCase(),!g.noCloneEvent&&a[o.expando]){p=o._data(a);for(h in p.events)o.removeEvent(a,h,p.handle);a.removeAttribute(o.expando)}l==="script"&&a.text!==r.text?(Ao(a).text=r.text,Io(a)):l==="object"?(a.parentNode&&(a.outerHTML=r.outerHTML),g.html5Clone&&r.innerHTML&&!o.trim(a.innerHTML)&&(a.innerHTML=r.innerHTML)):l==="input"&&er.test(r.type)?(a.defaultChecked=a.checked=r.checked,a.value!==r.value&&(a.value=r.value)):l==="option"?a.defaultSelected=a.selected=r.defaultSelected:(l==="input"||l==="textarea")&&(a.defaultValue=r.defaultValue)}}o.extend({clone:function(r,a,l){var h,p,v,y,C,S=o.contains(r.ownerDocument,r);if(g.html5Clone||o.isXMLDoc(r)||!Co.test("<"+r.nodeName+">")?v=r.cloneNode(!0):(ir.innerHTML=r.outerHTML,ir.removeChild(v=ir.firstChild)),!(g.noCloneEvent&&g.noCloneChecked||r.nodeType!==1&&r.nodeType!==11||o.isXMLDoc(r)))for(h=be(v),C=be(r),y=0;(p=C[y])!=null;++y)h[y]&&Bu(p,h[y]);if(a)if(l)for(C=C||be(r),h=h||be(v),y=0;(p=C[y])!=null;y++)Oo(p,h[y]);else Oo(r,v);return h=be(v,"script"),h.length>0&&rr(h,!S&&be(r,"script")),h=C=p=null,v},buildFragment:function(r,a,l,h){for(var p,v,y,C,S,x,I,M=r.length,k=yo(a),F=[],Y=0;M>Y;Y++)if(v=r[Y],v||v===0)if(o.type(v)==="object")o.merge(F,v.nodeType?[v]:v);else if(Pu.test(v)){for(C=C||k.appendChild(a.createElement("div")),S=(To.exec(v)||["",""])[1].toLowerCase(),I=Ve[S]||Ve._default,C.innerHTML=I[1]+v.replace(wo,"<$1></$2>")+I[2],p=I[0];p--;)C=C.lastChild;if(!g.leadingWhitespace&&nr.test(v)&&F.push(a.createTextNode(nr.exec(v)[0])),!g.tbody)for(v=S!=="table"||bo.test(v)?I[1]!=="<table>"||bo.test(v)?0:C:C.firstChild,p=v&&v.childNodes.length;p--;)o.nodeName(x=v.childNodes[p],"tbody")&&!x.childNodes.length&&v.removeChild(x);for(o.merge(F,C.childNodes),C.textContent="";C.firstChild;)C.removeChild(C.firstChild);C=k.lastChild}else F.push(a.createTextNode(v));for(C&&k.removeChild(C),g.appendChecked||o.grep(be(F,"input"),ju),Y=0;v=F[Y++];)if((!h||o.inArray(v,h)===-1)&&(y=o.contains(v.ownerDocument,v),C=be(k.appendChild(v),"script"),y&&rr(C),l))for(p=0;v=C[p++];)So.test(v.type||"")&&l.push(v);return C=null,k},cleanData:function(r,a){for(var l,h,p,v,y=0,C=o.expando,S=o.cache,x=g.deleteExpando,I=o.event.special;(l=r[y])!=null;y++)if((a||o.acceptData(l))&&(p=l[C],v=p&&S[p])){if(v.events)for(h in v.events)I[h]?o.event.remove(l,h):o.removeEvent(l,h,v.handle);S[p]&&(delete S[p],x?delete l[C]:typeof l.removeAttribute!==$e?l.removeAttribute(C):l[C]=null,t.push(p))}}}),o.fn.extend({text:function(r){return Rt(this,function(a){return a===void 0?o.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(a))},null,r,arguments.length)},append:function(){return this.domManip(arguments,function(r){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var a=xo(this,r);a.appendChild(r)}})},prepend:function(){return this.domManip(arguments,function(r){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var a=xo(this,r);a.insertBefore(r,a.firstChild)}})},before:function(){return this.domManip(arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this)})},after:function(){return this.domManip(arguments,function(r){this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling)})},remove:function(r,a){for(var l,h=r?o.filter(r,this):this,p=0;(l=h[p])!=null;p++)a||l.nodeType!==1||o.cleanData(be(l)),l.parentNode&&(a&&o.contains(l.ownerDocument,l)&&rr(be(l,"script")),l.parentNode.removeChild(l));return this},empty:function(){for(var r,a=0;(r=this[a])!=null;a++){for(r.nodeType===1&&o.cleanData(be(r,!1));r.firstChild;)r.removeChild(r.firstChild);r.options&&o.nodeName(r,"select")&&(r.options.length=0)}return this},clone:function(r,a){return r=r??!1,a=a??r,this.map(function(){return o.clone(this,r,a)})},html:function(r){return Rt(this,function(a){var l=this[0]||{},h=0,p=this.length;if(a===void 0)return l.nodeType===1?l.innerHTML.replace(Ru,""):void 0;if(!(typeof a!="string"||Du.test(a)||!g.htmlSerialize&&Co.test(a)||!g.leadingWhitespace&&nr.test(a)||Ve[(To.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(wo,"<$1></$2>");try{for(;p>h;h++)l=this[h]||{},l.nodeType===1&&(o.cleanData(be(l,!1)),l.innerHTML=a);l=0}catch{}}l&&this.empty().append(a)},null,r,arguments.length)},replaceWith:function(){var r=arguments[0];return this.domManip(arguments,function(a){r=this.parentNode,o.cleanData(be(this)),r&&r.replaceChild(a,this)}),r&&(r.length||r.nodeType)?this:this.remove()},detach:function(r){return this.remove(r,!0)},domManip:function(r,a){r=s.apply([],r);var l,h,p,v,y,C,S=0,x=this.length,I=this,M=x-1,k=r[0],F=o.isFunction(k);if(F||x>1&&typeof k=="string"&&!g.checkClone&&ku.test(k))return this.each(function(Y){var G=I.eq(Y);F&&(r[0]=k.call(this,Y,G.html())),G.domManip(r,a)});if(x&&(C=o.buildFragment(r,this[0].ownerDocument,!1,this),l=C.firstChild,C.childNodes.length===1&&(C=l),l)){for(v=o.map(be(C,"script"),Ao),p=v.length;x>S;S++)h=C,S!==M&&(h=o.clone(h,!0,!0),p&&o.merge(v,be(h,"script"))),a.call(this[S],h,S);if(p)for(y=v[v.length-1].ownerDocument,o.map(v,Io),S=0;p>S;S++)h=v[S],So.test(h.type||"")&&!o._data(h,"globalEval")&&o.contains(y,h)&&(h.src?o._evalUrl&&o._evalUrl(h.src):o.globalEval((h.text||h.textContent||h.innerHTML||"").replace(Fu,"")));C=l=null}return this}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(r,a){o.fn[r]=function(l){for(var h,p=0,v=[],y=o(l),C=y.length-1;C>=p;p++)h=p===C?this:this.clone(!0),o(y[p])[a](h),c.apply(v,h.get());return this.pushStack(v)}});var vn,No={};function Ro(r,a){var l,h=o(a.createElement(r)).appendTo(a.body),p=n.getDefaultComputedStyle&&(l=n.getDefaultComputedStyle(h[0]))?l.display:o.css(h[0],"display");return h.detach(),p}function ri(r){var a=U,l=No[r];return l||(l=Ro(r,a),l!=="none"&&l||(vn=(vn||o("<iframe frameborder='0' width='0' height='0'/>")).appendTo(a.documentElement),a=(vn[0].contentWindow||vn[0].contentDocument).document,a.write(),a.close(),l=Ro(r,a),vn.detach()),No[r]=l),l}(function(){var r;g.shrinkWrapBlocks=function(){if(r!=null)return r;r=!1;var a,l,h;return l=U.getElementsByTagName("body")[0],l&&l.style?(a=U.createElement("div"),h=U.createElement("div"),h.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",l.appendChild(h).appendChild(a),typeof a.style.zoom!==$e&&(a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",a.appendChild(U.createElement("div")).style.width="5px",r=a.offsetWidth!==3),l.removeChild(h),r):void 0}})();var Po=/^margin/,si=new RegExp("^("+ni+")(?!px)[a-z%]+$","i"),Pt,Dt,Uu=/^(top|right|bottom|left)$/;n.getComputedStyle?(Pt=function(r){return r.ownerDocument.defaultView.opener?r.ownerDocument.defaultView.getComputedStyle(r,null):n.getComputedStyle(r,null)},Dt=function(r,a,l){var h,p,v,y,C=r.style;return l=l||Pt(r),y=l?l.getPropertyValue(a)||l[a]:void 0,l&&(y!==""||o.contains(r.ownerDocument,r)||(y=o.style(r,a)),si.test(y)&&Po.test(a)&&(h=C.width,p=C.minWidth,v=C.maxWidth,C.minWidth=C.maxWidth=C.width=y,y=l.width,C.width=h,C.minWidth=p,C.maxWidth=v)),y===void 0?y:y+""}):U.documentElement.currentStyle&&(Pt=function(r){return r.currentStyle},Dt=function(r,a,l){var h,p,v,y,C=r.style;return l=l||Pt(r),y=l?l[a]:void 0,y==null&&C&&C[a]&&(y=C[a]),si.test(y)&&!Uu.test(a)&&(h=C.left,p=r.runtimeStyle,v=p&&p.left,v&&(p.left=r.currentStyle.left),C.left=a==="fontSize"?"1em":y,y=C.pixelLeft+"px",C.left=h,v&&(p.left=v)),y===void 0?y:y+""||"auto"});function Do(r,a){return{get:function(){var l=r();if(l!=null)return l?void delete this.get:(this.get=a).apply(this,arguments)}}}(function(){var r,a,l,h,p,v,y;if(r=U.createElement("div"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",l=r.getElementsByTagName("a")[0],a=l&&l.style){let S=function(){var x,I,M,k;I=U.getElementsByTagName("body")[0],I&&I.style&&(x=U.createElement("div"),M=U.createElement("div"),M.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",I.appendChild(M).appendChild(x),x.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",h=p=!1,y=!0,n.getComputedStyle&&(h=(n.getComputedStyle(x,null)||{}).top!=="1%",p=(n.getComputedStyle(x,null)||{width:"4px"}).width==="4px",k=x.appendChild(U.createElement("div")),k.style.cssText=x.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",k.style.marginRight=k.style.width="0",x.style.width="1px",y=!parseFloat((n.getComputedStyle(k,null)||{}).marginRight),x.removeChild(k)),x.innerHTML="<table><tr><td></td><td>t</td></tr></table>",k=x.getElementsByTagName("td"),k[0].style.cssText="margin:0;border:0;padding:0;display:none",v=k[0].offsetHeight===0,v&&(k[0].style.display="",k[1].style.display="none",v=k[0].offsetHeight===0),I.removeChild(M))};var C=S;a.cssText="float:left;opacity:.5",g.opacity=a.opacity==="0.5",g.cssFloat=!!a.cssFloat,r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle=r.style.backgroundClip==="content-box",g.boxSizing=a.boxSizing===""||a.MozBoxSizing===""||a.WebkitBoxSizing==="",o.extend(g,{reliableHiddenOffsets:function(){return v==null&&S(),v},boxSizingReliable:function(){return p==null&&S(),p},pixelPosition:function(){return h==null&&S(),h},reliableMarginRight:function(){return y==null&&S(),y}})}})(),o.swap=function(r,a,l,h){var p,v,y={};for(v in a)y[v]=r.style[v],r.style[v]=a[v];p=l.apply(r,h||[]);for(v in a)r.style[v]=y[v];return p};var sr=/alpha\([^)]*\)/i,Hu=/opacity\s*=\s*([^)]*)/,qu=/^(none|table(?!-c[ea]).+)/,Vu=new RegExp("^("+ni+")(.*)$","i"),Wu=new RegExp("^([+-])=("+ni+")","i"),$u={position:"absolute",visibility:"hidden",display:"block"},ko={letterSpacing:"0",fontWeight:"400"},Mo=["Webkit","O","Moz","ms"];function Fo(r,a){if(a in r)return a;for(var l=a.charAt(0).toUpperCase()+a.slice(1),h=a,p=Mo.length;p--;)if(a=Mo[p]+l,a in r)return a;return h}function Lo(r,a){for(var l,h,p,v=[],y=0,C=r.length;C>y;y++)h=r[y],h.style&&(v[y]=o._data(h,"olddisplay"),l=h.style.display,a?(v[y]||l!=="none"||(h.style.display=""),h.style.display===""&&_n(h)&&(v[y]=o._data(h,"olddisplay",ri(h.nodeName)))):(p=_n(h),(l&&l!=="none"||!p)&&o._data(h,"olddisplay",p?l:o.css(h,"display"))));for(y=0;C>y;y++)h=r[y],h.style&&(a&&h.style.display!=="none"&&h.style.display!==""||(h.style.display=a?v[y]||"":"none"));return r}function jo(r,a,l){var h=Vu.exec(a);return h?Math.max(0,h[1]-(l||0))+(h[2]||"px"):a}function Bo(r,a,l,h,p){for(var v=l===(h?"border":"content")?4:a==="width"?1:0,y=0;4>v;v+=2)l==="margin"&&(y+=o.css(r,l+Nt[v],!0,p)),h?(l==="content"&&(y-=o.css(r,"padding"+Nt[v],!0,p)),l!=="margin"&&(y-=o.css(r,"border"+Nt[v]+"Width",!0,p))):(y+=o.css(r,"padding"+Nt[v],!0,p),l!=="padding"&&(y+=o.css(r,"border"+Nt[v]+"Width",!0,p)));return y}function Uo(r,a,l){var h=!0,p=a==="width"?r.offsetWidth:r.offsetHeight,v=Pt(r),y=g.boxSizing&&o.css(r,"boxSizing",!1,v)==="border-box";if(0>=p||p==null){if(p=Dt(r,a,v),(0>p||p==null)&&(p=r.style[a]),si.test(p))return p;h=y&&(g.boxSizingReliable()||p===r.style[a]),p=parseFloat(p)||0}return p+Bo(r,a,l||(y?"border":"content"),h,v)+"px"}o.extend({cssHooks:{opacity:{get:function(r,a){if(a){var l=Dt(r,"opacity");return l===""?"1":l}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:g.cssFloat?"cssFloat":"styleFloat"},style:function(r,a,l,h){if(r&&r.nodeType!==3&&r.nodeType!==8&&r.style){var p,v,y,C=o.camelCase(a),S=r.style;if(a=o.cssProps[C]||(o.cssProps[C]=Fo(S,C)),y=o.cssHooks[a]||o.cssHooks[C],l===void 0)return y&&"get"in y&&(p=y.get(r,!1,h))!==void 0?p:S[a];if(v=typeof l,v==="string"&&(p=Wu.exec(l))&&(l=(p[1]+1)*p[2]+parseFloat(o.css(r,a)),v="number"),l!=null&&l===l&&(v!=="number"||o.cssNumber[C]||(l+="px"),g.clearCloneStyle||l!==""||a.indexOf("background")!==0||(S[a]="inherit"),!(y&&"set"in y&&(l=y.set(r,l,h))===void 0)))try{S[a]=l}catch{}}},css:function(r,a,l,h){var p,v,y,C=o.camelCase(a);return a=o.cssProps[C]||(o.cssProps[C]=Fo(r.style,C)),y=o.cssHooks[a]||o.cssHooks[C],y&&"get"in y&&(v=y.get(r,!0,l)),v===void 0&&(v=Dt(r,a,h)),v==="normal"&&a in ko&&(v=ko[a]),l===""||l?(p=parseFloat(v),l===!0||o.isNumeric(p)?p||0:v):v}}),o.each(["height","width"],function(r,a){o.cssHooks[a]={get:function(l,h,p){return h?qu.test(o.css(l,"display"))&&l.offsetWidth===0?o.swap(l,$u,function(){return Uo(l,a,p)}):Uo(l,a,p):void 0},set:function(l,h,p){var v=p&&Pt(l);return jo(l,h,p?Bo(l,a,p,g.boxSizing&&o.css(l,"boxSizing",!1,v)==="border-box",v):0)}}}),g.opacity||(o.cssHooks.opacity={get:function(r,a){return Hu.test((a&&r.currentStyle?r.currentStyle.filter:r.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":a?"1":""},set:function(r,a){var l=r.style,h=r.currentStyle,p=o.isNumeric(a)?"alpha(opacity="+100*a+")":"",v=h&&h.filter||l.filter||"";l.zoom=1,(a>=1||a==="")&&o.trim(v.replace(sr,""))===""&&l.removeAttribute&&(l.removeAttribute("filter"),a===""||h&&!h.filter)||(l.filter=sr.test(v)?v.replace(sr,p):v+" "+p)}}),o.cssHooks.marginRight=Do(g.reliableMarginRight,function(r,a){return a?o.swap(r,{display:"inline-block"},Dt,[r,"marginRight"]):void 0}),o.each({margin:"",padding:"",border:"Width"},function(r,a){o.cssHooks[r+a]={expand:function(l){for(var h=0,p={},v=typeof l=="string"?l.split(" "):[l];4>h;h++)p[r+Nt[h]+a]=v[h]||v[h-2]||v[0];return p}},Po.test(r)||(o.cssHooks[r+a].set=jo)}),o.fn.extend({css:function(r,a){return Rt(this,function(l,h,p){var v,y,C={},S=0;if(o.isArray(h)){for(v=Pt(l),y=h.length;y>S;S++)C[h[S]]=o.css(l,h[S],!1,v);return C}return p!==void 0?o.style(l,h,p):o.css(l,h)},r,a,arguments.length>1)},show:function(){return Lo(this,!0)},hide:function(){return Lo(this)},toggle:function(r){return typeof r=="boolean"?r?this.show():this.hide():this.each(function(){_n(this)?o(this).show():o(this).hide()})}});function Pe(r,a,l,h,p){return new Pe.prototype.init(r,a,l,h,p)}o.Tween=Pe,Pe.prototype={constructor:Pe,init:function(r,a,l,h,p,v){this.elem=r,this.prop=l,this.easing=p||"swing",this.options=a,this.start=this.now=this.cur(),this.end=h,this.unit=v||(o.cssNumber[l]?"":"px")},cur:function(){var r=Pe.propHooks[this.prop];return r&&r.get?r.get(this):Pe.propHooks._default.get(this)},run:function(r){var a,l=Pe.propHooks[this.prop];return this.pos=a=this.options.duration?o.easing[this.easing](r,this.options.duration*r,0,1,this.options.duration):r,this.now=(this.end-this.start)*a+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),l&&l.set?l.set(this):Pe.propHooks._default.set(this),this}},Pe.prototype.init.prototype=Pe.prototype,Pe.propHooks={_default:{get:function(r){var a;return r.elem[r.prop]==null||r.elem.style&&r.elem.style[r.prop]!=null?(a=o.css(r.elem,r.prop,""),a&&a!=="auto"?a:0):r.elem[r.prop]},set:function(r){o.fx.step[r.prop]?o.fx.step[r.prop](r):r.elem.style&&(r.elem.style[o.cssProps[r.prop]]!=null||o.cssHooks[r.prop])?o.style(r.elem,r.prop,r.now+r.unit):r.elem[r.prop]=r.now}}},Pe.propHooks.scrollTop=Pe.propHooks.scrollLeft={set:function(r){r.elem.nodeType&&r.elem.parentNode&&(r.elem[r.prop]=r.now)}},o.easing={linear:function(r){return r},swing:function(r){return .5-Math.cos(r*Math.PI)/2}},o.fx=Pe.prototype.init,o.fx.step={};var Xt,oi,zu=/^(?:toggle|show|hide)$/,Ho=new RegExp("^(?:([+-])=|)("+ni+")([a-z%]*)$","i"),Gu=/queueHooks$/,ai=[Yu],yn={"*":[function(r,a){var l=this.createTween(r,a),h=l.cur(),p=Ho.exec(a),v=p&&p[3]||(o.cssNumber[r]?"":"px"),y=(o.cssNumber[r]||v!=="px"&&+h)&&Ho.exec(o.css(l.elem,r)),C=1,S=20;if(y&&y[3]!==v){v=v||y[3],p=p||[],y=+h||1;do C=C||".5",y/=C,o.style(l.elem,r,y+v);while(C!==(C=l.cur()/h)&&C!==1&&--S)}return p&&(y=l.start=+y||+h||0,l.unit=v,l.end=p[1]?y+(p[1]+1)*p[2]:+p[2]),l}]};function qo(){return setTimeout(function(){Xt=void 0}),Xt=o.now()}function li(r,a){var l,h={height:r},p=0;for(a=a?1:0;4>p;p+=2-a)l=Nt[p],h["margin"+l]=h["padding"+l]=r;return a&&(h.opacity=h.width=r),h}function Vo(r,a,l){for(var h,p=(yn[a]||[]).concat(yn["*"]),v=0,y=p.length;y>v;v++)if(h=p[v].call(l,a,r))return h}function Yu(r,a,l){var h,p,v,y,C,S,x,I,M=this,k={},F=r.style,Y=r.nodeType&&_n(r),G=o._data(r,"fxshow");l.queue||(C=o._queueHooks(r,"fx"),C.unqueued==null&&(C.unqueued=0,S=C.empty.fire,C.empty.fire=function(){C.unqueued||S()}),C.unqueued++,M.always(function(){M.always(function(){C.unqueued--,o.queue(r,"fx").length||C.empty.fire()})})),r.nodeType===1&&("height"in a||"width"in a)&&(l.overflow=[F.overflow,F.overflowX,F.overflowY],x=o.css(r,"display"),I=x==="none"?o._data(r,"olddisplay")||ri(r.nodeName):x,I==="inline"&&o.css(r,"float")==="none"&&(g.inlineBlockNeedsLayout&&ri(r.nodeName)!=="inline"?F.zoom=1:F.display="inline-block")),l.overflow&&(F.overflow="hidden",g.shrinkWrapBlocks()||M.always(function(){F.overflow=l.overflow[0],F.overflowX=l.overflow[1],F.overflowY=l.overflow[2]}));for(h in a)if(p=a[h],zu.exec(p)){if(delete a[h],v=v||p==="toggle",p===(Y?"hide":"show")){if(p!=="show"||!G||G[h]===void 0)continue;Y=!0}k[h]=G&&G[h]||o.style(r,h)}else x=void 0;if(o.isEmptyObject(k))(x==="none"?ri(r.nodeName):x)==="inline"&&(F.display=x);else{G?"hidden"in G&&(Y=G.hidden):G=o._data(r,"fxshow",{}),v&&(G.hidden=!Y),Y?o(r).show():M.done(function(){o(r).hide()}),M.done(function(){var X;o._removeData(r,"fxshow");for(X in k)o.style(r,X,k[X])});for(h in k)y=Vo(Y?G[h]:0,h,M),h in G||(G[h]=y.start,Y&&(y.end=y.start,y.start=h==="width"||h==="height"?1:0))}}function Qu(r,a){var l,h,p,v,y;for(l in r)if(h=o.camelCase(l),p=a[h],v=r[l],o.isArray(v)&&(p=v[1],v=r[l]=v[0]),l!==h&&(r[h]=v,delete r[l]),y=o.cssHooks[h],y&&"expand"in y){v=y.expand(v),delete r[h];for(l in v)l in r||(r[l]=v[l],a[l]=p)}else a[h]=p}function Wo(r,a,l){var h,p,v=0,y=ai.length,C=o.Deferred().always(function(){delete S.elem}),S=function(){if(p)return!1;for(var M=Xt||qo(),k=Math.max(0,x.startTime+x.duration-M),F=k/x.duration||0,Y=1-F,G=0,X=x.tweens.length;X>G;G++)x.tweens[G].run(Y);return C.notifyWith(r,[x,Y,k]),1>Y&&X?k:(C.resolveWith(r,[x]),!1)},x=C.promise({elem:r,props:o.extend({},a),opts:o.extend(!0,{specialEasing:{}},l),originalProperties:a,originalOptions:l,startTime:Xt||qo(),duration:l.duration,tweens:[],createTween:function(M,k){var F=o.Tween(r,x.opts,M,k,x.opts.specialEasing[M]||x.opts.easing);return x.tweens.push(F),F},stop:function(M){var k=0,F=M?x.tweens.length:0;if(p)return this;for(p=!0;F>k;k++)x.tweens[k].run(1);return M?C.resolveWith(r,[x,M]):C.rejectWith(r,[x,M]),this}}),I=x.props;for(Qu(I,x.opts.specialEasing);y>v;v++)if(h=ai[v].call(x,r,I,x.opts))return h;return o.map(I,Vo,x),o.isFunction(x.opts.start)&&x.opts.start.call(r,x),o.fx.timer(o.extend(S,{elem:r,anim:x,queue:x.opts.queue})),x.progress(x.opts.progress).done(x.opts.done,x.opts.complete).fail(x.opts.fail).always(x.opts.always)}o.Animation=o.extend(Wo,{tweener:function(r,a){o.isFunction(r)?(a=r,r=["*"]):r=r.split(" ");for(var l,h=0,p=r.length;p>h;h++)l=r[h],yn[l]=yn[l]||[],yn[l].unshift(a)},prefilter:function(r,a){a?ai.unshift(r):ai.push(r)}}),o.speed=function(r,a,l){var h=r&&typeof r=="object"?o.extend({},r):{complete:l||!l&&a||o.isFunction(r)&&r,duration:r,easing:l&&a||a&&!o.isFunction(a)&&a};return h.duration=o.fx.off?0:typeof h.duration=="number"?h.duration:h.duration in o.fx.speeds?o.fx.speeds[h.duration]:o.fx.speeds._default,(h.queue==null||h.queue===!0)&&(h.queue="fx"),h.old=h.complete,h.complete=function(){o.isFunction(h.old)&&h.old.call(this),h.queue&&o.dequeue(this,h.queue)},h},o.fn.extend({fadeTo:function(r,a,l,h){return this.filter(_n).css("opacity",0).show().end().animate({opacity:a},r,l,h)},animate:function(r,a,l,h){var p=o.isEmptyObject(r),v=o.speed(a,l,h),y=function(){var C=Wo(this,o.extend({},r),v);(p||o._data(this,"finish"))&&C.stop(!0)};return y.finish=y,p||v.queue===!1?this.each(y):this.queue(v.queue,y)},stop:function(r,a,l){var h=function(p){var v=p.stop;delete p.stop,v(l)};return typeof r!="string"&&(l=a,a=r,r=void 0),a&&r!==!1&&this.queue(r||"fx",[]),this.each(function(){var p=!0,v=r!=null&&r+"queueHooks",y=o.timers,C=o._data(this);if(v)C[v]&&C[v].stop&&h(C[v]);else for(v in C)C[v]&&C[v].stop&&Gu.test(v)&&h(C[v]);for(v=y.length;v--;)y[v].elem!==this||r!=null&&y[v].queue!==r||(y[v].anim.stop(l),p=!1,y.splice(v,1));(p||!l)&&o.dequeue(this,r)})},finish:function(r){return r!==!1&&(r=r||"fx"),this.each(function(){var a,l=o._data(this),h=l[r+"queue"],p=l[r+"queueHooks"],v=o.timers,y=h?h.length:0;for(l.finish=!0,o.queue(this,r,[]),p&&p.stop&&p.stop.call(this,!0),a=v.length;a--;)v[a].elem===this&&v[a].queue===r&&(v[a].anim.stop(!0),v.splice(a,1));for(a=0;y>a;a++)h[a]&&h[a].finish&&h[a].finish.call(this);delete l.finish})}}),o.each(["toggle","show","hide"],function(r,a){var l=o.fn[a];o.fn[a]=function(h,p,v){return h==null||typeof h=="boolean"?l.apply(this,arguments):this.animate(li(a,!0),h,p,v)}}),o.each({slideDown:li("show"),slideUp:li("hide"),slideToggle:li("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(r,a){o.fn[r]=function(l,h,p){return this.animate(a,l,h,p)}}),o.timers=[],o.fx.tick=function(){var r,a=o.timers,l=0;for(Xt=o.now();l<a.length;l++)r=a[l],r()||a[l]!==r||a.splice(l--,1);a.length||o.fx.stop(),Xt=void 0},o.fx.timer=function(r){o.timers.push(r),r()?o.fx.start():o.timers.pop()},o.fx.interval=13,o.fx.start=function(){oi||(oi=setInterval(o.fx.tick,o.fx.interval))},o.fx.stop=function(){clearInterval(oi),oi=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(r,a){return r=o.fx&&o.fx.speeds[r]||r,a=a||"fx",this.queue(a,function(l,h){var p=setTimeout(l,r);h.stop=function(){clearTimeout(p)}})},function(){var r,a,l,h,p;a=U.createElement("div"),a.setAttribute("className","t"),a.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",h=a.getElementsByTagName("a")[0],l=U.createElement("select"),p=l.appendChild(U.createElement("option")),r=a.getElementsByTagName("input")[0],h.style.cssText="top:1px",g.getSetAttribute=a.className!=="t",g.style=/top/.test(h.getAttribute("style")),g.hrefNormalized=h.getAttribute("href")==="/a",g.checkOn=!!r.value,g.optSelected=p.selected,g.enctype=!!U.createElement("form").enctype,l.disabled=!0,g.optDisabled=!p.disabled,r=U.createElement("input"),r.setAttribute("value",""),g.input=r.getAttribute("value")==="",r.value="t",r.setAttribute("type","radio"),g.radioValue=r.value==="t"}();var Ku=/\r/g;o.fn.extend({val:function(r){var a,l,h,p=this[0];{if(arguments.length)return h=o.isFunction(r),this.each(function(v){var y;this.nodeType===1&&(y=h?r.call(this,v,o(this).val()):r,y==null?y="":typeof y=="number"?y+="":o.isArray(y)&&(y=o.map(y,function(C){return C==null?"":C+""})),a=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],a&&"set"in a&&a.set(this,y,"value")!==void 0||(this.value=y))});if(p)return a=o.valHooks[p.type]||o.valHooks[p.nodeName.toLowerCase()],a&&"get"in a&&(l=a.get(p,"value"))!==void 0?l:(l=p.value,typeof l=="string"?l.replace(Ku,""):l??"")}}}),o.extend({valHooks:{option:{get:function(r){var a=o.find.attr(r,"value");return a??o.trim(o.text(r))}},select:{get:function(r){for(var a,l,h=r.options,p=r.selectedIndex,v=r.type==="select-one"||0>p,y=v?null:[],C=v?p+1:h.length,S=0>p?C:v?p:0;C>S;S++)if(l=h[S],!(!l.selected&&S!==p||(g.optDisabled?l.disabled:l.getAttribute("disabled")!==null)||l.parentNode.disabled&&o.nodeName(l.parentNode,"optgroup"))){if(a=o(l).val(),v)return a;y.push(a)}return y},set:function(r,a){for(var l,h,p=r.options,v=o.makeArray(a),y=p.length;y--;)if(h=p[y],o.inArray(o.valHooks.option.get(h),v)>=0)try{h.selected=l=!0}catch{h.scrollHeight}else h.selected=!1;return l||(r.selectedIndex=-1),p}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(r,a){return o.isArray(a)?r.checked=o.inArray(o(r).val(),a)>=0:void 0}},g.checkOn||(o.valHooks[this].get=function(r){return r.getAttribute("value")===null?"on":r.value})});var Jt,$o,ft=o.expr.attrHandle,or=/^(?:checked|selected)$/i,kt=g.getSetAttribute,ci=g.input;o.fn.extend({attr:function(r,a){return Rt(this,o.attr,r,a,arguments.length>1)},removeAttr:function(r){return this.each(function(){o.removeAttr(this,r)})}}),o.extend({attr:function(r,a,l){var h,p,v=r.nodeType;if(r&&v!==3&&v!==8&&v!==2)return typeof r.getAttribute===$e?o.prop(r,a,l):(v===1&&o.isXMLDoc(r)||(a=a.toLowerCase(),h=o.attrHooks[a]||(o.expr.match.bool.test(a)?$o:Jt)),l===void 0?h&&"get"in h&&(p=h.get(r,a))!==null?p:(p=o.find.attr(r,a),p??void 0):l!==null?h&&"set"in h&&(p=h.set(r,l,a))!==void 0?p:(r.setAttribute(a,l+""),l):void o.removeAttr(r,a))},removeAttr:function(r,a){var l,h,p=0,v=a&&a.match(Be);if(v&&r.nodeType===1)for(;l=v[p++];)h=o.propFix[l]||l,o.expr.match.bool.test(l)?ci&&kt||!or.test(l)?r[h]=!1:r[o.camelCase("default-"+l)]=r[h]=!1:o.attr(r,l,""),r.removeAttribute(kt?l:h)},attrHooks:{type:{set:function(r,a){if(!g.radioValue&&a==="radio"&&o.nodeName(r,"input")){var l=r.value;return r.setAttribute("type",a),l&&(r.value=l),a}}}}}),$o={set:function(r,a,l){return a===!1?o.removeAttr(r,l):ci&&kt||!or.test(l)?r.setAttribute(!kt&&o.propFix[l]||l,l):r[o.camelCase("default-"+l)]=r[l]=!0,l}},o.each(o.expr.match.bool.source.match(/\w+/g),function(r,a){var l=ft[a]||o.find.attr;ft[a]=ci&&kt||!or.test(a)?function(h,p,v){var y,C;return v||(C=ft[p],ft[p]=y,y=l(h,p,v)!=null?p.toLowerCase():null,ft[p]=C),y}:function(h,p,v){return v?void 0:h[o.camelCase("default-"+p)]?p.toLowerCase():null}}),ci&&kt||(o.attrHooks.value={set:function(r,a,l){return o.nodeName(r,"input")?void(r.defaultValue=a):Jt&&Jt.set(r,a,l)}}),kt||(Jt={set:function(r,a,l){var h=r.getAttributeNode(l);return h||r.setAttributeNode(h=r.ownerDocument.createAttribute(l)),h.value=a+="",l==="value"||a===r.getAttribute(l)?a:void 0}},ft.id=ft.name=ft.coords=function(r,a,l){var h;return l?void 0:(h=r.getAttributeNode(a))&&h.value!==""?h.value:null},o.valHooks.button={get:function(r,a){var l=r.getAttributeNode(a);return l&&l.specified?l.value:void 0},set:Jt.set},o.attrHooks.contenteditable={set:function(r,a,l){Jt.set(r,a===""?!1:a,l)}},o.each(["width","height"],function(r,a){o.attrHooks[a]={set:function(l,h){return h===""?(l.setAttribute(a,"auto"),h):void 0}}})),g.style||(o.attrHooks.style={get:function(r){return r.style.cssText||void 0},set:function(r,a){return r.style.cssText=a+""}});var Xu=/^(?:input|select|textarea|button|object)$/i,Ju=/^(?:a|area)$/i;o.fn.extend({prop:function(r,a){return Rt(this,o.prop,r,a,arguments.length>1)},removeProp:function(r){return r=o.propFix[r]||r,this.each(function(){try{this[r]=void 0,delete this[r]}catch{}})}}),o.extend({propFix:{for:"htmlFor",class:"className"},prop:function(r,a,l){var h,p,v,y=r.nodeType;if(r&&y!==3&&y!==8&&y!==2)return v=y!==1||!o.isXMLDoc(r),v&&(a=o.propFix[a]||a,p=o.propHooks[a]),l!==void 0?p&&"set"in p&&(h=p.set(r,l,a))!==void 0?h:r[a]=l:p&&"get"in p&&(h=p.get(r,a))!==null?h:r[a]},propHooks:{tabIndex:{get:function(r){var a=o.find.attr(r,"tabindex");return a?parseInt(a,10):Xu.test(r.nodeName)||Ju.test(r.nodeName)&&r.href?0:-1}}}}),g.hrefNormalized||o.each(["href","src"],function(r,a){o.propHooks[a]={get:function(l){return l.getAttribute(a,4)}}}),g.optSelected||(o.propHooks.selected={get:function(r){var a=r.parentNode;return a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this}),g.enctype||(o.propFix.enctype="encoding");var ar=/[\t\r\n\f]/g;o.fn.extend({addClass:function(r){var a,l,h,p,v,y,C=0,S=this.length,x=typeof r=="string"&&r;if(o.isFunction(r))return this.each(function(I){o(this).addClass(r.call(this,I,this.className))});if(x){for(a=(r||"").match(Be)||[];S>C;C++)if(l=this[C],h=l.nodeType===1&&(l.className?(" "+l.className+" ").replace(ar," "):" ")){for(v=0;p=a[v++];)h.indexOf(" "+p+" ")<0&&(h+=p+" ");y=o.trim(h),l.className!==y&&(l.className=y)}}return this},removeClass:function(r){var a,l,h,p,v,y,C=0,S=this.length,x=arguments.length===0||typeof r=="string"&&r;if(o.isFunction(r))return this.each(function(I){o(this).removeClass(r.call(this,I,this.className))});if(x){for(a=(r||"").match(Be)||[];S>C;C++)if(l=this[C],h=l.nodeType===1&&(l.className?(" "+l.className+" ").replace(ar," "):"")){for(v=0;p=a[v++];)for(;h.indexOf(" "+p+" ")>=0;)h=h.replace(" "+p+" "," ");y=r?o.trim(h):"",l.className!==y&&(l.className=y)}}return this},toggleClass:function(r,a){var l=typeof r;return typeof a=="boolean"&&l==="string"?a?this.addClass(r):this.removeClass(r):this.each(o.isFunction(r)?function(h){o(this).toggleClass(r.call(this,h,this.className,a),a)}:function(){if(l==="string")for(var h,p=0,v=o(this),y=r.match(Be)||[];h=y[p++];)v.hasClass(h)?v.removeClass(h):v.addClass(h);else(l===$e||l==="boolean")&&(this.className&&o._data(this,"__className__",this.className),this.className=this.className||r===!1?"":o._data(this,"__className__")||"")})},hasClass:function(r){for(var a=" "+r+" ",l=0,h=this.length;h>l;l++)if(this[l].nodeType===1&&(" "+this[l].className+" ").replace(ar," ").indexOf(a)>=0)return!0;return!1}}),o.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(r,a){o.fn[a]=function(l,h){return arguments.length>0?this.on(a,null,l,h):this.trigger(a)}}),o.fn.extend({hover:function(r,a){return this.mouseenter(r).mouseleave(a||r)},bind:function(r,a,l){return this.on(r,null,a,l)},unbind:function(r,a){return this.off(r,null,a)},delegate:function(r,a,l,h){return this.on(a,r,l,h)},undelegate:function(r,a,l){return arguments.length===1?this.off(r,"**"):this.off(a,r||"**",l)}});var lr=o.now(),cr=/\?/,Zu=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;o.parseJSON=function(r){if(n.JSON&&n.JSON.parse)return n.JSON.parse(r+"");var a,l=null,h=o.trim(r+"");return h&&!o.trim(h.replace(Zu,function(p,v,y,C){return a&&v&&(l=0),l===0?p:(a=y||v,l+=!C-!y,"")}))?Function("return "+h)():o.error("Invalid JSON: "+r)},o.parseXML=function(r){var a,l;if(!r||typeof r!="string")return null;try{n.DOMParser?(l=new DOMParser,a=l.parseFromString(r,"text/xml")):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(r))}catch{a=void 0}return a&&a.documentElement&&!a.getElementsByTagName("parsererror").length||o.error("Invalid XML: "+r),a};var Mt,pt,eh=/#.*$/,zo=/([?&])_=[^&]*/,th=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,nh=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ih=/^(?:GET|HEAD)$/,rh=/^\/\//,Go=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Yo={},ur={},Qo="*/".concat("*");try{pt=location.href}catch{pt=U.createElement("a"),pt.href="",pt=pt.href}Mt=Go.exec(pt.toLowerCase())||[];function Ko(r){return function(a,l){typeof a!="string"&&(l=a,a="*");var h,p=0,v=a.toLowerCase().match(Be)||[];if(o.isFunction(l))for(;h=v[p++];)h.charAt(0)==="+"?(h=h.slice(1)||"*",(r[h]=r[h]||[]).unshift(l)):(r[h]=r[h]||[]).push(l)}}function Xo(r,a,l,h){var p={},v=r===ur;function y(C){var S;return p[C]=!0,o.each(r[C]||[],function(x,I){var M=I(a,l,h);return typeof M!="string"||v||p[M]?v?!(S=M):void 0:(a.dataTypes.unshift(M),y(M),!1)}),S}return y(a.dataTypes[0])||!p["*"]&&y("*")}function hr(r,a){var l,h,p=o.ajaxSettings.flatOptions||{};for(h in a)a[h]!==void 0&&((p[h]?r:l||(l={}))[h]=a[h]);return l&&o.extend(!0,r,l),r}function sh(r,a,l){for(var h,p,v,y,C=r.contents,S=r.dataTypes;S[0]==="*";)S.shift(),p===void 0&&(p=r.mimeType||a.getResponseHeader("Content-Type"));if(p){for(y in C)if(C[y]&&C[y].test(p)){S.unshift(y);break}}if(S[0]in l)v=S[0];else{for(y in l){if(!S[0]||r.converters[y+" "+S[0]]){v=y;break}h||(h=y)}v=v||h}return v?(v!==S[0]&&S.unshift(v),l[v]):void 0}function oh(r,a,l,h){var p,v,y,C,S,x={},I=r.dataTypes.slice();if(I[1])for(y in r.converters)x[y.toLowerCase()]=r.converters[y];for(v=I.shift();v;)if(r.responseFields[v]&&(l[r.responseFields[v]]=a),!S&&h&&r.dataFilter&&(a=r.dataFilter(a,r.dataType)),S=v,v=I.shift()){if(v==="*")v=S;else if(S!=="*"&&S!==v){if(y=x[S+" "+v]||x["* "+v],!y){for(p in x)if(C=p.split(" "),C[1]===v&&(y=x[S+" "+C[0]]||x["* "+C[0]])){y===!0?y=x[p]:x[p]!==!0&&(v=C[0],I.unshift(C[1]));break}}if(y!==!0)if(y&&r.throws)a=y(a);else try{a=y(a)}catch(M){return{state:"parsererror",error:y?M:"No conversion from "+S+" to "+v}}}}return{state:"success",data:a}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pt,type:"GET",isLocal:nh.test(Mt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Qo,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":o.parseJSON,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(r,a){return a?hr(hr(r,o.ajaxSettings),a):hr(o.ajaxSettings,r)},ajaxPrefilter:Ko(Yo),ajaxTransport:Ko(ur),ajax:function(r,a){typeof r=="object"&&(a=r,r=void 0),a=a||{};var l,h,p,v,y,C,S,x,I=o.ajaxSetup({},a),M=I.context||I,k=I.context&&(M.nodeType||M.jquery)?o(M):o.event,F=o.Deferred(),Y=o.Callbacks("once memory"),G=I.statusCode||{},X={},Ue={},Se=0,mt="canceled",q={readyState:0,getResponseHeader:function(J){var _e;if(Se===2){if(!x)for(x={};_e=th.exec(v);)x[_e[1].toLowerCase()]=_e[2];_e=x[J.toLowerCase()]}return _e??null},getAllResponseHeaders:function(){return Se===2?v:null},setRequestHeader:function(J,_e){var gt=J.toLowerCase();return Se||(J=Ue[gt]=Ue[gt]||J,X[J]=_e),this},overrideMimeType:function(J){return Se||(I.mimeType=J),this},statusCode:function(J){var _e;if(J)if(2>Se)for(_e in J)G[_e]=[G[_e],J[_e]];else q.always(J[q.status]);return this},abort:function(J){var _e=J||mt;return S&&S.abort(_e),xe(0,_e),this}};if(F.promise(q).complete=Y.add,q.success=q.done,q.error=q.fail,I.url=((r||I.url||pt)+"").replace(eh,"").replace(rh,Mt[1]+"//"),I.type=a.method||a.type||I.method||I.type,I.dataTypes=o.trim(I.dataType||"*").toLowerCase().match(Be)||[""],I.crossDomain==null&&(l=Go.exec(I.url.toLowerCase()),I.crossDomain=!(!l||l[1]===Mt[1]&&l[2]===Mt[2]&&(l[3]||(l[1]==="http:"?"80":"443"))===(Mt[3]||(Mt[1]==="http:"?"80":"443")))),I.data&&I.processData&&typeof I.data!="string"&&(I.data=o.param(I.data,I.traditional)),Xo(Yo,I,a,q),Se===2)return q;C=o.event&&I.global,C&&o.active++===0&&o.event.trigger("ajaxStart"),I.type=I.type.toUpperCase(),I.hasContent=!ih.test(I.type),p=I.url,I.hasContent||(I.data&&(p=I.url+=(cr.test(p)?"&":"?")+I.data,delete I.data),I.cache===!1&&(I.url=zo.test(p)?p.replace(zo,"$1_="+lr++):p+(cr.test(p)?"&":"?")+"_="+lr++)),I.ifModified&&(o.lastModified[p]&&q.setRequestHeader("If-Modified-Since",o.lastModified[p]),o.etag[p]&&q.setRequestHeader("If-None-Match",o.etag[p])),(I.data&&I.hasContent&&I.contentType!==!1||a.contentType)&&q.setRequestHeader("Content-Type",I.contentType),q.setRequestHeader("Accept",I.dataTypes[0]&&I.accepts[I.dataTypes[0]]?I.accepts[I.dataTypes[0]]+(I.dataTypes[0]!=="*"?", "+Qo+"; q=0.01":""):I.accepts["*"]);for(h in I.headers)q.setRequestHeader(h,I.headers[h]);if(I.beforeSend&&(I.beforeSend.call(M,q,I)===!1||Se===2))return q.abort();mt="abort";for(h in{success:1,error:1,complete:1})q[h](I[h]);if(S=Xo(ur,I,a,q)){q.readyState=1,C&&k.trigger("ajaxSend",[q,I]),I.async&&I.timeout>0&&(y=setTimeout(function(){q.abort("timeout")},I.timeout));try{Se=1,S.send(X,xe)}catch(J){if(!(2>Se))throw J;xe(-1,J)}}else xe(-1,"No Transport");function xe(J,_e,gt,hi){var Xe,Ft,_t,vt,De,We=_e;Se!==2&&(Se=2,y&&clearTimeout(y),S=void 0,v=hi||"",q.readyState=J>0?4:0,Xe=J>=200&&300>J||J===304,gt&&(vt=sh(I,q,gt)),vt=oh(I,vt,q,Xe),Xe?(I.ifModified&&(De=q.getResponseHeader("Last-Modified"),De&&(o.lastModified[p]=De),De=q.getResponseHeader("etag"),De&&(o.etag[p]=De)),J===204||I.type==="HEAD"?We="nocontent":J===304?We="notmodified":(We=vt.state,Ft=vt.data,_t=vt.error,Xe=!_t)):(_t=We,(J||!We)&&(We="error",0>J&&(J=0))),q.status=J,q.statusText=(_e||We)+"",Xe?F.resolveWith(M,[Ft,We,q]):F.rejectWith(M,[q,We,_t]),q.statusCode(G),G=void 0,C&&k.trigger(Xe?"ajaxSuccess":"ajaxError",[q,I,Xe?Ft:_t]),Y.fireWith(M,[q,We]),C&&(k.trigger("ajaxComplete",[q,I]),--o.active||o.event.trigger("ajaxStop")))}return q},getJSON:function(r,a,l){return o.get(r,a,l,"json")},getScript:function(r,a){return o.get(r,void 0,a,"script")}}),o.each(["get","post"],function(r,a){o[a]=function(l,h,p,v){return o.isFunction(h)&&(v=v||p,p=h,h=void 0),o.ajax({url:l,type:a,dataType:v,data:h,success:p})}}),o._evalUrl=function(r){return o.ajax({url:r,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},o.fn.extend({wrapAll:function(r){if(o.isFunction(r))return this.each(function(l){o(this).wrapAll(r.call(this,l))});if(this[0]){var a=o(r,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var l=this;l.firstChild&&l.firstChild.nodeType===1;)l=l.firstChild;return l}).append(this)}return this},wrapInner:function(r){return this.each(o.isFunction(r)?function(a){o(this).wrapInner(r.call(this,a))}:function(){var a=o(this),l=a.contents();l.length?l.wrapAll(r):a.append(r)})},wrap:function(r){var a=o.isFunction(r);return this.each(function(l){o(this).wrapAll(a?r.call(this,l):r)})},unwrap:function(){return this.parent().each(function(){o.nodeName(this,"body")||o(this).replaceWith(this.childNodes)}).end()}}),o.expr.filters.hidden=function(r){return r.offsetWidth<=0&&r.offsetHeight<=0||!g.reliableHiddenOffsets()&&(r.style&&r.style.display||o.css(r,"display"))==="none"},o.expr.filters.visible=function(r){return!o.expr.filters.hidden(r)};var ah=/%20/g,lh=/\[\]$/,Jo=/\r?\n/g,ch=/^(?:submit|button|image|reset|file)$/i,uh=/^(?:input|select|textarea|keygen)/i;function dr(r,a,l,h){var p;if(o.isArray(a))o.each(a,function(v,y){l||lh.test(r)?h(r,y):dr(r+"["+(typeof y=="object"?v:"")+"]",y,l,h)});else if(l||o.type(a)!=="object")h(r,a);else for(p in a)dr(r+"["+p+"]",a[p],l,h)}o.param=function(r,a){var l,h=[],p=function(v,y){y=o.isFunction(y)?y():y??"",h[h.length]=encodeURIComponent(v)+"="+encodeURIComponent(y)};if(a===void 0&&(a=o.ajaxSettings&&o.ajaxSettings.traditional),o.isArray(r)||r.jquery&&!o.isPlainObject(r))o.each(r,function(){p(this.name,this.value)});else for(l in r)dr(l,r[l],a,p);return h.join("&").replace(ah,"+")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var r=o.prop(this,"elements");return r?o.makeArray(r):this}).filter(function(){var r=this.type;return this.name&&!o(this).is(":disabled")&&uh.test(this.nodeName)&&!ch.test(r)&&(this.checked||!er.test(r))}).map(function(r,a){var l=o(this).val();return l==null?null:o.isArray(l)?o.map(l,function(h){return{name:a.name,value:h.replace(Jo,`\r
`)}}):{name:a.name,value:l.replace(Jo,`\r
`)}}).get()}}),o.ajaxSettings.xhr=n.ActiveXObject!==void 0?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zo()||dh()}:Zo;var hh=0,ui={},En=o.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var r in ui)ui[r](void 0,!0)}),g.cors=!!En&&"withCredentials"in En,En=g.ajax=!!En,En&&o.ajaxTransport(function(r){if(!r.crossDomain||g.cors){var a;return{send:function(l,h){var p,v=r.xhr(),y=++hh;if(v.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(p in r.xhrFields)v[p]=r.xhrFields[p];r.mimeType&&v.overrideMimeType&&v.overrideMimeType(r.mimeType),r.crossDomain||l["X-Requested-With"]||(l["X-Requested-With"]="XMLHttpRequest");for(p in l)l[p]!==void 0&&v.setRequestHeader(p,l[p]+"");v.send(r.hasContent&&r.data||null),a=function(C,S){var x,I,M;if(a&&(S||v.readyState===4))if(delete ui[y],a=void 0,v.onreadystatechange=o.noop,S)v.readyState!==4&&v.abort();else{M={},x=v.status,typeof v.responseText=="string"&&(M.text=v.responseText);try{I=v.statusText}catch{I=""}x||!r.isLocal||r.crossDomain?x===1223&&(x=204):x=M.text?200:404}M&&h(x,I,M,v.getAllResponseHeaders())},r.async?v.readyState===4?setTimeout(a):v.onreadystatechange=ui[y]=a:a()},abort:function(){a&&a(void 0,!0)}}}});function Zo(){try{return new n.XMLHttpRequest}catch{}}function dh(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch{}}o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(r){return o.globalEval(r),r}}}),o.ajaxPrefilter("script",function(r){r.cache===void 0&&(r.cache=!1),r.crossDomain&&(r.type="GET",r.global=!1)}),o.ajaxTransport("script",function(r){if(r.crossDomain){var a,l=U.head||o("head")[0]||U.documentElement;return{send:function(h,p){a=U.createElement("script"),a.async=!0,r.scriptCharset&&(a.charset=r.scriptCharset),a.src=r.url,a.onload=a.onreadystatechange=function(v,y){(y||!a.readyState||/loaded|complete/.test(a.readyState))&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),a=null,y||p(200,"success"))},l.insertBefore(a,l.firstChild)},abort:function(){a&&a.onload(void 0,!0)}}}});var ea=[],fr=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var r=ea.pop()||o.expando+"_"+lr++;return this[r]=!0,r}}),o.ajaxPrefilter("json jsonp",function(r,a,l){var h,p,v,y=r.jsonp!==!1&&(fr.test(r.url)?"url":typeof r.data=="string"&&!(r.contentType||"").indexOf("application/x-www-form-urlencoded")&&fr.test(r.data)&&"data");return y||r.dataTypes[0]==="jsonp"?(h=r.jsonpCallback=o.isFunction(r.jsonpCallback)?r.jsonpCallback():r.jsonpCallback,y?r[y]=r[y].replace(fr,"$1"+h):r.jsonp!==!1&&(r.url+=(cr.test(r.url)?"&":"?")+r.jsonp+"="+h),r.converters["script json"]=function(){return v||o.error(h+" was not called"),v[0]},r.dataTypes[0]="json",p=n[h],n[h]=function(){v=arguments},l.always(function(){n[h]=p,r[h]&&(r.jsonpCallback=a.jsonpCallback,ea.push(h)),v&&o.isFunction(p)&&p(v[0]),v=p=void 0}),"script"):void 0}),o.parseHTML=function(r,a,l){if(!r||typeof r!="string")return null;typeof a=="boolean"&&(l=a,a=!1),a=a||U;var h=H.exec(r),p=!l&&[];return h?[a.createElement(h[1])]:(h=o.buildFragment([r],a,p),p&&p.length&&o(p).remove(),o.merge([],h.childNodes))};var ta=o.fn.load;o.fn.load=function(r,a,l){if(typeof r!="string"&&ta)return ta.apply(this,arguments);var h,p,v,y=this,C=r.indexOf(" ");return C>=0&&(h=o.trim(r.slice(C,r.length)),r=r.slice(0,C)),o.isFunction(a)?(l=a,a=void 0):a&&typeof a=="object"&&(v="POST"),y.length>0&&o.ajax({url:r,type:v,dataType:"html",data:a}).done(function(S){p=arguments,y.html(h?o("<div>").append(o.parseHTML(S)).find(h):S)}).complete(l&&function(S,x){y.each(l,p||[S.responseText,x,S])}),this},o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(r,a){o.fn[a]=function(l){return this.on(a,l)}}),o.expr.filters.animated=function(r){return o.grep(o.timers,function(a){return r===a.elem}).length};var na=n.document.documentElement;function ia(r){return o.isWindow(r)?r:r.nodeType===9?r.defaultView||r.parentWindow:!1}o.offset={setOffset:function(r,a,l){var h,p,v,y,C,S,x,I=o.css(r,"position"),M=o(r),k={};I==="static"&&(r.style.position="relative"),C=M.offset(),v=o.css(r,"top"),S=o.css(r,"left"),x=(I==="absolute"||I==="fixed")&&o.inArray("auto",[v,S])>-1,x?(h=M.position(),y=h.top,p=h.left):(y=parseFloat(v)||0,p=parseFloat(S)||0),o.isFunction(a)&&(a=a.call(r,l,C)),a.top!=null&&(k.top=a.top-C.top+y),a.left!=null&&(k.left=a.left-C.left+p),"using"in a?a.using.call(r,k):M.css(k)}},o.fn.extend({offset:function(r){if(arguments.length)return r===void 0?this:this.each(function(y){o.offset.setOffset(this,r,y)});var a,l,h={top:0,left:0},p=this[0],v=p&&p.ownerDocument;if(v)return a=v.documentElement,o.contains(a,p)?(typeof p.getBoundingClientRect!==$e&&(h=p.getBoundingClientRect()),l=ia(v),{top:h.top+(l.pageYOffset||a.scrollTop)-(a.clientTop||0),left:h.left+(l.pageXOffset||a.scrollLeft)-(a.clientLeft||0)}):h},position:function(){if(this[0]){var r,a,l={top:0,left:0},h=this[0];return o.css(h,"position")==="fixed"?a=h.getBoundingClientRect():(r=this.offsetParent(),a=this.offset(),o.nodeName(r[0],"html")||(l=r.offset()),l.top+=o.css(r[0],"borderTopWidth",!0),l.left+=o.css(r[0],"borderLeftWidth",!0)),{top:a.top-l.top-o.css(h,"marginTop",!0),left:a.left-l.left-o.css(h,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var r=this.offsetParent||na;r&&!o.nodeName(r,"html")&&o.css(r,"position")==="static";)r=r.offsetParent;return r||na})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(r,a){var l=/Y/.test(a);o.fn[r]=function(h){return Rt(this,function(p,v,y){var C=ia(p);return y===void 0?C?a in C?C[a]:C.document.documentElement[v]:p[v]:void(C?C.scrollTo(l?o(C).scrollLeft():y,l?y:o(C).scrollTop()):p[v]=y)},r,h,arguments.length,null)}}),o.each(["top","left"],function(r,a){o.cssHooks[a]=Do(g.pixelPosition,function(l,h){return h?(h=Dt(l,a),si.test(h)?o(l).position()[a]+"px":h):void 0})}),o.each({Height:"height",Width:"width"},function(r,a){o.each({padding:"inner"+r,content:a,"":"outer"+r},function(l,h){o.fn[h]=function(p,v){var y=arguments.length&&(l||typeof p!="boolean"),C=l||(p===!0||v===!0?"margin":"border");return Rt(this,function(S,x,I){var M;return o.isWindow(S)?S.document.documentElement["client"+r]:S.nodeType===9?(M=S.documentElement,Math.max(S.body["scroll"+r],M["scroll"+r],S.body["offset"+r],M["offset"+r],M["client"+r])):I===void 0?o.css(S,x,C):o.style(S,x,I,C)},a,y?p:void 0,y,null)}})}),o.fn.size=function(){return this.length},o.fn.andSelf=o.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return o});var fh=n.jQuery,ph=n.$;return o.noConflict=function(r){return n.$===o&&(n.$=ph),r&&n.jQuery===o&&(n.jQuery=fh),o},typeof e===$e&&(n.jQuery=n.$=o),o});var ua={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L=function(n,e){if(!n)throw fn(e)},fn=function(n){return new Error("Firebase Database ("+Al.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Rh=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const c=n[t++];e[i++]=String.fromCharCode((s&31)<<6|c&63)}else if(s>239&&s<365){const c=n[t++],u=n[t++],d=n[t++],f=((s&7)<<18|(c&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const c=n[t++],u=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Cs={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const c=n[s],u=s+1<n.length,d=u?n[s+1]:0,f=s+2<n.length,m=f?n[s+2]:0,g=c>>2,_=(c&3)<<4|d>>4;let o=(d&15)<<2|m>>6,b=m&63;f||(b=64,u||(o=64)),i.push(t[g],t[_],t[o],t[b])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Il(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Rh(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const c=t[n.charAt(s++)],d=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const _=s<n.length?t[n.charAt(s)]:64;if(++s,c==null||d==null||m==null||_==null)throw new Ph;const o=c<<2|d>>4;if(i.push(o),m!==64){const b=d<<4&240|m>>2;if(i.push(b),_!==64){const N=m<<6&192|_;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ph extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ol=function(n){const e=Il(n);return Cs.encodeByteArray(e,!0)},Ci=function(n){return Ol(n).replace(/\./g,"")},es=function(n){try{return Cs.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(n){return Nl(void 0,n)}function Nl(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!kh(t)||(n[t]=Nl(n[t],e[t]));return n}function kh(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=()=>Mh().__FIREBASE_DEFAULTS__,Lh=()=>{if(typeof process>"u"||typeof ua>"u")return;const n=ua.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jh=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&es(n[1]);return e&&JSON.parse(e)},Rl=()=>{try{return Fh()||Lh()||jh()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bh=n=>{var e,t;return(t=(e=Rl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Uh=n=>{const e=Bh(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Pl=()=>{var n;return(n=Rl())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},n),d="";return[Ci(JSON.stringify(t)),Ci(JSON.stringify(u)),d].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Dl(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qh())}function Vh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kl(){return Al.NODE_ADMIN===!0}function Wh(){try{return typeof indexedDB=="object"}catch{return!1}}function $h(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var c;e(((c=s.error)===null||c===void 0?void 0:c.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="FirebaseError";class $n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=zh,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ml.prototype.create)}}class Ml{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,c=this.errors[e],u=c?Gh(c,i):"Error",d=`${this.serviceName}: ${u} (${s}).`;return new $n(s,d,i)}}function Gh(n,e){return n.replace(Yh,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Yh=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(n){return JSON.parse(n)}function ve(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=function(n){let e={},t={},i={},s="";try{const c=n.split(".");e=Pn(es(c[0])||""),t=Pn(es(c[1])||""),s=c[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:s}},Qh=function(n){const e=Fl(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},Kh=function(n){const e=Fl(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function cn(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function ha(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function wi(n,e,t){const i={};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=e.call(t,n[s],s,n));return i}function ts(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const c=n[s],u=e[s];if(da(c)&&da(u)){if(!ts(c,u))return!1}else if(c!==u)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function da(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let _=0;_<16;_++)i[_]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let _=0;_<16;_++)i[_]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let _=16;_<80;_++){const o=i[_-3]^i[_-8]^i[_-14]^i[_-16];i[_]=(o<<1|o>>>31)&4294967295}let s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],d=this.chain_[3],f=this.chain_[4],m,g;for(let _=0;_<80;_++){_<40?_<20?(m=d^c&(u^d),g=1518500249):(m=c^u^d,g=1859775393):_<60?(m=c&u|d&(c|u),g=2400959708):(m=c^u^d,g=3395469782);const o=(s<<5|s>>>27)+m+f+g+i[_]&4294967295;f=d,d=u,u=(c<<30|c>>>2)&4294967295,c=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let s=0;const c=this.buf_;let u=this.inbuf_;for(;s<t;){if(u===0)for(;s<=i;)this.compress_(e,s),s+=this.blockSize;if(typeof e=="string"){for(;s<t;)if(c[u]=e.charCodeAt(s),++u,++s,u===this.blockSize){this.compress_(c),u=0;break}}else for(;s<t;)if(c[u]=e[s],++u,++s,u===this.blockSize){this.compress_(c),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let s=0;s<5;s++)for(let c=24;c>=0;c-=8)e[i]=this.chain_[s]>>c&255,++i;return e}}function ws(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);if(s>=55296&&s<=56319){const c=s-55296;i++,L(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;s=65536+(c<<10)+u}s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):s<65536?(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},ji=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(n){return n&&n._delegate?n._delegate:n}class Dn{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Li;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(c){if(s)return null;throw c}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nd(e))try{this.getOrInitializeService({instanceIdentifier:Bt})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const c=this.getOrInitializeService({instanceIdentifier:s});i.resolve(c)}catch{}}}}clearInstance(e=Bt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bt){return this.instances.has(e)}getOptions(e=Bt){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[c,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(c);i===d&&u.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),c=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;c.add(e),this.onInitCallbacks.set(s,c);const u=this.instances.get(s);return u&&e(u,s),()=>{c.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:td(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bt){return this.component?this.component.multipleInstances?e:Bt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function td(n){return n===Bt?void 0:n}function nd(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ed(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var he;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(he||(he={}));const rd={debug:he.DEBUG,verbose:he.VERBOSE,info:he.INFO,warn:he.WARN,error:he.ERROR,silent:he.SILENT},sd=he.INFO,od={[he.DEBUG]:"log",[he.VERBOSE]:"log",[he.INFO]:"info",[he.WARN]:"warn",[he.ERROR]:"error"},ad=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=od[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ll{constructor(e){this.name=e,this._logLevel=sd,this._logHandler=ad,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in he))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rd[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,he.DEBUG,...e),this._logHandler(this,he.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,he.VERBOSE,...e),this._logHandler(this,he.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,he.INFO,...e),this._logHandler(this,he.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,he.WARN,...e),this._logHandler(this,he.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,he.ERROR,...e),this._logHandler(this,he.ERROR,...e)}}const ld=(n,e)=>e.some(t=>n instanceof t);let fa,pa;function cd(){return fa||(fa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ud(){return pa||(pa=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jl=new WeakMap,ns=new WeakMap,Bl=new WeakMap,br=new WeakMap,Ts=new WeakMap;function hd(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",c),n.removeEventListener("error",u)},c=()=>{t(Ct(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",c),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&jl.set(t,n)}).catch(()=>{}),Ts.set(e,n),e}function dd(n){if(ns.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",u),n.removeEventListener("abort",u)},c=()=>{t(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",c),n.addEventListener("error",u),n.addEventListener("abort",u)});ns.set(n,e)}let is={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ns.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Bl.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ct(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fd(n){is=n(is)}function pd(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Sr(this),e,...t);return Bl.set(i,e.sort?e.sort():[e]),Ct(i)}:ud().includes(n)?function(...e){return n.apply(Sr(this),e),Ct(jl.get(this))}:function(...e){return Ct(n.apply(Sr(this),e))}}function md(n){return typeof n=="function"?pd(n):(n instanceof IDBTransaction&&dd(n),ld(n,cd())?new Proxy(n,is):n)}function Ct(n){if(n instanceof IDBRequest)return hd(n);if(br.has(n))return br.get(n);const e=md(n);return e!==n&&(br.set(n,e),Ts.set(e,n)),e}const Sr=n=>Ts.get(n);function gd(n,e,{blocked:t,upgrade:i,blocking:s,terminated:c}={}){const u=indexedDB.open(n,e),d=Ct(u);return i&&u.addEventListener("upgradeneeded",f=>{i(Ct(u.result),f.oldVersion,f.newVersion,Ct(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{c&&f.addEventListener("close",()=>c()),s&&f.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const _d=["get","getKey","getAll","getAllKeys","count"],vd=["put","add","delete","clear"],xr=new Map;function ma(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xr.get(e))return xr.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=vd.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||_d.includes(t)))return;const c=async function(u,...d){const f=this.transaction(u,s?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),s&&f.done]))[0]};return xr.set(e,c),c}fd(n=>({...n,get:(e,t,i)=>ma(e,t)||n.get(e,t,i),has:(e,t)=>!!ma(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ed(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ed(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const rs="@firebase/app",ga="0.9.25";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt=new Ll("@firebase/app"),Cd="@firebase/app-compat",wd="@firebase/analytics-compat",Td="@firebase/analytics",bd="@firebase/app-check-compat",Sd="@firebase/app-check",xd="@firebase/auth",Ad="@firebase/auth-compat",Id="@firebase/database",Od="@firebase/database-compat",Nd="@firebase/functions",Rd="@firebase/functions-compat",Pd="@firebase/installations",Dd="@firebase/installations-compat",kd="@firebase/messaging",Md="@firebase/messaging-compat",Fd="@firebase/performance",Ld="@firebase/performance-compat",jd="@firebase/remote-config",Bd="@firebase/remote-config-compat",Ud="@firebase/storage",Hd="@firebase/storage-compat",qd="@firebase/firestore",Vd="@firebase/firestore-compat",Wd="firebase",$d="10.7.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]",zd={[rs]:"fire-core",[Cd]:"fire-core-compat",[Td]:"fire-analytics",[wd]:"fire-analytics-compat",[Sd]:"fire-app-check",[bd]:"fire-app-check-compat",[xd]:"fire-auth",[Ad]:"fire-auth-compat",[Id]:"fire-rtdb",[Od]:"fire-rtdb-compat",[Nd]:"fire-fn",[Rd]:"fire-fn-compat",[Pd]:"fire-iid",[Dd]:"fire-iid-compat",[kd]:"fire-fcm",[Md]:"fire-fcm-compat",[Fd]:"fire-perf",[Ld]:"fire-perf-compat",[jd]:"fire-rc",[Bd]:"fire-rc-compat",[Ud]:"fire-gcs",[Hd]:"fire-gcs-compat",[qd]:"fire-fst",[Vd]:"fire-fst-compat","fire-js":"fire-js",[Wd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ti=new Map,os=new Map;function Gd(n,e){try{n.container.addComponent(e)}catch(t){Wt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function bi(n){const e=n.name;if(os.has(e))return Wt.debug(`There were multiple attempts to register component ${e}.`),!1;os.set(e,n);for(const t of Ti.values())Gd(t,n);return!0}function Yd(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},wt=new Ml("app","Firebase",Qd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Dn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd=$d;function Ul(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:ss,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw wt.create("bad-app-name",{appName:String(s)});if(t||(t=Pl()),!t)throw wt.create("no-options");const c=Ti.get(s);if(c){if(ts(t,c.options)&&ts(i,c.config))return c;throw wt.create("duplicate-app",{appName:s})}const u=new id(s);for(const f of os.values())u.addComponent(f);const d=new Kd(t,i,u);return Ti.set(s,d),d}function Jd(n=ss){const e=Ti.get(n);if(!e&&n===ss&&Pl())return Ul();if(!e)throw wt.create("no-app",{appName:n});return e}function sn(n,e,t){var i;let s=(i=zd[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const c=s.match(/\s|\//),u=e.match(/\s|\//);if(c||u){const d=[`Unable to register library "${s}" with version "${e}":`];c&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),c&&u&&d.push("and"),u&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wt.warn(d.join(" "));return}bi(new Dn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="firebase-heartbeat-database",ef=1,kn="firebase-heartbeat-store";let Ar=null;function Hl(){return Ar||(Ar=gd(Zd,ef,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(kn)}}}).catch(n=>{throw wt.create("idb-open",{originalErrorMessage:n.message})})),Ar}async function tf(n){try{return await(await Hl()).transaction(kn).objectStore(kn).get(ql(n))}catch(e){if(e instanceof $n)Wt.warn(e.message);else{const t=wt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wt.warn(t.message)}}}async function _a(n,e){try{const i=(await Hl()).transaction(kn,"readwrite");await i.objectStore(kn).put(e,ql(n)),await i.done}catch(t){if(t instanceof $n)Wt.warn(t.message);else{const i=wt.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Wt.warn(i.message)}}}function ql(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=1024,rf=30*24*60*60*1e3;class sf{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new af(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=va();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c)))return this._heartbeatsCache.heartbeats.push({date:c,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(u=>{const d=new Date(u.date).valueOf();return Date.now()-d<=rf}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=va(),{heartbeatsToSend:i,unsentEntries:s}=of(this._heartbeatsCache.heartbeats),c=Ci(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}}function va(){return new Date().toISOString().substring(0,10)}function of(n,e=nf){const t=[];let i=n.slice();for(const s of n){const c=t.find(u=>u.agent===s.agent);if(c){if(c.dates.push(s.date),ya(t)>e){c.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ya(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class af{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wh()?$h().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tf(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return _a(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return _a(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ya(n){return Ci(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){bi(new Dn("platform-logger",e=>new yd(e),"PRIVATE")),bi(new Dn("heartbeat",e=>new sf(e),"PRIVATE")),sn(rs,ga,n),sn(rs,ga,"esm2017"),sn("fire-js","")}lf("");var cf="firebase",uf="10.7.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn(cf,uf,"app");var Ea={};const Ca="@firebase/database",wa="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl="";function hf(n){Vl=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),ve(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Pn(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return lt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new df(e)}}catch{}return new ff},Ht=Wl("localStorage"),as=Wl("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on=new Ll("@firebase/database"),pf=function(){let n=1;return function(){return n++}}(),$l=function(n){const e=Zh(n),t=new Jh;t.update(e);const i=t.digest();return Cs.encodeByteArray(i)},zn=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=zn.apply(null,i):typeof i=="object"?e+=ve(i):e+=i,e+=" "}return e};let Vt=null,Ta=!0;const mf=function(n,e){L(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(on.logLevel=he.VERBOSE,Vt=on.log.bind(on),e&&as.set("logging_enabled",!0)):typeof n=="function"?Vt=n:(Vt=null,as.remove("logging_enabled"))},Oe=function(...n){if(Ta===!0&&(Ta=!1,Vt===null&&as.get("logging_enabled")===!0&&mf(!0)),Vt){const e=zn.apply(null,n);Vt(e)}},Gn=function(n){return function(...e){Oe(n,...e)}},ls=function(...n){const e="FIREBASE INTERNAL ERROR: "+zn(...n);on.error(e)},at=function(...n){const e=`FIREBASE FATAL ERROR: ${zn(...n)}`;throw on.error(e),new Error(e)},Me=function(...n){const e="FIREBASE WARNING: "+zn(...n);on.warn(e)},gf=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Me("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zl=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_f=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},un="[MIN_NAME]",$t="[MAX_NAME]",pn=function(n,e){if(n===e)return 0;if(n===un||e===$t)return-1;if(e===un||n===$t)return 1;{const t=ba(n),i=ba(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},vf=function(n,e){return n===e?0:n<e?-1:1},bn=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+ve(e))},bs=function(n){if(typeof n!="object"||n===null)return ve(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=ve(e[i]),t+=":",t+=bs(n[e[i]]);return t+="}",t},Gl=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let s=0;s<t;s+=e)s+e>t?i.push(n.substring(s,t)):i.push(n.substring(s,s+e));return i};function Fe(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Yl=function(n){L(!zl(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let s,c,u,d,f;n===0?(c=0,u=0,s=1/n===-1/0?1:0):(s=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),c=d+i,u=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(c=0,u=Math.round(n/Math.pow(2,1-i-t))));const m=[];for(f=t;f;f-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(f=e;f;f-=1)m.push(c%2?1:0),c=Math.floor(c/2);m.push(s?1:0),m.reverse();const g=m.join("");let _="";for(f=0;f<64;f+=8){let o=parseInt(g.substr(f,8),2).toString(16);o.length===1&&(o="0"+o),_=_+o}return _.toLowerCase()},yf=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Ef=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Cf(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const wf=new RegExp("^-?(0*)\\d{1,10}$"),Tf=-2147483648,bf=2147483647,ba=function(n){if(wf.test(n)){const e=Number(n);if(e>=Tf&&e<=bf)return e}return null},mn=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Me("Exception was thrown by user callback.",t),e},Math.floor(0))}},Sf=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},In=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Me(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(s=>this.auth_=s)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Oe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Me(e)}}class an{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}an.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="5",Ql="v",Kl="s",Xl="r",Jl="f",Zl=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ec="ls",tc="p",cs="ac",nc="websocket",ic="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t,i,s,c=!1,u="",d=!1,f=!1){this.secure=t,this.namespace=i,this.webSocketOnly=s,this.nodeAdmin=c,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ht.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ht.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function If(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function sc(n,e,t){L(typeof e=="string","typeof type must == string"),L(typeof t=="object","typeof params must == object");let i;if(e===nc)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===ic)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);If(n)&&(t.ns=n.namespace);const s=[];return Fe(t,(c,u)=>{s.push(c+"="+u)}),i+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.counters_={}}incrementCounter(e,t=1){lt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Dh(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir={},Or={};function xs(n){const e=n.toString();return Ir[e]||(Ir[e]=new Of),Ir[e]}function Nf(n,e){const t=n.toString();return Or[t]||(Or[t]=e()),Or[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<i.length;++s)i[s]&&mn(()=>{this.onMessage_(i[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="start",Pf="close",Df="pLPCommand",kf="pRTLPCB",oc="id",ac="pw",lc="ser",Mf="cb",Ff="seg",Lf="ts",jf="d",Bf="dframe",cc=1870,uc=30,Uf=cc-uc,Hf=25e3,qf=3e4;class rn{constructor(e,t,i,s,c,u,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gn(e),this.stats_=xs(t),this.urlFn=f=>(this.appCheckToken&&(f[cs]=this.appCheckToken),sc(t,ic,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Rf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(qf)),_f(()=>{if(this.isClosed_)return;this.scriptTagHolder=new As((...c)=>{const[u,d,f,m,g]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Sa)this.id=d,this.password=f;else if(u===Pf)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...c)=>{const[u,d]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[Sa]="t",i[lc]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[Mf]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Ql]=Ss,this.transportSessionId&&(i[Kl]=this.transportSessionId),this.lastSessionId&&(i[ec]=this.lastSessionId),this.applicationId&&(i[tc]=this.applicationId),this.appCheckToken&&(i[cs]=this.appCheckToken),typeof location<"u"&&location.hostname&&Zl.test(location.hostname)&&(i[Xl]=Jl);const s=this.urlFn(i);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){rn.forceAllow_=!0}static forceDisallow(){rn.forceDisallow_=!0}static isAvailable(){return rn.forceAllow_?!0:!rn.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!yf()&&!Ef()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=ve(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=Ol(t),s=Gl(i,Uf);for(let c=0;c<s.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[c]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[Bf]="t",i[oc]=e,i[ac]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=ve(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class As{constructor(e,t,i,s){this.onDisconnect=i,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=pf(),window[Df+this.uniqueCallbackIdentifier]=e,window[kf+this.uniqueCallbackIdentifier]=t,this.myIFrame=As.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){Oe("frame writing exception"),d.stack&&Oe(d.stack),Oe(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Oe("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[oc]=this.myID,e[ac]=this.myPW,e[lc]=this.currentSerial;let t=this.urlFn(e),i="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uc+i.length<=cc;){const u=this.pendingSegs.shift();i=i+"&"+Ff+s+"="+u.seg+"&"+Lf+s+"="+u.ts+"&"+jf+s+"="+u.d,s++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},s=setTimeout(i,Math.floor(Hf)),c=()=>{clearTimeout(s),i()};this.addTag(e,c)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Oe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vf=16384,Wf=45e3;let Si=null;typeof MozWebSocket<"u"?Si=MozWebSocket:typeof WebSocket<"u"&&(Si=WebSocket);class Ge{constructor(e,t,i,s,c,u,d){this.connId=e,this.applicationId=i,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gn(this.connId),this.stats_=xs(t),this.connURL=Ge.connectionURL_(t,u,d,s,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,s,c){const u={};return u[Ql]=Ss,typeof location<"u"&&location.hostname&&Zl.test(location.hostname)&&(u[Xl]=Jl),t&&(u[Kl]=t),i&&(u[ec]=i),s&&(u[cs]=s),c&&(u[tc]=c),sc(e,nc,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ht.set("previous_websocket_failure",!0);try{let i;kl(),this.mySock=new Si(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){Ge.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Si!==null&&!Ge.forceDisallow_}static previouslyFailed(){return Ht.isInMemoryStorage||Ht.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ht.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=Pn(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(L(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=ve(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=Gl(t,Vf);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Wf))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ge.responsesRequiredToBeHealthy=2;Ge.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[rn,Ge]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Ge&&Ge.isAvailable();let i=t&&!Ge.previouslyFailed();if(e.webSocketOnly&&(t||Me("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ge];else{const s=this.transports_=[];for(const c of Mn.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);Mn.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Mn.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=6e4,zf=5e3,Gf=10*1024,Yf=100*1024,Nr="t",xa="d",Qf="s",Aa="r",Kf="e",Ia="o",Oa="a",Na="n",Ra="p",Xf="h";class Jf{constructor(e,t,i,s,c,u,d,f,m,g){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=s,this.authToken_=c,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=g,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gn("c:"+this.id+":"),this.transportManager_=new Mn(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const s=e.healthyTimeout||0;s>0&&(this.healthyTimeout_=In(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Yf?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Gf?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Nr in e){const t=e[Nr];t===Oa?this.upgradeIfSecondaryHealthy_():t===Aa?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Ia&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=bn("t",e),i=bn("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ra,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Oa,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Na,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=bn("t",e),i=bn("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=bn(Nr,e);if(xa in e){const i=e[xa];if(t===Xf){const s=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(t===Na){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Qf?this.onConnectionShutdown_(i):t===Aa?this.onReset_(i):t===Kf?ls("Server Error: "+i):t===Ia?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ls("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,s=e.h;this.sessionId=e.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ss!==i&&Me("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),In(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor($f))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):In(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(zf))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ra,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ht.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{put(e,t,i,s){}merge(e,t,i,s){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let s=0;s<i.length;s++)i[s].callback.apply(i[s].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const s=this.getInitialEvent(e);s&&t.apply(i,s)}off(e,t,i){this.validateEventType_(e);const s=this.listeners_[e]||[];for(let c=0;c<s.length;c++)if(s[c].callback===t&&(!i||i===s[c].context)){s.splice(c,1);return}}validateEventType_(e){L(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends dc{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Dl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xi}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=32,Da=768;class le{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[i]=this.pieces_[s],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function ie(){return new le("")}function ne(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function St(n){return n.pieces_.length-n.pieceNum_}function de(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new le(n.pieces_,e)}function fc(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Zf(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function pc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function mc(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new le(e,0)}function ye(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof le)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let s=0;s<i.length;s++)i[s].length>0&&t.push(i[s])}return new le(t,0)}function te(n){return n.pieceNum_>=n.pieces_.length}function Re(n,e){const t=ne(n),i=ne(e);if(t===null)return e;if(t===i)return Re(de(n),de(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function gc(n,e){if(St(n)!==St(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ye(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(St(n)>St(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class ep{constructor(e,t){this.errorPrefix_=t,this.parts_=pc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ji(this.parts_[i]);_c(this)}}function tp(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=ji(e),_c(n)}function np(n){const e=n.parts_.pop();n.byteLength_-=ji(e),n.parts_.length>0&&(n.byteLength_-=1)}function _c(n){if(n.byteLength_>Da)throw new Error(n.errorPrefix_+"has a key path longer than "+Da+" bytes ("+n.byteLength_+").");if(n.parts_.length>Pa)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Pa+") or object contains a cycle "+Ut(n))}function Ut(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends dc{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new Is}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn=1e3,ip=60*5*1e3,ka=30*1e3,rp=1.3,sp=3e4,op="server_kill",Ma=3;class ot extends hc{constructor(e,t,i,s,c,u,d,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=u,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=ot.nextPersistentConnectionId_++,this.log_=Gn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Sn,this.maxReconnectDelay_=ip,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!kl())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Is.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&xi.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const s=++this.requestNumber_,c={r:s,a:e,b:t};this.log_(ve(c)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[s]=i)}get(e){this.initConnection_();const t=new Li,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const d=u.d;u.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),t.promise}listen(e,t,i,s){this.initConnection_();const c=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+c),this.listens.has(u)||this.listens.set(u,new Map),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(u).has(c),"listen() called twice for same path/queryId.");const d={onComplete:s,hashFn:t,query:e,tag:i};this.listens.get(u).set(c,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+i+" for "+s);const c={p:i},u="q";e.tag&&(c.q=t._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(u,c,d=>{const f=d.d,m=d.s;ot.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(s))===e&&(this.log_("listen response",d),m!=="ok"&&this.removeListen_(i,s),e.onComplete&&e.onComplete(m,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&lt(e,"w")){const i=cn(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',c=t._path.toString();Me(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Kh(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ka)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=Qh(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,s=>{const c=s.s,u=s.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),L(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,e._queryObject,t)}sendUnlisten_(e,t,i,s){this.log_("Unlisten on "+e+" for "+t);const c={p:e},u="n";s&&(c.q=i,c.t=s),this.sendRequest(u,c)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,s){const c={p:t,d:i};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,u=>{s&&setTimeout(()=>{s(u.s,u.d)},Math.floor(0))})}put(e,t,i,s){this.putInternal("p",e,t,i,s)}merge(e,t,i,s){this.putInternal("m",e,t,i,s)}putInternal(e,t,i,s,c){this.initConnection_();const u={p:t,d:i};c!==void 0&&(u.h=c),this.outstandingPuts_.push({action:e,request:u,onComplete:s}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,c=>{this.log_(t+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const c=i.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+ve(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):ls("Unrecognized action received from server: "+ve(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Sn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Sn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sp&&(this.reconnectDelay_=Sn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*rp)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+ot.nextConnectionId_++,c=this.lastSessionId;let u=!1,d=null;const f=function(){d?d.close():(u=!0,i())},m=function(_){L(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(_)};this.realtime_={close:f,sendRequest:m};const g=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[_,o]=await Promise.all([this.authTokenProvider_.getToken(g),this.appCheckTokenProvider_.getToken(g)]);u?Oe("getToken() completed but was canceled"):(Oe("getToken() completed. Creating connection."),this.authToken_=_&&_.accessToken,this.appCheckToken_=o&&o.token,d=new Jf(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,b=>{Me(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(op)},c))}catch(_){this.log_("Failed to get token: "+_),u||(this.repoInfo_.nodeAdmin&&Me(_),f())}}}interrupt(e){Oe("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Oe("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ha(this.interruptReasons_)&&(this.reconnectDelay_=Sn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(c=>bs(c)).join("$"):i="default";const s=this.removeListen_(e,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,t){const i=new le(e).toString();let s;if(this.listens.has(i)){const c=this.listens.get(i);s=c.get(t),c.delete(t),c.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(e,t){Oe("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ma&&(this.reconnectDelay_=ka,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Oe("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ma&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Vl.replace(/\./g,"-")]=1,Dl()?e["framework.cordova"]=1:Vh()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=xi.getInstance().currentlyOnline();return ha(this.interruptReasons_)&&e}}ot.nextPersistentConnectionId_=0;ot.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Z(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new Z(un,e),s=new Z(un,t);return this.compare(i,s)!==0}minPost(){return Z.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gi;class vc extends Bi{static get __EMPTY_NODE(){return gi}static set __EMPTY_NODE(e){gi=e}compare(e,t){return pn(e.name,t.name)}isDefinedOn(e){throw fn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Z.MIN}maxPost(){return new Z($t,gi)}makePost(e,t){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new Z(e,gi)}toString(){return".key"}}const ln=new vc;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(e,t,i,s,c=null){this.isReverse_=s,this.resultGenerator_=c,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,s&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ce{constructor(e,t,i,s,c){this.key=e,this.value=t,this.color=i??Ce.RED,this.left=s??ke.EMPTY_NODE,this.right=c??ke.EMPTY_NODE}copy(e,t,i,s,c){return new Ce(e??this.key,t??this.value,i??this.color,s??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const c=i(e,s.key);return c<0?s=s.copy(null,null,null,s.left.insert(e,t,i),null):c===0?s=s.copy(null,t,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ke.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,s;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return ke.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ce.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ce.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ce.RED=!0;Ce.BLACK=!1;class ap{copy(e,t,i,s,c){return this}insert(e,t,i){return new Ce(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class ke{constructor(e,t=ke.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ke(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ce.BLACK,null,null))}remove(e){return new ke(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ce.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,s=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return s?s.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(s=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _i(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _i(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _i(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _i(this.root_,null,this.comparator_,!0,e)}}ke.EMPTY_NODE=new ap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n,e){return pn(n.name,e.name)}function Os(n,e){return pn(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us;function cp(n){us=n}const yc=function(n){return typeof n=="number"?"number:"+Yl(n):"string:"+n},Ec=function(n){if(n.isLeafNode()){const e=n.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&lt(e,".sv"),"Priority must be a string or number.")}else L(n===us||n.isEmpty(),"priority of unexpected type.");L(n===us||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fa;class Ee{constructor(e,t=Ee.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ec(this.priorityNode_)}static set __childrenNodeConstructor(e){Fa=e}static get __childrenNodeConstructor(){return Fa}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ee(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return te(e)?this:ne(e)===".priority"?this.priorityNode_:Ee.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Ee.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=ne(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(L(i!==".priority"||St(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Ee.__childrenNodeConstructor.EMPTY_NODE.updateChild(de(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+yc(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Yl(this.value_):e+=this.value_,this.lazyHash_=$l(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ee.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ee.__childrenNodeConstructor?-1:(L(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,s=Ee.VALUE_TYPE_ORDER.indexOf(t),c=Ee.VALUE_TYPE_ORDER.indexOf(i);return L(s>=0,"Unknown leaf type: "+t),L(c>=0,"Unknown leaf type: "+i),s===c?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Ee.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc,wc;function up(n){Cc=n}function hp(n){wc=n}class dp extends Bi{compare(e,t){const i=e.node.getPriority(),s=t.node.getPriority(),c=i.compareTo(s);return c===0?pn(e.name,t.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z($t,new Ee("[PRIORITY-POST]",wc))}makePost(e,t){const i=Cc(e);return new Z(t,new Ee("[PRIORITY-POST]",i))}toString(){return".priority"}}const ge=new dp;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=Math.log(2);class pp{constructor(e){const t=c=>parseInt(Math.log(c)/fp,10),i=c=>parseInt(Array(c+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const s=i(this.count);this.bits_=e+1&s}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ai=function(n,e,t,i){n.sort(e);const s=function(f,m){const g=m-f;let _,o;if(g===0)return null;if(g===1)return _=n[f],o=t?t(_):_,new Ce(o,_.node,Ce.BLACK,null,null);{const b=parseInt(g/2,10)+f,N=s(f,b),R=s(b+1,m);return _=n[b],o=t?t(_):_,new Ce(o,_.node,Ce.BLACK,N,R)}},c=function(f){let m=null,g=null,_=n.length;const o=function(N,R){const B=_-N,K=_;_-=N;const re=s(B+1,K),se=n[B],H=t?t(se):se;b(new Ce(H,se.node,R,null,re))},b=function(N){m?(m.left=N,m=N):(g=N,m=N)};for(let N=0;N<f.count;++N){const R=f.nextBitIsOne(),B=Math.pow(2,f.count-(N+1));R?o(B,Ce.BLACK):(o(B,Ce.BLACK),o(B,Ce.RED))}return g},u=new pp(n.length),d=c(u);return new ke(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rr;const en={};class st{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return L(en&&ge,"ChildrenNode.ts has not been loaded"),Rr=Rr||new st({".priority":en},{".priority":ge}),Rr}get(e){const t=cn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ke?t:null}hasIndex(e){return lt(this.indexSet_,e.toString())}addIndex(e,t){L(e!==ln,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let s=!1;const c=t.getIterator(Z.Wrap);let u=c.getNext();for(;u;)s=s||e.isDefinedOn(u.node),i.push(u),u=c.getNext();let d;s?d=Ai(i,e.getCompare()):d=en;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const g=Object.assign({},this.indexes_);return g[f]=d,new st(g,m)}addToIndexes(e,t){const i=wi(this.indexes_,(s,c)=>{const u=cn(this.indexSet_,c);if(L(u,"Missing index implementation for "+c),s===en)if(u.isDefinedOn(e.node)){const d=[],f=t.getIterator(Z.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&d.push(m),m=f.getNext();return d.push(e),Ai(d,u.getCompare())}else return en;else{const d=t.get(e.name);let f=s;return d&&(f=f.remove(new Z(e.name,d))),f.insert(e,e.node)}});return new st(i,this.indexSet_)}removeFromIndexes(e,t){const i=wi(this.indexes_,s=>{if(s===en)return s;{const c=t.get(e.name);return c?s.remove(new Z(e.name,c)):s}});return new st(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn;class z{constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ec(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xn||(xn=new z(new ke(Os),null,st.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xn}updatePriority(e){return this.children_.isEmpty()?this:new z(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?xn:t}}getChild(e){const t=ne(e);return t===null?this:this.getImmediateChild(t).getChild(de(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(L(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new Z(e,t);let s,c;t.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(e,t),c=this.indexMap_.addToIndexes(i,this.children_));const u=s.isEmpty()?xn:this.priorityNode_;return new z(s,u,c)}}updateChild(e,t){const i=ne(e);if(i===null)return t;{L(ne(e)!==".priority"||St(e)===1,".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(de(e),t);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,s=0,c=!0;if(this.forEachChild(ge,(u,d)=>{t[u]=d.val(e),i++,c&&z.INTEGER_REGEXP_.test(u)?s=Math.max(s,Number(u)):c=!1}),!e&&c&&s<2*i){const u=[];for(const d in t)u[d]=t[d];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+yc(this.getPriority().val())+":"),this.forEachChild(ge,(t,i)=>{const s=i.hash();s!==""&&(e+=":"+t+":"+s)}),this.lazyHash_=e===""?"":$l(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const s=this.resolveIndex_(i);if(s){const c=s.getPredecessorKey(new Z(e,t));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Z(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Z(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Z.Wrap);let c=s.peek();for(;c!=null&&t.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Z.Wrap);let c=s.peek();for(;c!=null&&t.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Yn?-1:0}withIndex(e){if(e===ln||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new z(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===ln||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(ge),s=t.getIterator(ge);let c=i.getNext(),u=s.getNext();for(;c&&u;){if(c.name!==u.name||!c.node.equals(u.node))return!1;c=i.getNext(),u=s.getNext()}return c===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===ln?null:this.indexMap_.get(e.toString())}}z.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class mp extends z{constructor(){super(new ke(Os),z.EMPTY_NODE,st.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return z.EMPTY_NODE}isEmpty(){return!1}}const Yn=new mp;Object.defineProperties(Z,{MIN:{value:new Z(un,z.EMPTY_NODE)},MAX:{value:new Z($t,Yn)}});vc.__EMPTY_NODE=z.EMPTY_NODE;Ee.__childrenNodeConstructor=z;cp(Yn);hp(Yn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp=!0;function we(n,e=null){if(n===null)return z.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Ee(t,we(e))}if(!(n instanceof Array)&&gp){const t=[];let i=!1;if(Fe(n,(u,d)=>{if(u.substring(0,1)!=="."){const f=we(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new Z(u,f)))}}),t.length===0)return z.EMPTY_NODE;const c=Ai(t,lp,u=>u.name,Os);if(i){const u=Ai(t,ge.getCompare());return new z(c,we(e),new st({".priority":u},{".priority":ge}))}else return new z(c,we(e),st.Default)}else{let t=z.EMPTY_NODE;return Fe(n,(i,s)=>{if(lt(n,i)&&i.substring(0,1)!=="."){const c=we(s);(c.isLeafNode()||!c.isEmpty())&&(t=t.updateImmediateChild(i,c))}}),t.updatePriority(we(e))}}up(we);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends Bi{constructor(e){super(),this.indexPath_=e,L(!te(e)&&ne(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),s=this.extractChild(t.node),c=i.compareTo(s);return c===0?pn(e.name,t.name):c}makePost(e,t){const i=we(e),s=z.EMPTY_NODE.updateChild(this.indexPath_,i);return new Z(t,s)}maxPost(){const e=z.EMPTY_NODE.updateChild(this.indexPath_,Yn);return new Z($t,e)}toString(){return pc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends Bi{compare(e,t){const i=e.node.compareTo(t.node);return i===0?pn(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(e,t){const i=we(e);return new Z(t,i)}toString(){return".value"}}const yp=new vp;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n){return{type:"value",snapshotNode:n}}function hn(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Fn(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Ln(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Ep(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.index_=e}updateChild(e,t,i,s,c,u){L(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(s).equals(i.getChild(s))&&d.isEmpty()===i.isEmpty()||(u!=null&&(i.isEmpty()?e.hasChild(t)?u.trackChildChange(Fn(t,d)):L(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(hn(t,i)):u.trackChildChange(Ln(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(ge,(s,c)=>{t.hasChild(s)||i.trackChildChange(Fn(s,c))}),t.isLeafNode()||t.forEachChild(ge,(s,c)=>{if(e.hasChild(s)){const u=e.getImmediateChild(s);u.equals(c)||i.trackChildChange(Ln(s,c,u))}else i.trackChildChange(hn(s,c))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?z.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.indexedFilter_=new Ns(e.getIndex()),this.index_=e.getIndex(),this.startPost_=jn.getStartPost_(e),this.endPost_=jn.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,s,c,u){return this.matches(new Z(t,i))||(i=z.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,s,c,u)}updateFullNode(e,t,i){t.isLeafNode()&&(t=z.EMPTY_NODE);let s=t.withIndex(this.index_);s=s.updatePriority(z.EMPTY_NODE);const c=this;return t.forEachChild(ge,(u,d)=>{c.matches(new Z(u,d))||(s=s.updateImmediateChild(u,z.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new jn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,s,c,u){return this.rangedFilter_.matches(new Z(t,i))||(i=z.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,s,c,u):this.fullLimitUpdateChild_(e,t,i,c,u)}updateFullNode(e,t,i){let s;if(t.isLeafNode()||t.isEmpty())s=z.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){s=z.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;c.hasNext()&&u<this.limit_;){const d=c.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))s=s.updateImmediateChild(d.name,d.node),u++;else break;else continue}}else{s=t.withIndex(this.index_),s=s.updatePriority(z.EMPTY_NODE);let c;this.reverse_?c=s.getReverseIterator(this.index_):c=s.getIterator(this.index_);let u=0;for(;c.hasNext();){const d=c.getNext();u<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?u++:s=s.updateImmediateChild(d.name,z.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,s,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,s,c){let u;if(this.reverse_){const _=this.index_.getCompare();u=(o,b)=>_(b,o)}else u=this.index_.getCompare();const d=e;L(d.numChildren()===this.limit_,"");const f=new Z(t,i),m=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),g=this.rangedFilter_.matches(f);if(d.hasChild(t)){const _=d.getImmediateChild(t);let o=s.getChildAfterChild(this.index_,m,this.reverse_);for(;o!=null&&(o.name===t||d.hasChild(o.name));)o=s.getChildAfterChild(this.index_,o,this.reverse_);const b=o==null?1:u(o,f);if(g&&!i.isEmpty()&&b>=0)return c!=null&&c.trackChildChange(Ln(t,i,_)),d.updateImmediateChild(t,i);{c!=null&&c.trackChildChange(Fn(t,_));const R=d.updateImmediateChild(t,z.EMPTY_NODE);return o!=null&&this.rangedFilter_.matches(o)?(c!=null&&c.trackChildChange(hn(o.name,o.node)),R.updateImmediateChild(o.name,o.node)):R}}else return i.isEmpty()?e:g&&u(m,f)>=0?(c!=null&&(c.trackChildChange(Fn(m.name,m.node)),c.trackChildChange(hn(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(m.name,z.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ge}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:un}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$t}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ge}copy(){const e=new Rs;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function wp(n){return n.loadsAllData()?new Ns(n.getIndex()):n.hasLimit()?new Cp(n):new jn(n)}function La(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ge?t="$priority":n.index_===yp?t="$value":n.index_===ln?t="$key":(L(n.index_ instanceof _p,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=ve(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=ve(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+ve(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=ve(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+ve(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ja(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==ge&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends hc{constructor(e,t,i,s){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=s,this.log_=Gn("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,s){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const u=Ii.getListenId_(e,i),d={};this.listens_[u]=d;const f=La(e._queryParams);this.restRequest_(c+".json",f,(m,g)=>{let _=g;if(m===404&&(_=null,m=null),m===null&&this.onDataUpdate_(c,_,!1,i),cn(this.listens_,u)===d){let o;m?m===401?o="permission_denied":o="rest_error:"+m:o="ok",s(o,null)}})}unlisten(e,t){const i=Ii.getListenId_(e,t);delete this.listens_[i]}get(e){const t=La(e._queryParams),i=e._path.toString(),s=new Li;return this.restRequest_(i+".json",t,(c,u)=>{let d=u;c===404&&(d=null,c=null),c===null?(this.onDataUpdate_(i,d,!1,null),s.resolve(d)):s.reject(new Error(d))}),s.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,c])=>{s&&s.accessToken&&(t.auth=s.accessToken),c&&c.token&&(t.ac=c.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Xh(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=Pn(d.responseText)}catch{Me("Failed to parse JSON response for "+u+": "+d.responseText)}i(null,f)}else d.status!==401&&d.status!==404&&Me("Got unsuccessful REST response for "+u+" Status: "+d.status),i(d.status);i=null}},d.open("GET",u,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(){this.rootNode_=z.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return{value:null,children:new Map}}function bc(n,e,t){if(te(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=ne(e);n.children.has(i)||n.children.set(i,Oi());const s=n.children.get(i);e=de(e),bc(s,e,t)}}function hs(n,e,t){n.value!==null?t(e,n.value):bp(n,(i,s)=>{const c=new le(e.toString()+"/"+i);hs(s,c,t)})}function bp(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Fe(this.last_,(i,s)=>{t[i]=t[i]-s}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=10*1e3,xp=30*1e3,Ap=5*60*1e3;class Ip{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sp(e);const i=Ba+(xp-Ba)*Math.random();In(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Fe(e,(s,c)=>{c>0&&lt(this.statsToReport_,s)&&(t[s]=c,i=!0)}),i&&this.server_.reportStats(t),In(this.reportStats_.bind(this),Math.floor(Math.random()*2*Ap))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Qe||(Qe={}));function Sc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ps(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ds(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Qe.ACK_USER_WRITE,this.source=Sc()}operationForChild(e){if(te(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new le(e));return new Ni(ie(),t,this.revert)}}else return L(ne(this.path)===e,"operationForChild called for unrelated child."),new Ni(de(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t){this.source=e,this.path=t,this.type=Qe.LISTEN_COMPLETE}operationForChild(e){return te(this.path)?new Bn(this.source,ie()):new Bn(this.source,de(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Qe.OVERWRITE}operationForChild(e){return te(this.path)?new zt(this.source,ie(),this.snap.getImmediateChild(e)):new zt(this.source,de(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Qe.MERGE}operationForChild(e){if(te(this.path)){const t=this.children.subtree(new le(e));return t.isEmpty()?null:t.value?new zt(this.source,ie(),t.value):new Un(this.source,ie(),t)}else return L(ne(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Un(this.source,de(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(te(e))return this.isFullyInitialized()&&!this.filtered_;const t=ne(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Np(n,e,t,i){const s=[],c=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&c.push(Ep(u.childName,u.snapshotNode))}),An(n,s,"child_removed",e,i,t),An(n,s,"child_added",e,i,t),An(n,s,"child_moved",c,i,t),An(n,s,"child_changed",e,i,t),An(n,s,"value",e,i,t),s}function An(n,e,t,i,s,c){const u=i.filter(d=>d.type===t);u.sort((d,f)=>Pp(n,d,f)),u.forEach(d=>{const f=Rp(n,d,c);s.forEach(m=>{m.respondsTo(d.type)&&e.push(m.createEvent(f,n.query_))})})}function Rp(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Pp(n,e,t){if(e.childName==null||t.childName==null)throw fn("Should only compare child_ events.");const i=new Z(e.childName,e.snapshotNode),s=new Z(t.childName,t.snapshotNode);return n.index_.compare(i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(n,e){return{eventCache:n,serverCache:e}}function On(n,e,t,i){return Ui(new xt(e,t,i),n.serverCache)}function xc(n,e,t,i){return Ui(n.eventCache,new xt(e,t,i))}function Ri(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Gt(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pr;const Dp=()=>(Pr||(Pr=new ke(vf)),Pr);class pe{constructor(e,t=Dp()){this.value=e,this.children=t}static fromObject(e){let t=new pe(null);return Fe(e,(i,s)=>{t=t.set(new le(i),s)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:ie(),value:this.value};if(te(e))return null;{const i=ne(e),s=this.children.get(i);if(s!==null){const c=s.findRootMostMatchingPathAndValue(de(e),t);return c!=null?{path:ye(new le(i),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(te(e))return this;{const t=ne(e),i=this.children.get(t);return i!==null?i.subtree(de(e)):new pe(null)}}set(e,t){if(te(e))return new pe(t,this.children);{const i=ne(e),c=(this.children.get(i)||new pe(null)).set(de(e),t),u=this.children.insert(i,c);return new pe(this.value,u)}}remove(e){if(te(e))return this.children.isEmpty()?new pe(null):new pe(null,this.children);{const t=ne(e),i=this.children.get(t);if(i){const s=i.remove(de(e));let c;return s.isEmpty()?c=this.children.remove(t):c=this.children.insert(t,s),this.value===null&&c.isEmpty()?new pe(null):new pe(this.value,c)}else return this}}get(e){if(te(e))return this.value;{const t=ne(e),i=this.children.get(t);return i?i.get(de(e)):null}}setTree(e,t){if(te(e))return t;{const i=ne(e),c=(this.children.get(i)||new pe(null)).setTree(de(e),t);let u;return c.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,c),new pe(this.value,u)}}fold(e){return this.fold_(ie(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((s,c)=>{i[s]=c.fold_(ye(e,s),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,ie(),t)}findOnPath_(e,t,i){const s=this.value?i(t,this.value):!1;if(s)return s;if(te(e))return null;{const c=ne(e),u=this.children.get(c);return u?u.findOnPath_(de(e),ye(t,c),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ie(),t)}foreachOnPath_(e,t,i){if(te(e))return this;{this.value&&i(t,this.value);const s=ne(e),c=this.children.get(s);return c?c.foreachOnPath_(de(e),ye(t,s),i):new pe(null)}}foreach(e){this.foreach_(ie(),e)}foreach_(e,t){this.children.inorderTraversal((i,s)=>{s.foreach_(ye(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.writeTree_=e}static empty(){return new Ke(new pe(null))}}function Nn(n,e,t){if(te(e))return new Ke(new pe(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const s=i.path;let c=i.value;const u=Re(s,e);return c=c.updateChild(u,t),new Ke(n.writeTree_.set(s,c))}else{const s=new pe(t),c=n.writeTree_.setTree(e,s);return new Ke(c)}}}function Ua(n,e,t){let i=n;return Fe(t,(s,c)=>{i=Nn(i,ye(e,s),c)}),i}function Ha(n,e){if(te(e))return Ke.empty();{const t=n.writeTree_.setTree(e,new pe(null));return new Ke(t)}}function ds(n,e){return Qt(n,e)!=null}function Qt(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Re(t.path,e)):null}function qa(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(ge,(i,s)=>{e.push(new Z(i,s))}):n.writeTree_.children.inorderTraversal((i,s)=>{s.value!=null&&e.push(new Z(i,s.value))}),e}function Tt(n,e){if(te(e))return n;{const t=Qt(n,e);return t!=null?new Ke(new pe(t)):new Ke(n.writeTree_.subtree(e))}}function fs(n){return n.writeTree_.isEmpty()}function dn(n,e){return Ac(ie(),n.writeTree_,e)}function Ac(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((s,c)=>{s===".priority"?(L(c.value!==null,"Priority writes must always be leaf nodes"),i=c.value):t=Ac(ye(n,s),c,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(ye(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(n,e){return Rc(e,n)}function kp(n,e,t,i,s){L(i>n.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:s}),s&&(n.visibleWrites=Nn(n.visibleWrites,e,t)),n.lastWriteId=i}function Mp(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function Fp(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);L(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let s=i.visible,c=!1,u=n.allWrites.length-1;for(;s&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&Lp(d,i.path)?s=!1:Ye(i.path,d.path)&&(c=!0)),u--}if(s){if(c)return jp(n),!0;if(i.snap)n.visibleWrites=Ha(n.visibleWrites,i.path);else{const d=i.children;Fe(d,f=>{n.visibleWrites=Ha(n.visibleWrites,ye(i.path,f))})}return!0}else return!1}function Lp(n,e){if(n.snap)return Ye(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ye(ye(n.path,t),e))return!0;return!1}function jp(n){n.visibleWrites=Ic(n.allWrites,Bp,ie()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Bp(n){return n.visible}function Ic(n,e,t){let i=Ke.empty();for(let s=0;s<n.length;++s){const c=n[s];if(e(c)){const u=c.path;let d;if(c.snap)Ye(t,u)?(d=Re(t,u),i=Nn(i,d,c.snap)):Ye(u,t)&&(d=Re(u,t),i=Nn(i,ie(),c.snap.getChild(d)));else if(c.children){if(Ye(t,u))d=Re(t,u),i=Ua(i,d,c.children);else if(Ye(u,t))if(d=Re(u,t),te(d))i=Ua(i,ie(),c.children);else{const f=cn(c.children,ne(d));if(f){const m=f.getChild(de(d));i=Nn(i,ie(),m)}}}else throw fn("WriteRecord should have .snap or .children")}}return i}function Oc(n,e,t,i,s){if(!i&&!s){const c=Qt(n.visibleWrites,e);if(c!=null)return c;{const u=Tt(n.visibleWrites,e);if(fs(u))return t;if(t==null&&!ds(u,ie()))return null;{const d=t||z.EMPTY_NODE;return dn(u,d)}}}else{const c=Tt(n.visibleWrites,e);if(!s&&fs(c))return t;if(!s&&t==null&&!ds(c,ie()))return null;{const u=function(m){return(m.visible||s)&&(!i||!~i.indexOf(m.writeId))&&(Ye(m.path,e)||Ye(e,m.path))},d=Ic(n.allWrites,u,e),f=t||z.EMPTY_NODE;return dn(d,f)}}}function Up(n,e,t){let i=z.EMPTY_NODE;const s=Qt(n.visibleWrites,e);if(s)return s.isLeafNode()||s.forEachChild(ge,(c,u)=>{i=i.updateImmediateChild(c,u)}),i;if(t){const c=Tt(n.visibleWrites,e);return t.forEachChild(ge,(u,d)=>{const f=dn(Tt(c,new le(u)),d);i=i.updateImmediateChild(u,f)}),qa(c).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const c=Tt(n.visibleWrites,e);return qa(c).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function Hp(n,e,t,i,s){L(i||s,"Either existingEventSnap or existingServerSnap must exist");const c=ye(e,t);if(ds(n.visibleWrites,c))return null;{const u=Tt(n.visibleWrites,c);return fs(u)?s.getChild(t):dn(u,s.getChild(t))}}function qp(n,e,t,i){const s=ye(e,t),c=Qt(n.visibleWrites,s);if(c!=null)return c;if(i.isCompleteForChild(t)){const u=Tt(n.visibleWrites,s);return dn(u,i.getNode().getImmediateChild(t))}else return null}function Vp(n,e){return Qt(n.visibleWrites,e)}function Wp(n,e,t,i,s,c,u){let d;const f=Tt(n.visibleWrites,e),m=Qt(f,ie());if(m!=null)d=m;else if(t!=null)d=dn(f,t);else return[];if(d=d.withIndex(u),!d.isEmpty()&&!d.isLeafNode()){const g=[],_=u.getCompare(),o=c?d.getReverseIteratorFrom(i,u):d.getIteratorFrom(i,u);let b=o.getNext();for(;b&&g.length<s;)_(b,i)!==0&&g.push(b),b=o.getNext();return g}else return[]}function $p(){return{visibleWrites:Ke.empty(),allWrites:[],lastWriteId:-1}}function Pi(n,e,t,i){return Oc(n.writeTree,n.treePath,e,t,i)}function ks(n,e){return Up(n.writeTree,n.treePath,e)}function Va(n,e,t,i){return Hp(n.writeTree,n.treePath,e,t,i)}function Di(n,e){return Vp(n.writeTree,ye(n.treePath,e))}function zp(n,e,t,i,s,c){return Wp(n.writeTree,n.treePath,e,t,i,s,c)}function Ms(n,e,t){return qp(n.writeTree,n.treePath,e,t)}function Nc(n,e){return Rc(ye(n.treePath,e),n.writeTree)}function Rc(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;L(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),L(i!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(i);if(s){const c=s.type;if(t==="child_added"&&c==="child_removed")this.changeMap.set(i,Ln(i,e.snapshotNode,s.snapshotNode));else if(t==="child_removed"&&c==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&c==="child_changed")this.changeMap.set(i,Fn(i,s.oldSnap));else if(t==="child_changed"&&c==="child_added")this.changeMap.set(i,hn(i,e.snapshotNode));else if(t==="child_changed"&&c==="child_changed")this.changeMap.set(i,Ln(i,e.snapshotNode,s.oldSnap));else throw fn("Illegal combination of changes: "+e+" occurred after "+s)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const Pc=new Yp;class Fs{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new xt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ms(this.writes_,e,i)}}getChildAfterChild(e,t,i){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Gt(this.viewCache_),c=zp(this.writes_,s,t,1,i,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n){return{filter:n}}function Kp(n,e){L(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Xp(n,e,t,i,s){const c=new Gp;let u,d;if(t.type===Qe.OVERWRITE){const m=t;m.source.fromUser?u=ps(n,e,m.path,m.snap,i,s,c):(L(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered()&&!te(m.path),u=ki(n,e,m.path,m.snap,i,s,d,c))}else if(t.type===Qe.MERGE){const m=t;m.source.fromUser?u=Zp(n,e,m.path,m.children,i,s,c):(L(m.source.fromServer,"Unknown source."),d=m.source.tagged||e.serverCache.isFiltered(),u=ms(n,e,m.path,m.children,i,s,d,c))}else if(t.type===Qe.ACK_USER_WRITE){const m=t;m.revert?u=nm(n,e,m.path,i,s,c):u=em(n,e,m.path,m.affectedTree,i,s,c)}else if(t.type===Qe.LISTEN_COMPLETE)u=tm(n,e,t.path,i,c);else throw fn("Unknown operation type: "+t.type);const f=c.getChanges();return Jp(e,u,f),{viewCache:u,changes:f}}function Jp(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),c=Ri(n);(t.length>0||!n.eventCache.isFullyInitialized()||s&&!i.getNode().equals(c)||!i.getNode().getPriority().equals(c.getPriority()))&&t.push(Tc(Ri(e)))}}function Dc(n,e,t,i,s,c){const u=e.eventCache;if(Di(i,t)!=null)return e;{let d,f;if(te(t))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Gt(e),g=m instanceof z?m:z.EMPTY_NODE,_=ks(i,g);d=n.filter.updateFullNode(e.eventCache.getNode(),_,c)}else{const m=Pi(i,Gt(e));d=n.filter.updateFullNode(e.eventCache.getNode(),m,c)}else{const m=ne(t);if(m===".priority"){L(St(t)===1,"Can't have a priority with additional path components");const g=u.getNode();f=e.serverCache.getNode();const _=Va(i,t,g,f);_!=null?d=n.filter.updatePriority(g,_):d=u.getNode()}else{const g=de(t);let _;if(u.isCompleteForChild(m)){f=e.serverCache.getNode();const o=Va(i,t,u.getNode(),f);o!=null?_=u.getNode().getImmediateChild(m).updateChild(g,o):_=u.getNode().getImmediateChild(m)}else _=Ms(i,m,e.serverCache);_!=null?d=n.filter.updateChild(u.getNode(),m,_,g,s,c):d=u.getNode()}}return On(e,d,u.isFullyInitialized()||te(t),n.filter.filtersNodes())}}function ki(n,e,t,i,s,c,u,d){const f=e.serverCache;let m;const g=u?n.filter:n.filter.getIndexedFilter();if(te(t))m=g.updateFullNode(f.getNode(),i,null);else if(g.filtersNodes()&&!f.isFiltered()){const b=f.getNode().updateChild(t,i);m=g.updateFullNode(f.getNode(),b,null)}else{const b=ne(t);if(!f.isCompleteForPath(t)&&St(t)>1)return e;const N=de(t),B=f.getNode().getImmediateChild(b).updateChild(N,i);b===".priority"?m=g.updatePriority(f.getNode(),B):m=g.updateChild(f.getNode(),b,B,N,Pc,null)}const _=xc(e,m,f.isFullyInitialized()||te(t),g.filtersNodes()),o=new Fs(s,_,c);return Dc(n,_,t,s,o,d)}function ps(n,e,t,i,s,c,u){const d=e.eventCache;let f,m;const g=new Fs(s,e,c);if(te(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,u),f=On(e,m,!0,n.filter.filtersNodes());else{const _=ne(t);if(_===".priority")m=n.filter.updatePriority(e.eventCache.getNode(),i),f=On(e,m,d.isFullyInitialized(),d.isFiltered());else{const o=de(t),b=d.getNode().getImmediateChild(_);let N;if(te(o))N=i;else{const R=g.getCompleteChild(_);R!=null?fc(o)===".priority"&&R.getChild(mc(o)).isEmpty()?N=R:N=R.updateChild(o,i):N=z.EMPTY_NODE}if(b.equals(N))f=e;else{const R=n.filter.updateChild(d.getNode(),_,N,o,g,u);f=On(e,R,d.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function Wa(n,e){return n.eventCache.isCompleteForChild(e)}function Zp(n,e,t,i,s,c,u){let d=e;return i.foreach((f,m)=>{const g=ye(t,f);Wa(e,ne(g))&&(d=ps(n,d,g,m,s,c,u))}),i.foreach((f,m)=>{const g=ye(t,f);Wa(e,ne(g))||(d=ps(n,d,g,m,s,c,u))}),d}function $a(n,e,t){return t.foreach((i,s)=>{e=e.updateChild(i,s)}),e}function ms(n,e,t,i,s,c,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,m;te(t)?m=i:m=new pe(null).setTree(t,i);const g=e.serverCache.getNode();return m.children.inorderTraversal((_,o)=>{if(g.hasChild(_)){const b=e.serverCache.getNode().getImmediateChild(_),N=$a(n,b,o);f=ki(n,f,new le(_),N,s,c,u,d)}}),m.children.inorderTraversal((_,o)=>{const b=!e.serverCache.isCompleteForChild(_)&&o.value===null;if(!g.hasChild(_)&&!b){const N=e.serverCache.getNode().getImmediateChild(_),R=$a(n,N,o);f=ki(n,f,new le(_),R,s,c,u,d)}}),f}function em(n,e,t,i,s,c,u){if(Di(s,t)!=null)return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(te(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return ki(n,e,t,f.getNode().getChild(t),s,c,d,u);if(te(t)){let m=new pe(null);return f.getNode().forEachChild(ln,(g,_)=>{m=m.set(new le(g),_)}),ms(n,e,t,m,s,c,d,u)}else return e}else{let m=new pe(null);return i.foreach((g,_)=>{const o=ye(t,g);f.isCompleteForPath(o)&&(m=m.set(g,f.getNode().getChild(o)))}),ms(n,e,t,m,s,c,d,u)}}function tm(n,e,t,i,s){const c=e.serverCache,u=xc(e,c.getNode(),c.isFullyInitialized()||te(t),c.isFiltered());return Dc(n,u,t,i,Pc,s)}function nm(n,e,t,i,s,c){let u;if(Di(i,t)!=null)return e;{const d=new Fs(i,e,s),f=e.eventCache.getNode();let m;if(te(t)||ne(t)===".priority"){let g;if(e.serverCache.isFullyInitialized())g=Pi(i,Gt(e));else{const _=e.serverCache.getNode();L(_ instanceof z,"serverChildren would be complete if leaf node"),g=ks(i,_)}g=g,m=n.filter.updateFullNode(f,g,c)}else{const g=ne(t);let _=Ms(i,g,e.serverCache);_==null&&e.serverCache.isCompleteForChild(g)&&(_=f.getImmediateChild(g)),_!=null?m=n.filter.updateChild(f,g,_,de(t),d,c):e.eventCache.getNode().hasChild(g)?m=n.filter.updateChild(f,g,z.EMPTY_NODE,de(t),d,c):m=f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Pi(i,Gt(e)),u.isLeafNode()&&(m=n.filter.updateFullNode(m,u,c)))}return u=e.serverCache.isFullyInitialized()||Di(i,ie())!=null,On(e,m,u,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,s=new Ns(i.getIndex()),c=wp(i);this.processor_=Qp(c);const u=t.serverCache,d=t.eventCache,f=s.updateFullNode(z.EMPTY_NODE,u.getNode(),null),m=c.updateFullNode(z.EMPTY_NODE,d.getNode(),null),g=new xt(f,u.isFullyInitialized(),s.filtersNodes()),_=new xt(m,d.isFullyInitialized(),c.filtersNodes());this.viewCache_=Ui(_,g),this.eventGenerator_=new Op(this.query_)}get query(){return this.query_}}function rm(n){return n.viewCache_.serverCache.getNode()}function sm(n){return Ri(n.viewCache_)}function om(n,e){const t=Gt(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!te(e)&&!t.getImmediateChild(ne(e)).isEmpty())?t.getChild(e):null}function za(n){return n.eventRegistrations_.length===0}function am(n,e){n.eventRegistrations_.push(e)}function Ga(n,e,t){const i=[];if(t){L(e==null,"A cancel should cancel all event registrations.");const s=n.query._path;n.eventRegistrations_.forEach(c=>{const u=c.createCancelEvent(t,s);u&&i.push(u)})}if(e){let s=[];for(let c=0;c<n.eventRegistrations_.length;++c){const u=n.eventRegistrations_[c];if(!u.matches(e))s.push(u);else if(e.hasAnyCallback()){s=s.concat(n.eventRegistrations_.slice(c+1));break}}n.eventRegistrations_=s}else n.eventRegistrations_=[];return i}function Ya(n,e,t,i){e.type===Qe.MERGE&&e.source.queryId!==null&&(L(Gt(n.viewCache_),"We should always have a full cache before handling merges"),L(Ri(n.viewCache_),"Missing event cache, even though we have a server cache"));const s=n.viewCache_,c=Xp(n.processor_,s,e,t,i);return Kp(n.processor_,c.viewCache),L(c.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=c.viewCache,kc(n,c.changes,c.viewCache.eventCache.getNode(),null)}function lm(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ge,(c,u)=>{i.push(hn(c,u))}),t.isFullyInitialized()&&i.push(Tc(t.getNode())),kc(n,i,t.getNode(),e)}function kc(n,e,t,i){const s=i?[i]:n.eventRegistrations_;return Np(n.eventGenerator_,e,t,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mi;class Mc{constructor(){this.views=new Map}}function cm(n){L(!Mi,"__referenceConstructor has already been defined"),Mi=n}function um(){return L(Mi,"Reference.ts has not been loaded"),Mi}function hm(n){return n.views.size===0}function Ls(n,e,t,i){const s=e.source.queryId;if(s!==null){const c=n.views.get(s);return L(c!=null,"SyncTree gave us an op for an invalid query."),Ya(c,e,t,i)}else{let c=[];for(const u of n.views.values())c=c.concat(Ya(u,e,t,i));return c}}function Fc(n,e,t,i,s){const c=e._queryIdentifier,u=n.views.get(c);if(!u){let d=Pi(t,s?i:null),f=!1;d?f=!0:i instanceof z?(d=ks(t,i),f=!1):(d=z.EMPTY_NODE,f=!1);const m=Ui(new xt(d,f,!1),new xt(i,s,!1));return new im(e,m)}return u}function dm(n,e,t,i,s,c){const u=Fc(n,e,i,s,c);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),am(u,t),lm(u,t)}function fm(n,e,t,i){const s=e._queryIdentifier,c=[];let u=[];const d=At(n);if(s==="default")for(const[f,m]of n.views.entries())u=u.concat(Ga(m,t,i)),za(m)&&(n.views.delete(f),m.query._queryParams.loadsAllData()||c.push(m.query));else{const f=n.views.get(s);f&&(u=u.concat(Ga(f,t,i)),za(f)&&(n.views.delete(s),f.query._queryParams.loadsAllData()||c.push(f.query)))}return d&&!At(n)&&c.push(new(um())(e._repo,e._path)),{removed:c,events:u}}function Lc(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bt(n,e){let t=null;for(const i of n.views.values())t=t||om(i,e);return t}function jc(n,e){if(e._queryParams.loadsAllData())return qi(n);{const i=e._queryIdentifier;return n.views.get(i)}}function Bc(n,e){return jc(n,e)!=null}function At(n){return qi(n)!=null}function qi(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fi;function pm(n){L(!Fi,"__referenceConstructor has already been defined"),Fi=n}function mm(){return L(Fi,"Reference.ts has not been loaded"),Fi}let gm=1;class Qa{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pe(null),this.pendingWriteTree_=$p(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Uc(n,e,t,i,s){return kp(n.pendingWriteTree_,e,t,i,s),s?Kn(n,new zt(Sc(),e,t)):[]}function qt(n,e,t=!1){const i=Mp(n.pendingWriteTree_,e);if(Fp(n.pendingWriteTree_,e)){let c=new pe(null);return i.snap!=null?c=c.set(ie(),!0):Fe(i.children,u=>{c=c.set(new le(u),!0)}),Kn(n,new Ni(i.path,c,t))}else return[]}function Qn(n,e,t){return Kn(n,new zt(Ps(),e,t))}function _m(n,e,t){const i=pe.fromObject(t);return Kn(n,new Un(Ps(),e,i))}function vm(n,e){return Kn(n,new Bn(Ps(),e))}function ym(n,e,t){const i=Bs(n,t);if(i){const s=Us(i),c=s.path,u=s.queryId,d=Re(c,e),f=new Bn(Ds(u),d);return Hs(n,c,f)}else return[]}function Hc(n,e,t,i,s=!1){const c=e._path,u=n.syncPointTree_.get(c);let d=[];if(u&&(e._queryIdentifier==="default"||Bc(u,e))){const f=fm(u,e,t,i);hm(u)&&(n.syncPointTree_=n.syncPointTree_.remove(c));const m=f.removed;if(d=f.events,!s){const g=m.findIndex(o=>o._queryParams.loadsAllData())!==-1,_=n.syncPointTree_.findOnPath(c,(o,b)=>At(b));if(g&&!_){const o=n.syncPointTree_.subtree(c);if(!o.isEmpty()){const b=Tm(o);for(let N=0;N<b.length;++N){const R=b[N],B=R.query,K=$c(n,R);n.listenProvider_.startListening(Rn(B),Hn(n,B),K.hashFn,K.onComplete)}}}!_&&m.length>0&&!i&&(g?n.listenProvider_.stopListening(Rn(e),null):m.forEach(o=>{const b=n.queryToTagMap.get(Vi(o));n.listenProvider_.stopListening(Rn(o),b)}))}bm(n,m)}return d}function qc(n,e,t,i){const s=Bs(n,i);if(s!=null){const c=Us(s),u=c.path,d=c.queryId,f=Re(u,e),m=new zt(Ds(d),f,t);return Hs(n,u,m)}else return[]}function Em(n,e,t,i){const s=Bs(n,i);if(s){const c=Us(s),u=c.path,d=c.queryId,f=Re(u,e),m=pe.fromObject(t),g=new Un(Ds(d),f,m);return Hs(n,u,g)}else return[]}function Cm(n,e,t,i=!1){const s=e._path;let c=null,u=!1;n.syncPointTree_.foreachOnPath(s,(o,b)=>{const N=Re(o,s);c=c||bt(b,N),u=u||At(b)});let d=n.syncPointTree_.get(s);d?(u=u||At(d),c=c||bt(d,ie())):(d=new Mc,n.syncPointTree_=n.syncPointTree_.set(s,d));let f;c!=null?f=!0:(f=!1,c=z.EMPTY_NODE,n.syncPointTree_.subtree(s).foreachChild((b,N)=>{const R=bt(N,ie());R&&(c=c.updateImmediateChild(b,R))}));const m=Bc(d,e);if(!m&&!e._queryParams.loadsAllData()){const o=Vi(e);L(!n.queryToTagMap.has(o),"View does not exist, but we have a tag");const b=Sm();n.queryToTagMap.set(o,b),n.tagToQueryMap.set(b,o)}const g=Hi(n.pendingWriteTree_,s);let _=dm(d,e,t,g,c,f);if(!m&&!u&&!i){const o=jc(d,e);_=_.concat(xm(n,e,o))}return _}function js(n,e,t){const s=n.pendingWriteTree_,c=n.syncPointTree_.findOnPath(e,(u,d)=>{const f=Re(u,e),m=bt(d,f);if(m)return m});return Oc(s,e,c,t,!0)}function wm(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(m,g)=>{const _=Re(m,t);i=i||bt(g,_)});let s=n.syncPointTree_.get(t);s?i=i||bt(s,ie()):(s=new Mc,n.syncPointTree_=n.syncPointTree_.set(t,s));const c=i!=null,u=c?new xt(i,!0,!1):null,d=Hi(n.pendingWriteTree_,e._path),f=Fc(s,e,d,c?u.getNode():z.EMPTY_NODE,c);return sm(f)}function Kn(n,e){return Vc(e,n.syncPointTree_,null,Hi(n.pendingWriteTree_,ie()))}function Vc(n,e,t,i){if(te(n.path))return Wc(n,e,t,i);{const s=e.get(ie());t==null&&s!=null&&(t=bt(s,ie()));let c=[];const u=ne(n.path),d=n.operationForChild(u),f=e.children.get(u);if(f&&d){const m=t?t.getImmediateChild(u):null,g=Nc(i,u);c=c.concat(Vc(d,f,m,g))}return s&&(c=c.concat(Ls(s,n,i,t))),c}}function Wc(n,e,t,i){const s=e.get(ie());t==null&&s!=null&&(t=bt(s,ie()));let c=[];return e.children.inorderTraversal((u,d)=>{const f=t?t.getImmediateChild(u):null,m=Nc(i,u),g=n.operationForChild(u);g&&(c=c.concat(Wc(g,d,f,m)))}),s&&(c=c.concat(Ls(s,n,i,t))),c}function $c(n,e){const t=e.query,i=Hn(n,t);return{hashFn:()=>(rm(e)||z.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return i?ym(n,t._path,i):vm(n,t._path);{const c=Cf(s,t);return Hc(n,t,null,c)}}}}function Hn(n,e){const t=Vi(e);return n.queryToTagMap.get(t)}function Vi(n){return n._path.toString()+"$"+n._queryIdentifier}function Bs(n,e){return n.tagToQueryMap.get(e)}function Us(n){const e=n.indexOf("$");return L(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new le(n.substr(0,e))}}function Hs(n,e,t){const i=n.syncPointTree_.get(e);L(i,"Missing sync point for query tag that we're tracking");const s=Hi(n.pendingWriteTree_,e);return Ls(i,t,s,null)}function Tm(n){return n.fold((e,t,i)=>{if(t&&At(t))return[qi(t)];{let s=[];return t&&(s=Lc(t)),Fe(i,(c,u)=>{s=s.concat(u)}),s}})}function Rn(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(mm())(n._repo,n._path):n}function bm(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const s=Vi(i),c=n.queryToTagMap.get(s);n.queryToTagMap.delete(s),n.tagToQueryMap.delete(c)}}}function Sm(){return gm++}function xm(n,e,t){const i=e._path,s=Hn(n,e),c=$c(n,t),u=n.listenProvider_.startListening(Rn(e),s,c.hashFn,c.onComplete),d=n.syncPointTree_.subtree(i);if(s)L(!At(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((m,g,_)=>{if(!te(m)&&g&&At(g))return[qi(g).query];{let o=[];return g&&(o=o.concat(Lc(g).map(b=>b.query))),Fe(_,(b,N)=>{o=o.concat(N)}),o}});for(let m=0;m<f.length;++m){const g=f[m];n.listenProvider_.stopListening(Rn(g),Hn(n,g))}}return u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new qs(t)}node(){return this.node_}}class Vs{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ye(this.path_,e);return new Vs(this.syncTree_,t)}node(){return js(this.syncTree_,this.path_)}}const Am=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Ka=function(n,e,t){if(!n||typeof n!="object")return n;if(L(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Im(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Om(n[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Im=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:L(!1,"Unexpected server value: "+n)}},Om=function(n,e,t){n.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&L(!1,"Unexpected increment value: "+i);const s=e.node();if(L(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const u=s.getValue();return typeof u!="number"?i:u+i},Nm=function(n,e,t,i){return Ws(e,new Vs(t,n),i)},zc=function(n,e,t){return Ws(n,new qs(e),t)};function Ws(n,e,t){const i=n.getPriority().val(),s=Ka(i,e.getImmediateChild(".priority"),t);let c;if(n.isLeafNode()){const u=n,d=Ka(u.getValue(),e,t);return d!==u.getValue()||s!==u.getPriority().val()?new Ee(d,we(s)):n}else{const u=n;return c=u,s!==u.getPriority().val()&&(c=c.updatePriority(new Ee(s))),u.forEachChild(ge,(d,f)=>{const m=Ws(f,e.getImmediateChild(d),t);m!==f&&(c=c.updateImmediateChild(d,m))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function zs(n,e){let t=e instanceof le?e:new le(e),i=n,s=ne(t);for(;s!==null;){const c=cn(i.node.children,s)||{children:{},childCount:0};i=new $s(s,i,c),t=de(t),s=ne(t)}return i}function gn(n){return n.node.value}function Gc(n,e){n.node.value=e,gs(n)}function Yc(n){return n.node.childCount>0}function Rm(n){return gn(n)===void 0&&!Yc(n)}function Wi(n,e){Fe(n.node.children,(t,i)=>{e(new $s(t,n,i))})}function Qc(n,e,t,i){t&&!i&&e(n),Wi(n,s=>{Qc(s,e,!0,i)}),t&&i&&e(n)}function Pm(n,e,t){let i=t?n:n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Xn(n){return new le(n.parent===null?n.name:Xn(n.parent)+"/"+n.name)}function gs(n){n.parent!==null&&Dm(n.parent,n.name,n)}function Dm(n,e,t){const i=Rm(t),s=lt(n.node.children,e);i&&s?(delete n.node.children[e],n.node.childCount--,gs(n)):!i&&!s&&(n.node.children[e]=t.node,n.node.childCount++,gs(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km=/[\[\].#$\/\u0000-\u001F\u007F]/,Mm=/[\[\].#$\u0000-\u001F\u007F]/,Dr=10*1024*1024,Kc=function(n){return typeof n=="string"&&n.length!==0&&!km.test(n)},Xc=function(n){return typeof n=="string"&&n.length!==0&&!Mm.test(n)},Fm=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Xc(n)},Jc=function(n,e,t,i){i&&e===void 0||Gs(ws(n,"value"),e,t)},Gs=function(n,e,t){const i=t instanceof le?new ep(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Ut(i));if(typeof e=="function")throw new Error(n+"contains a function "+Ut(i)+" with contents = "+e.toString());if(zl(e))throw new Error(n+"contains "+e.toString()+" "+Ut(i));if(typeof e=="string"&&e.length>Dr/3&&ji(e)>Dr)throw new Error(n+"contains a string greater than "+Dr+" utf8 bytes "+Ut(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let s=!1,c=!1;if(Fe(e,(u,d)=>{if(u===".value")s=!0;else if(u!==".priority"&&u!==".sv"&&(c=!0,!Kc(u)))throw new Error(n+" contains an invalid key ("+u+") "+Ut(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tp(i,u),Gs(n,d,i),np(i)}),s&&c)throw new Error(n+' contains ".value" child '+Ut(i)+" in addition to actual children.")}},Zc=function(n,e,t,i){if(!(i&&t===void 0)&&!Xc(t))throw new Error(ws(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},Lm=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Zc(n,e,t,i)},Ys=function(n,e){if(ne(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},jm=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Kc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Fm(t))throw new Error(ws(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eu(n,e){let t=null;for(let i=0;i<e.length;i++){const s=e[i],c=s.getPath();t!==null&&!gc(c,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:c}),t.events.push(s)}t&&n.eventLists_.push(t)}function et(n,e,t){eu(n,t),Um(n,i=>Ye(i,e)||Ye(e,i))}function Um(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const s=n.eventLists_[i];if(s){const c=s.path;e(c)?(Hm(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function Hm(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Vt&&Oe("event: "+t.toString()),mn(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="repo_interrupt",Vm=25;class Wm{constructor(e,t,i,s){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Bm,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Oi(),this.transactionQueueTree_=new $s,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function $m(n,e,t){if(n.stats_=xs(n.repoInfo_),n.forceRestClient_||Sf())n.server_=new Ii(n.repoInfo_,(i,s,c,u)=>{Xa(n,i,s,c,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Ja(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{ve(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new ot(n.repoInfo_,e,(i,s,c,u)=>{Xa(n,i,s,c,u)},i=>{Ja(n,i)},i=>{zm(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=Nf(n.repoInfo_,()=>new Ip(n.stats_,n.server_)),n.infoData_=new Tp,n.infoSyncTree_=new Qa({startListening:(i,s,c,u)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=Qn(n.infoSyncTree_,i._path,f),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),Ks(n,"connected",!1),n.serverSyncTree_=new Qa({startListening:(i,s,c,u)=>(n.server_.listen(i,c,s,(d,f)=>{const m=u(d,f);et(n.eventQueue_,i._path,m)}),[]),stopListening:(i,s)=>{n.server_.unlisten(i,s)}})}function tu(n){const t=n.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Qs(n){return Am({timestamp:tu(n)})}function Xa(n,e,t,i,s){n.dataUpdateCount++;const c=new le(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(s)if(i){const f=wi(t,m=>we(m));u=Em(n.serverSyncTree_,c,f,s)}else{const f=we(t);u=qc(n.serverSyncTree_,c,f,s)}else if(i){const f=wi(t,m=>we(m));u=_m(n.serverSyncTree_,c,f)}else{const f=we(t);u=Qn(n.serverSyncTree_,c,f)}let d=c;u.length>0&&(d=zi(n,c)),et(n.eventQueue_,d,u)}function Ja(n,e){Ks(n,"connected",e),e===!1&&Qm(n)}function zm(n,e){Fe(e,(t,i)=>{Ks(n,t,i)})}function Ks(n,e,t){const i=new le("/.info/"+e),s=we(t);n.infoData_.updateSnapshot(i,s);const c=Qn(n.infoSyncTree_,i,s);et(n.eventQueue_,i,c)}function nu(n){return n.nextWriteId_++}function Gm(n,e,t){const i=wm(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(s=>{const c=we(s).withIndex(e._queryParams.getIndex());Cm(n.serverSyncTree_,e,t,!0);let u;if(e._queryParams.loadsAllData())u=Qn(n.serverSyncTree_,e._path,c);else{const d=Hn(n.serverSyncTree_,e);u=qc(n.serverSyncTree_,e._path,c,d)}return et(n.eventQueue_,e._path,u),Hc(n.serverSyncTree_,e,t,null,!0),c},s=>($i(n,"get for query "+ve(e)+" failed: "+s),Promise.reject(new Error(s))))}function Ym(n,e,t,i,s){$i(n,"set",{path:e.toString(),value:t,priority:i});const c=Qs(n),u=we(t,i),d=js(n.serverSyncTree_,e),f=zc(u,d,c),m=nu(n),g=Uc(n.serverSyncTree_,e,f,m,!0);eu(n.eventQueue_,g),n.server_.put(e.toString(),u.val(!0),(o,b)=>{const N=o==="ok";N||Me("set at "+e+" failed: "+o);const R=qt(n.serverSyncTree_,m,!N);et(n.eventQueue_,e,R),Xm(n,s,o,b)});const _=au(n,e);zi(n,_),et(n.eventQueue_,_,[])}function Qm(n){$i(n,"onDisconnectEvents");const e=Qs(n),t=Oi();hs(n.onDisconnect_,ie(),(s,c)=>{const u=Nm(s,c,n.serverSyncTree_,e);bc(t,s,u)});let i=[];hs(t,ie(),(s,c)=>{i=i.concat(Qn(n.serverSyncTree_,s,c));const u=au(n,s);zi(n,u)}),n.onDisconnect_=Oi(),et(n.eventQueue_,ie(),i)}function Km(n){n.persistentConnection_&&n.persistentConnection_.interrupt(qm)}function $i(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Oe(t,...e)}function Xm(n,e,t,i){e&&mn(()=>{if(t==="ok")e(null);else{const s=(t||"error").toUpperCase();let c=s;i&&(c+=": "+i);const u=new Error(c);u.code=s,e(u)}})}function iu(n,e,t){return js(n.serverSyncTree_,e,t)||z.EMPTY_NODE}function Xs(n,e=n.transactionQueueTree_){if(e||Gi(n,e),gn(e)){const t=su(n,e);L(t.length>0,"Sending zero length transaction queue"),t.every(s=>s.status===0)&&Jm(n,Xn(e),t)}else Yc(e)&&Wi(e,t=>{Xs(n,t)})}function Jm(n,e,t){const i=t.map(m=>m.currentWriteId),s=iu(n,e,i);let c=s;const u=s.hash();for(let m=0;m<t.length;m++){const g=t[m];L(g.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),g.status=1,g.retryCount++;const _=Re(e,g.path);c=c.updateChild(_,g.currentOutputSnapshotRaw)}const d=c.val(!0),f=e;n.server_.put(f.toString(),d,m=>{$i(n,"transaction put response",{path:f.toString(),status:m});let g=[];if(m==="ok"){const _=[];for(let o=0;o<t.length;o++)t[o].status=2,g=g.concat(qt(n.serverSyncTree_,t[o].currentWriteId)),t[o].onComplete&&_.push(()=>t[o].onComplete(null,!0,t[o].currentOutputSnapshotResolved)),t[o].unwatcher();Gi(n,zs(n.transactionQueueTree_,e)),Xs(n,n.transactionQueueTree_),et(n.eventQueue_,e,g);for(let o=0;o<_.length;o++)mn(_[o])}else{if(m==="datastale")for(let _=0;_<t.length;_++)t[_].status===3?t[_].status=4:t[_].status=0;else{Me("transaction at "+f.toString()+" failed: "+m);for(let _=0;_<t.length;_++)t[_].status=4,t[_].abortReason=m}zi(n,e)}},u)}function zi(n,e){const t=ru(n,e),i=Xn(t),s=su(n,t);return Zm(n,s,i),i}function Zm(n,e,t){if(e.length===0)return;const i=[];let s=[];const u=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],m=Re(t,f.path);let g=!1,_;if(L(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)g=!0,_=f.abortReason,s=s.concat(qt(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=Vm)g=!0,_="maxretry",s=s.concat(qt(n.serverSyncTree_,f.currentWriteId,!0));else{const o=iu(n,f.path,u);f.currentInputSnapshot=o;const b=e[d].update(o.val());if(b!==void 0){Gs("transaction failed: Data returned ",b,f.path);let N=we(b);typeof b=="object"&&b!=null&&lt(b,".priority")||(N=N.updatePriority(o.getPriority()));const B=f.currentWriteId,K=Qs(n),re=zc(N,o,K);f.currentOutputSnapshotRaw=N,f.currentOutputSnapshotResolved=re,f.currentWriteId=nu(n),u.splice(u.indexOf(B),1),s=s.concat(Uc(n.serverSyncTree_,f.path,re,f.currentWriteId,f.applyLocally)),s=s.concat(qt(n.serverSyncTree_,B,!0))}else g=!0,_="nodata",s=s.concat(qt(n.serverSyncTree_,f.currentWriteId,!0))}et(n.eventQueue_,t,s),s=[],g&&(e[d].status=2,function(o){setTimeout(o,Math.floor(0))}(e[d].unwatcher),e[d].onComplete&&(_==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(_),!1,null))))}Gi(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)mn(i[d]);Xs(n,n.transactionQueueTree_)}function ru(n,e){let t,i=n.transactionQueueTree_;for(t=ne(e);t!==null&&gn(i)===void 0;)i=zs(i,t),e=de(e),t=ne(e);return i}function su(n,e){const t=[];return ou(n,e,t),t.sort((i,s)=>i.order-s.order),t}function ou(n,e,t){const i=gn(e);if(i)for(let s=0;s<i.length;s++)t.push(i[s]);Wi(e,s=>{ou(n,s,t)})}function Gi(n,e){const t=gn(e);if(t){let i=0;for(let s=0;s<t.length;s++)t[s].status!==2&&(t[i]=t[s],i++);t.length=i,Gc(e,t.length>0?t:void 0)}Wi(e,i=>{Gi(n,i)})}function au(n,e){const t=Xn(ru(n,e)),i=zs(n.transactionQueueTree_,e);return Pm(i,s=>{kr(n,s)}),kr(n,i),Qc(i,s=>{kr(n,s)}),t}function kr(n,e){const t=gn(e);if(t){const i=[];let s=[],c=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(L(c===u-1,"All SENT items should be at beginning of queue."),c=u,t[u].status=3,t[u].abortReason="set"):(L(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),s=s.concat(qt(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));c===-1?Gc(e,void 0):t.length=c+1,et(n.eventQueue_,Xn(e),s);for(let u=0;u<i.length;u++)mn(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let s=t[i];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}e+="/"+s}return e}function tg(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Me(`Invalid query segment '${t}' in query '${n}'`)}return e}const Za=function(n,e){const t=ng(n),i=t.namespace;t.domain==="firebase.com"&&at(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&at("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||gf();const s=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new rc(t.host,t.secure,i,s,e,"",i!==t.subdomain),path:new le(t.pathString)}},ng=function(n){let e="",t="",i="",s="",c="",u=!0,d="https",f=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(d=n.substring(0,m-1),n=n.substring(m+2));let g=n.indexOf("/");g===-1&&(g=n.length);let _=n.indexOf("?");_===-1&&(_=n.length),e=n.substring(0,Math.min(g,_)),g<_&&(s=eg(n.substring(g,_)));const o=tg(n.substring(Math.min(n.length,_)));m=e.indexOf(":"),m>=0?(u=d==="https"||d==="wss",f=parseInt(e.substring(m+1),10)):m=e.length;const b=e.slice(0,m);if(b.toLowerCase()==="localhost")t="localhost";else if(b.split(".").length<=2)t=b;else{const N=e.indexOf(".");i=e.substring(0,N).toLowerCase(),t=e.substring(N+1),c=i}"ns"in o&&(c=o.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:u,scheme:d,pathString:s,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ig=function(){let n=0;const e=[];return function(t){const i=t===n;n=t;let s;const c=new Array(8);for(s=7;s>=0;s--)c[s]=el.charAt(t%64),t=Math.floor(t/64);L(t===0,"Cannot push at time == 0");let u=c.join("");if(i){for(s=11;s>=0&&e[s]===63;s--)e[s]=0;e[s]++}else for(s=0;s<12;s++)e[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)u+=el.charAt(e[s]);return L(u.length===20,"nextPushId: Length should be 20."),u}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(e,t,i,s){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=s}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+ve(this.snapshot.exportVal())}}class sg{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return L(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t,i,s){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=s}get key(){return te(this._path)?null:fc(this._path)}get ref(){return new ct(this._repo,this._path)}get _queryIdentifier(){const e=ja(this._queryParams),t=bs(e);return t==="{}"?"default":t}get _queryObject(){return ja(this._queryParams)}isEqual(e){if(e=Yt(e),!(e instanceof Js))return!1;const t=this._repo===e._repo,i=gc(this._path,e._path),s=this._queryIdentifier===e._queryIdentifier;return t&&i&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+Zf(this._path)}}class ct extends Js{constructor(e,t){super(e,t,new Rs,!1)}get parent(){const e=mc(this._path);return e===null?null:new ct(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qn{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new le(e),i=Vn(this.ref,e);return new qn(this._node.getChild(t),i,ge)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,s)=>e(new qn(s,Vn(this.ref,i),ge)))}hasChild(e){const t=new le(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ag(n,e){return n=Yt(n),n._checkNotDeleted("ref"),e!==void 0?Vn(n._root,e):n._root}function Vn(n,e){return n=Yt(n),ne(n._path)===null?Lm("child","path",e,!1):Zc("child","path",e,!1),new ct(n._repo,ye(n._path,e))}function Zs(n,e){n=Yt(n),Ys("push",n._path),Jc("push",e,n._path,!0);const t=tu(n._repo),i=ig(t),s=Vn(n,i),c=Vn(n,i);let u;return e!=null?u=lu(c,e).then(()=>c):u=Promise.resolve(c),s.then=u.then.bind(u),s.catch=u.then.bind(u,void 0),s}function lg(n){return Ys("remove",n._path),lu(n,null)}function lu(n,e){n=Yt(n),Ys("set",n._path),Jc("set",e,n._path,!1);const t=new Li;return Ym(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function cg(n){n=Yt(n);const e=new og(()=>{}),t=new eo(e);return Gm(n._repo,n,t).then(i=>new qn(i,new ct(n._repo,n._path),n._queryParams.getIndex()))}class eo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new rg("value",this,new qn(e.snapshotNode,new ct(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new sg(this,e,t):null}matches(e){return e instanceof eo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}cm(ct);pm(ct);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="FIREBASE_DATABASE_EMULATOR_HOST",_s={};let hg=!1;function dg(n,e,t,i){n.repoInfo_=new rc(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),i&&(n.authTokenProvider_=i)}function fg(n,e,t,i,s){let c=i||n.options.databaseURL;c===void 0&&(n.options.projectId||at("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oe("Using default host for project ",n.options.projectId),c=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=Za(c,s),d=u.repoInfo,f,m;typeof process<"u"&&Ea&&(m=Ea[ug]),m?(f=!0,c=`http://${m}?ns=${d.namespace}`,u=Za(c,s),d=u.repoInfo):f=!u.repoInfo.secure;const g=s&&f?new an(an.OWNER):new Af(n.name,n.options,e);jm("Invalid Firebase Database URL",u),te(u.path)||at("Database URL must point to the root of a Firebase Database (not including a child path).");const _=mg(d,n,g,new xf(n.name,t));return new gg(_,n)}function pg(n,e){const t=_s[e];(!t||t[n.key]!==n)&&at(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Km(n),delete t[n.key]}function mg(n,e,t,i){let s=_s[e.name];s||(s={},_s[e.name]=s);let c=s[n.toURLString()];return c&&at("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new Wm(n,hg,t,i),s[n.toURLString()]=c,c}class gg{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($m(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ct(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(pg(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&at("Cannot call "+e+" on a deleted database.")}}function _g(n=Jd(),e){const t=Yd(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=Uh("database");i&&vg(t,...i)}return t}function vg(n,e,t,i={}){n=Yt(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&at("Cannot call useEmulator() after instance has already been initialized.");const s=n._repoInternal;let c;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&at('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),c=new an(an.OWNER);else if(i.mockUserToken){const u=typeof i.mockUserToken=="string"?i.mockUserToken:Hh(i.mockUserToken,n.app.options.projectId);c=new an(u)}dg(s,e,t,c)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(n){hf(Xd),bi(new Dn("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return fg(i,s,c,t)},"PUBLIC").setMultipleInstances(!0)),sn(Ca,wa,n),sn(Ca,wa,"esm2017")}ot.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};ot.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};yg();var Et=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},to={},cu={},no={exports:{}},uu=function(e,t){return function(){for(var s=new Array(arguments.length),c=0;c<s.length;c++)s[c]=arguments[c];return e.apply(t,s)}},Eg=uu,It=Object.prototype.toString;function io(n){return Array.isArray(n)}function vs(n){return typeof n>"u"}function Cg(n){return n!==null&&!vs(n)&&n.constructor!==null&&!vs(n.constructor)&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function hu(n){return It.call(n)==="[object ArrayBuffer]"}function wg(n){return It.call(n)==="[object FormData]"}function Tg(n){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&hu(n.buffer),e}function bg(n){return typeof n=="string"}function Sg(n){return typeof n=="number"}function du(n){return n!==null&&typeof n=="object"}function vi(n){if(It.call(n)!=="[object Object]")return!1;var e=Object.getPrototypeOf(n);return e===null||e===Object.prototype}function xg(n){return It.call(n)==="[object Date]"}function Ag(n){return It.call(n)==="[object File]"}function Ig(n){return It.call(n)==="[object Blob]"}function fu(n){return It.call(n)==="[object Function]"}function Og(n){return du(n)&&fu(n.pipe)}function Ng(n){return It.call(n)==="[object URLSearchParams]"}function Rg(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function Pg(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function ro(n,e){if(!(n===null||typeof n>"u"))if(typeof n!="object"&&(n=[n]),io(n))for(var t=0,i=n.length;t<i;t++)e.call(null,n[t],t,n);else for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.call(null,n[s],s,n)}function ys(){var n={};function e(s,c){vi(n[c])&&vi(s)?n[c]=ys(n[c],s):vi(s)?n[c]=ys({},s):io(s)?n[c]=s.slice():n[c]=s}for(var t=0,i=arguments.length;t<i;t++)ro(arguments[t],e);return n}function Dg(n,e,t){return ro(e,function(s,c){t&&typeof s=="function"?n[c]=Eg(s,t):n[c]=s}),n}function kg(n){return n.charCodeAt(0)===65279&&(n=n.slice(1)),n}var Le={isArray:io,isArrayBuffer:hu,isBuffer:Cg,isFormData:wg,isArrayBufferView:Tg,isString:bg,isNumber:Sg,isObject:du,isPlainObject:vi,isUndefined:vs,isDate:xg,isFile:Ag,isBlob:Ig,isFunction:fu,isStream:Og,isURLSearchParams:Ng,isStandardBrowserEnv:Pg,forEach:ro,merge:ys,extend:Dg,trim:Rg,stripBOM:kg},tn=Le;function tl(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var pu=function(e,t,i){if(!t)return e;var s;if(i)s=i(t);else if(tn.isURLSearchParams(t))s=t.toString();else{var c=[];tn.forEach(t,function(f,m){f===null||typeof f>"u"||(tn.isArray(f)?m=m+"[]":f=[f],tn.forEach(f,function(_){tn.isDate(_)?_=_.toISOString():tn.isObject(_)&&(_=JSON.stringify(_)),c.push(tl(m)+"="+tl(_))}))}),s=c.join("&")}if(s){var u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e},Mg=Le;function Yi(){this.handlers=[]}Yi.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};Yi.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Yi.prototype.forEach=function(e){Mg.forEach(this.handlers,function(i){i!==null&&e(i)})};var Fg=Yi,Lg=Le,jg=function(e,t){Lg.forEach(e,function(s,c){c!==t&&c.toUpperCase()===t.toUpperCase()&&(e[t]=s,delete e[c])})},mu=function(e,t,i,s,c){return e.config=t,i&&(e.code=i),e.request=s,e.response=c,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},gu={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Mr,nl;function _u(){if(nl)return Mr;nl=1;var n=mu;return Mr=function(t,i,s,c,u){var d=new Error(t);return n(d,i,s,c,u)},Mr}var Fr,il;function Bg(){if(il)return Fr;il=1;var n=_u();return Fr=function(t,i,s){var c=s.config.validateStatus;!s.status||!c||c(s.status)?t(s):i(n("Request failed with status code "+s.status,s.config,null,s.request,s))},Fr}var Lr,rl;function Ug(){if(rl)return Lr;rl=1;var n=Le;return Lr=n.isStandardBrowserEnv()?function(){return{write:function(i,s,c,u,d,f){var m=[];m.push(i+"="+encodeURIComponent(s)),n.isNumber(c)&&m.push("expires="+new Date(c).toGMTString()),n.isString(u)&&m.push("path="+u),n.isString(d)&&m.push("domain="+d),f===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(i){var s=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Lr}var jr,sl;function Hg(){return sl||(sl=1,jr=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),jr}var Br,ol;function qg(){return ol||(ol=1,Br=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}),Br}var Ur,al;function Vg(){if(al)return Ur;al=1;var n=Hg(),e=qg();return Ur=function(i,s){return i&&!n(s)?e(i,s):s},Ur}var Hr,ll;function Wg(){if(ll)return Hr;ll=1;var n=Le,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Hr=function(i){var s={},c,u,d;return i&&n.forEach(i.split(`
`),function(m){if(d=m.indexOf(":"),c=n.trim(m.substr(0,d)).toLowerCase(),u=n.trim(m.substr(d+1)),c){if(s[c]&&e.indexOf(c)>=0)return;c==="set-cookie"?s[c]=(s[c]?s[c]:[]).concat([u]):s[c]=s[c]?s[c]+", "+u:u}}),s},Hr}var qr,cl;function $g(){if(cl)return qr;cl=1;var n=Le;return qr=n.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),s;function c(u){var d=u;return t&&(i.setAttribute("href",d),d=i.href),i.setAttribute("href",d),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return s=c(window.location.href),function(d){var f=n.isString(d)?c(d):d;return f.protocol===s.protocol&&f.host===s.host}}():function(){return function(){return!0}}(),qr}var Vr,ul;function Qi(){if(ul)return Vr;ul=1;function n(e){this.message=e}return n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,Vr=n,Vr}var Wr,hl;function dl(){if(hl)return Wr;hl=1;var n=Le,e=Bg(),t=Ug(),i=pu,s=Vg(),c=Wg(),u=$g(),d=_u(),f=gu,m=Qi();return Wr=function(_){return new Promise(function(b,N){var R=_.data,B=_.headers,K=_.responseType,re;function se(){_.cancelToken&&_.cancelToken.unsubscribe(re),_.signal&&_.signal.removeEventListener("abort",re)}n.isFormData(R)&&delete B["Content-Type"];var H=new XMLHttpRequest;if(_.auth){var Ne=_.auth.username||"",Ot=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";B.Authorization="Basic "+btoa(Ne+":"+Ot)}var ut=s(_.baseURL,_.url);H.open(_.method.toUpperCase(),i(ut,_.params,_.paramsSerializer),!0),H.timeout=_.timeout;function U(){if(H){var je="getAllResponseHeaders"in H?c(H.getAllResponseHeaders()):null,ht=!K||K==="text"||K==="json"?H.responseText:H.response,nt={data:ht,status:H.status,statusText:H.statusText,headers:je,config:_,request:H};e(function(Be){b(Be),se()},function(Be){N(Be),se()},nt),H=null}}if("onloadend"in H?H.onloadend=U:H.onreadystatechange=function(){!H||H.readyState!==4||H.status===0&&!(H.responseURL&&H.responseURL.indexOf("file:")===0)||setTimeout(U)},H.onabort=function(){H&&(N(d("Request aborted",_,"ECONNABORTED",H)),H=null)},H.onerror=function(){N(d("Network Error",_,null,H)),H=null},H.ontimeout=function(){var ht=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded",nt=_.transitional||f;_.timeoutErrorMessage&&(ht=_.timeoutErrorMessage),N(d(ht,_,nt.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",H)),H=null},n.isStandardBrowserEnv()){var Zn=(_.withCredentials||u(ut))&&_.xsrfCookieName?t.read(_.xsrfCookieName):void 0;Zn&&(B[_.xsrfHeaderName]=Zn)}"setRequestHeader"in H&&n.forEach(B,function(ht,nt){typeof R>"u"&&nt.toLowerCase()==="content-type"?delete B[nt]:H.setRequestHeader(nt,ht)}),n.isUndefined(_.withCredentials)||(H.withCredentials=!!_.withCredentials),K&&K!=="json"&&(H.responseType=_.responseType),typeof _.onDownloadProgress=="function"&&H.addEventListener("progress",_.onDownloadProgress),typeof _.onUploadProgress=="function"&&H.upload&&H.upload.addEventListener("progress",_.onUploadProgress),(_.cancelToken||_.signal)&&(re=function(je){H&&(N(!je||je&&je.type?new m("canceled"):je),H.abort(),H=null)},_.cancelToken&&_.cancelToken.subscribe(re),_.signal&&(_.signal.aborted?re():_.signal.addEventListener("abort",re))),R||(R=null),H.send(R)})},Wr}var Te=Le,fl=jg,zg=mu,Gg=gu,Yg={"Content-Type":"application/x-www-form-urlencoded"};function pl(n,e){!Te.isUndefined(n)&&Te.isUndefined(n["Content-Type"])&&(n["Content-Type"]=e)}function Qg(){var n;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(n=dl()),n}function Kg(n,e,t){if(Te.isString(n))try{return(e||JSON.parse)(n),Te.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}var Ki={transitional:Gg,adapter:Qg(),transformRequest:[function(e,t){return fl(t,"Accept"),fl(t,"Content-Type"),Te.isFormData(e)||Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)?e:Te.isArrayBufferView(e)?e.buffer:Te.isURLSearchParams(e)?(pl(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Te.isObject(e)||t&&t["Content-Type"]==="application/json"?(pl(t,"application/json"),Kg(e)):e}],transformResponse:[function(e){var t=this.transitional||Ki.transitional,i=t&&t.silentJSONParsing,s=t&&t.forcedJSONParsing,c=!i&&this.responseType==="json";if(c||s&&Te.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(c)throw u.name==="SyntaxError"?zg(u,this,"E_JSON_PARSE"):u}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Te.forEach(["delete","get","head"],function(e){Ki.headers[e]={}});Te.forEach(["post","put","patch"],function(e){Ki.headers[e]=Te.merge(Yg)});var so=Ki,Xg=Le,Jg=so,Zg=function(e,t,i){var s=this||Jg;return Xg.forEach(i,function(u){e=u.call(s,e,t)}),e},$r,ml;function vu(){return ml||(ml=1,$r=function(e){return!!(e&&e.__CANCEL__)}),$r}var gl=Le,zr=Zg,e_=vu(),t_=so,n_=Qi();function Gr(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new n_("canceled")}var i_=function(e){Gr(e),e.headers=e.headers||{},e.data=zr.call(e,e.data,e.headers,e.transformRequest),e.headers=gl.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),gl.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var t=e.adapter||t_.adapter;return t(e).then(function(s){return Gr(e),s.data=zr.call(e,s.data,s.headers,e.transformResponse),s},function(s){return e_(s)||(Gr(e),s&&s.response&&(s.response.data=zr.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})},qe=Le,yu=function(e,t){t=t||{};var i={};function s(g,_){return qe.isPlainObject(g)&&qe.isPlainObject(_)?qe.merge(g,_):qe.isPlainObject(_)?qe.merge({},_):qe.isArray(_)?_.slice():_}function c(g){if(qe.isUndefined(t[g])){if(!qe.isUndefined(e[g]))return s(void 0,e[g])}else return s(e[g],t[g])}function u(g){if(!qe.isUndefined(t[g]))return s(void 0,t[g])}function d(g){if(qe.isUndefined(t[g])){if(!qe.isUndefined(e[g]))return s(void 0,e[g])}else return s(void 0,t[g])}function f(g){if(g in t)return s(e[g],t[g]);if(g in e)return s(void 0,e[g])}var m={url:u,method:u,data:u,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:f};return qe.forEach(Object.keys(e).concat(Object.keys(t)),function(_){var o=m[_]||c,b=o(_);qe.isUndefined(b)&&o!==f||(i[_]=b)}),i},Yr,_l;function Eu(){return _l||(_l=1,Yr={version:"0.26.1"}),Yr}var r_=Eu().version,oo={};["object","boolean","number","function","string","symbol"].forEach(function(n,e){oo[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});var vl={};oo.transitional=function(e,t,i){function s(c,u){return"[Axios v"+r_+"] Transitional option '"+c+"'"+u+(i?". "+i:"")}return function(c,u,d){if(e===!1)throw new Error(s(u," has been removed"+(t?" in "+t:"")));return t&&!vl[u]&&(vl[u]=!0,console.warn(s(u," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(c,u,d):!0}};function s_(n,e,t){if(typeof n!="object")throw new TypeError("options must be an object");for(var i=Object.keys(n),s=i.length;s-- >0;){var c=i[s],u=e[c];if(u){var d=n[c],f=d===void 0||u(d,c,n);if(f!==!0)throw new TypeError("option "+c+" must be "+f);continue}if(t!==!0)throw Error("Unknown option "+c)}}var o_={assertOptions:s_,validators:oo},Cu=Le,a_=pu,yl=Fg,El=i_,Xi=yu,wu=o_,nn=wu.validators;function Jn(n){this.defaults=n,this.interceptors={request:new yl,response:new yl}}Jn.prototype.request=function(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Xi(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var i=t.transitional;i!==void 0&&wu.assertOptions(i,{silentJSONParsing:nn.transitional(nn.boolean),forcedJSONParsing:nn.transitional(nn.boolean),clarifyTimeoutError:nn.transitional(nn.boolean)},!1);var s=[],c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(c=c&&b.synchronous,s.unshift(b.fulfilled,b.rejected))});var u=[];this.interceptors.response.forEach(function(b){u.push(b.fulfilled,b.rejected)});var d;if(!c){var f=[El,void 0];for(Array.prototype.unshift.apply(f,s),f=f.concat(u),d=Promise.resolve(t);f.length;)d=d.then(f.shift(),f.shift());return d}for(var m=t;s.length;){var g=s.shift(),_=s.shift();try{m=g(m)}catch(o){_(o);break}}try{d=El(m)}catch(o){return Promise.reject(o)}for(;u.length;)d=d.then(u.shift(),u.shift());return d};Jn.prototype.getUri=function(e){return e=Xi(this.defaults,e),a_(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Cu.forEach(["delete","get","head","options"],function(e){Jn.prototype[e]=function(t,i){return this.request(Xi(i||{},{method:e,url:t,data:(i||{}).data}))}});Cu.forEach(["post","put","patch"],function(e){Jn.prototype[e]=function(t,i,s){return this.request(Xi(s||{},{method:e,url:t,data:i}))}});var l_=Jn,Qr,Cl;function c_(){if(Cl)return Qr;Cl=1;var n=Qi();function e(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(u){i=u});var s=this;this.promise.then(function(c){if(s._listeners){var u,d=s._listeners.length;for(u=0;u<d;u++)s._listeners[u](c);s._listeners=null}}),this.promise.then=function(c){var u,d=new Promise(function(f){s.subscribe(f),u=f}).then(c);return d.cancel=function(){s.unsubscribe(u)},d},t(function(u){s.reason||(s.reason=new n(u),i(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var s=this._listeners.indexOf(i);s!==-1&&this._listeners.splice(s,1)}},e.source=function(){var i,s=new e(function(u){i=u});return{token:s,cancel:i}},Qr=e,Qr}var Kr,wl;function u_(){return wl||(wl=1,Kr=function(e){return function(i){return e.apply(null,i)}}),Kr}var Xr,Tl;function h_(){if(Tl)return Xr;Tl=1;var n=Le;return Xr=function(t){return n.isObject(t)&&t.isAxiosError===!0},Xr}var bl=Le,d_=uu,yi=l_,f_=yu,p_=so;function Tu(n){var e=new yi(n),t=d_(yi.prototype.request,e);return bl.extend(t,yi.prototype,e),bl.extend(t,e),t.create=function(s){return Tu(f_(n,s))},t}var tt=Tu(p_);tt.Axios=yi;tt.Cancel=Qi();tt.CancelToken=c_();tt.isCancel=vu();tt.VERSION=Eu().version;tt.all=function(e){return Promise.all(e)};tt.spread=u_();tt.isAxiosError=h_();no.exports=tt;no.exports.default=tt;var m_=no.exports,bu=m_,me={},ao={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.RequiredError=n.BaseAPI=n.COLLECTION_FORMATS=n.BASE_PATH=void 0;const e=bu;n.BASE_PATH="https://api.openai.com/v1".replace(/\/+$/,""),n.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};class t{constructor(c,u=n.BASE_PATH,d=e.default){this.basePath=u,this.axios=d,c&&(this.configuration=c,this.basePath=c.basePath||this.basePath)}}n.BaseAPI=t;class i extends Error{constructor(c,u){super(u),this.field=c,this.name="RequiredError"}}n.RequiredError=i})(ao);var lo=Et&&Et.__awaiter||function(n,e,t,i){function s(c){return c instanceof t?c:new t(function(u){u(c)})}return new(t||(t=Promise))(function(c,u){function d(g){try{m(i.next(g))}catch(_){u(_)}}function f(g){try{m(i.throw(g))}catch(_){u(_)}}function m(g){g.done?c(g.value):s(g.value).then(d,f)}m((i=i.apply(n,e||[])).next())})};Object.defineProperty(me,"__esModule",{value:!0});me.createRequestFunction=me.toPathString=me.serializeDataIfNeeded=me.setSearchParams=me.setOAuthToObject=me.setBearerAuthToObject=me.setBasicAuthToObject=me.setApiKeyToObject=me.assertParamExists=me.DUMMY_BASE_URL=void 0;const g_=ao;me.DUMMY_BASE_URL="https://example.com";me.assertParamExists=function(n,e,t){if(t==null)throw new g_.RequiredError(e,`Required parameter ${e} was null or undefined when calling ${n}.`)};me.setApiKeyToObject=function(n,e,t){return lo(this,void 0,void 0,function*(){if(t&&t.apiKey){const i=typeof t.apiKey=="function"?yield t.apiKey(e):yield t.apiKey;n[e]=i}})};me.setBasicAuthToObject=function(n,e){e&&(e.username||e.password)&&(n.auth={username:e.username,password:e.password})};me.setBearerAuthToObject=function(n,e){return lo(this,void 0,void 0,function*(){if(e&&e.accessToken){const t=typeof e.accessToken=="function"?yield e.accessToken():yield e.accessToken;n.Authorization="Bearer "+t}})};me.setOAuthToObject=function(n,e,t,i){return lo(this,void 0,void 0,function*(){if(i&&i.accessToken){const s=typeof i.accessToken=="function"?yield i.accessToken(e,t):yield i.accessToken;n.Authorization="Bearer "+s}})};function Es(n,e,t=""){e!=null&&(typeof e=="object"?Array.isArray(e)?e.forEach(i=>Es(n,i,t)):Object.keys(e).forEach(i=>Es(n,e[i],`${t}${t!==""?".":""}${i}`)):n.has(t)?n.append(t,e):n.set(t,e))}me.setSearchParams=function(n,...e){const t=new URLSearchParams(n.search);Es(t,e),n.search=t.toString()};me.serializeDataIfNeeded=function(n,e,t){const i=typeof n!="string";return(i&&t&&t.isJsonMime?t.isJsonMime(e.headers["Content-Type"]):i)?JSON.stringify(n!==void 0?n:{}):n||""};me.toPathString=function(n){return n.pathname+n.search+n.hash};me.createRequestFunction=function(n,e,t,i){return(s=e,c=t)=>{const u=Object.assign(Object.assign({},n.options),{url:((i==null?void 0:i.basePath)||c)+n.url});return s.request(u)}};(function(n){var e=Et&&Et.__awaiter||function(u,d,f,m){function g(_){return _ instanceof f?_:new f(function(o){o(_)})}return new(f||(f=Promise))(function(_,o){function b(B){try{R(m.next(B))}catch(K){o(K)}}function N(B){try{R(m.throw(B))}catch(K){o(K)}}function R(B){B.done?_(B.value):g(B.value).then(b,N)}R((m=m.apply(u,d||[])).next())})};Object.defineProperty(n,"__esModule",{value:!0}),n.OpenAIApi=n.OpenAIApiFactory=n.OpenAIApiFp=n.OpenAIApiAxiosParamCreator=n.CreateImageRequestResponseFormatEnum=n.CreateImageRequestSizeEnum=n.ChatCompletionResponseMessageRoleEnum=n.ChatCompletionRequestMessageRoleEnum=void 0;const t=bu,i=me,s=ao;n.ChatCompletionRequestMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},n.ChatCompletionResponseMessageRoleEnum={System:"system",User:"user",Assistant:"assistant"},n.CreateImageRequestSizeEnum={_256x256:"256x256",_512x512:"512x512",_1024x1024:"1024x1024"},n.CreateImageRequestResponseFormatEnum={Url:"url",B64Json:"b64_json"},n.OpenAIApiAxiosParamCreator=function(u){return{cancelFineTune:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("cancelFineTune","fineTuneId",d);const m="/fine-tunes/{fine_tune_id}/cancel".replace("{fine_tune_id}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),createAnswer:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createAnswer","createAnswerRequest",d);const m="/answers",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createChatCompletion:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createChatCompletion","createChatCompletionRequest",d);const m="/chat/completions",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createClassification:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createClassification","createClassificationRequest",d);const m="/classifications",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createCompletion:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createCompletion","createCompletionRequest",d);const m="/completions",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createEdit:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createEdit","createEditRequest",d);const m="/edits",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createEmbedding:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createEmbedding","createEmbeddingRequest",d);const m="/embeddings",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createFile:(d,f,m={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createFile","file",d),i.assertParamExists("createFile","purpose",f);const g="/files",_=new URL(g,i.DUMMY_BASE_URL);let o;u&&(o=u.baseOptions);const b=Object.assign(Object.assign({method:"POST"},o),m),N={},R={},B=new(u&&u.formDataCtor||FormData);d!==void 0&&B.append("file",d),f!==void 0&&B.append("purpose",f),N["Content-Type"]="multipart/form-data",i.setSearchParams(_,R);let K=o&&o.headers?o.headers:{};return b.headers=Object.assign(Object.assign(Object.assign(Object.assign({},N),B.getHeaders()),K),m.headers),b.data=B,{url:i.toPathString(_),options:b}}),createFineTune:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createFineTune","createFineTuneRequest",d);const m="/fine-tunes",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createImage:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImage","createImageRequest",d);const m="/images/generations",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createImageEdit:(d,f,m,g,_,o,b,N={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImageEdit","image",d),i.assertParamExists("createImageEdit","prompt",f);const R="/images/edits",B=new URL(R,i.DUMMY_BASE_URL);let K;u&&(K=u.baseOptions);const re=Object.assign(Object.assign({method:"POST"},K),N),se={},H={},Ne=new(u&&u.formDataCtor||FormData);d!==void 0&&Ne.append("image",d),m!==void 0&&Ne.append("mask",m),f!==void 0&&Ne.append("prompt",f),g!==void 0&&Ne.append("n",g),_!==void 0&&Ne.append("size",_),o!==void 0&&Ne.append("response_format",o),b!==void 0&&Ne.append("user",b),se["Content-Type"]="multipart/form-data",i.setSearchParams(B,H);let Ot=K&&K.headers?K.headers:{};return re.headers=Object.assign(Object.assign(Object.assign(Object.assign({},se),Ne.getHeaders()),Ot),N.headers),re.data=Ne,{url:i.toPathString(B),options:re}}),createImageVariation:(d,f,m,g,_,o={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createImageVariation","image",d);const b="/images/variations",N=new URL(b,i.DUMMY_BASE_URL);let R;u&&(R=u.baseOptions);const B=Object.assign(Object.assign({method:"POST"},R),o),K={},re={},se=new(u&&u.formDataCtor||FormData);d!==void 0&&se.append("image",d),f!==void 0&&se.append("n",f),m!==void 0&&se.append("size",m),g!==void 0&&se.append("response_format",g),_!==void 0&&se.append("user",_),K["Content-Type"]="multipart/form-data",i.setSearchParams(N,re);let H=R&&R.headers?R.headers:{};return B.headers=Object.assign(Object.assign(Object.assign(Object.assign({},K),se.getHeaders()),H),o.headers),B.data=se,{url:i.toPathString(N),options:B}}),createModeration:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createModeration","createModerationRequest",d);const m="/moderations",g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"POST"},_),f),b={},N={};b["Content-Type"]="application/json",i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),o.data=i.serializeDataIfNeeded(d,o,u),{url:i.toPathString(g),options:o}}),createSearch:(d,f,m={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createSearch","engineId",d),i.assertParamExists("createSearch","createSearchRequest",f);const g="/engines/{engine_id}/search".replace("{engine_id}",encodeURIComponent(String(d))),_=new URL(g,i.DUMMY_BASE_URL);let o;u&&(o=u.baseOptions);const b=Object.assign(Object.assign({method:"POST"},o),m),N={},R={};N["Content-Type"]="application/json",i.setSearchParams(_,R);let B=o&&o.headers?o.headers:{};return b.headers=Object.assign(Object.assign(Object.assign({},N),B),m.headers),b.data=i.serializeDataIfNeeded(f,b,u),{url:i.toPathString(_),options:b}}),createTranscription:(d,f,m,g,_,o,b={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createTranscription","file",d),i.assertParamExists("createTranscription","model",f);const N="/audio/transcriptions",R=new URL(N,i.DUMMY_BASE_URL);let B;u&&(B=u.baseOptions);const K=Object.assign(Object.assign({method:"POST"},B),b),re={},se={},H=new(u&&u.formDataCtor||FormData);d!==void 0&&H.append("file",d),f!==void 0&&H.append("model",f),m!==void 0&&H.append("prompt",m),g!==void 0&&H.append("response_format",g),_!==void 0&&H.append("temperature",_),o!==void 0&&H.append("language",o),re["Content-Type"]="multipart/form-data",i.setSearchParams(R,se);let Ne=B&&B.headers?B.headers:{};return K.headers=Object.assign(Object.assign(Object.assign(Object.assign({},re),H.getHeaders()),Ne),b.headers),K.data=H,{url:i.toPathString(R),options:K}}),createTranslation:(d,f,m,g,_,o={})=>e(this,void 0,void 0,function*(){i.assertParamExists("createTranslation","file",d),i.assertParamExists("createTranslation","model",f);const b="/audio/translations",N=new URL(b,i.DUMMY_BASE_URL);let R;u&&(R=u.baseOptions);const B=Object.assign(Object.assign({method:"POST"},R),o),K={},re={},se=new(u&&u.formDataCtor||FormData);d!==void 0&&se.append("file",d),f!==void 0&&se.append("model",f),m!==void 0&&se.append("prompt",m),g!==void 0&&se.append("response_format",g),_!==void 0&&se.append("temperature",_),K["Content-Type"]="multipart/form-data",i.setSearchParams(N,re);let H=R&&R.headers?R.headers:{};return B.headers=Object.assign(Object.assign(Object.assign(Object.assign({},K),se.getHeaders()),H),o.headers),B.data=se,{url:i.toPathString(N),options:B}}),deleteFile:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("deleteFile","fileId",d);const m="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"DELETE"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),deleteModel:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("deleteModel","model",d);const m="/models/{model}".replace("{model}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"DELETE"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),downloadFile:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("downloadFile","fileId",d);const m="/files/{file_id}/content".replace("{file_id}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"GET"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),listEngines:(d={})=>e(this,void 0,void 0,function*(){const f="/engines",m=new URL(f,i.DUMMY_BASE_URL);let g;u&&(g=u.baseOptions);const _=Object.assign(Object.assign({method:"GET"},g),d),o={},b={};i.setSearchParams(m,b);let N=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign({},o),N),d.headers),{url:i.toPathString(m),options:_}}),listFiles:(d={})=>e(this,void 0,void 0,function*(){const f="/files",m=new URL(f,i.DUMMY_BASE_URL);let g;u&&(g=u.baseOptions);const _=Object.assign(Object.assign({method:"GET"},g),d),o={},b={};i.setSearchParams(m,b);let N=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign({},o),N),d.headers),{url:i.toPathString(m),options:_}}),listFineTuneEvents:(d,f,m={})=>e(this,void 0,void 0,function*(){i.assertParamExists("listFineTuneEvents","fineTuneId",d);const g="/fine-tunes/{fine_tune_id}/events".replace("{fine_tune_id}",encodeURIComponent(String(d))),_=new URL(g,i.DUMMY_BASE_URL);let o;u&&(o=u.baseOptions);const b=Object.assign(Object.assign({method:"GET"},o),m),N={},R={};f!==void 0&&(R.stream=f),i.setSearchParams(_,R);let B=o&&o.headers?o.headers:{};return b.headers=Object.assign(Object.assign(Object.assign({},N),B),m.headers),{url:i.toPathString(_),options:b}}),listFineTunes:(d={})=>e(this,void 0,void 0,function*(){const f="/fine-tunes",m=new URL(f,i.DUMMY_BASE_URL);let g;u&&(g=u.baseOptions);const _=Object.assign(Object.assign({method:"GET"},g),d),o={},b={};i.setSearchParams(m,b);let N=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign({},o),N),d.headers),{url:i.toPathString(m),options:_}}),listModels:(d={})=>e(this,void 0,void 0,function*(){const f="/models",m=new URL(f,i.DUMMY_BASE_URL);let g;u&&(g=u.baseOptions);const _=Object.assign(Object.assign({method:"GET"},g),d),o={},b={};i.setSearchParams(m,b);let N=g&&g.headers?g.headers:{};return _.headers=Object.assign(Object.assign(Object.assign({},o),N),d.headers),{url:i.toPathString(m),options:_}}),retrieveEngine:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveEngine","engineId",d);const m="/engines/{engine_id}".replace("{engine_id}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"GET"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),retrieveFile:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveFile","fileId",d);const m="/files/{file_id}".replace("{file_id}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"GET"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),retrieveFineTune:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveFineTune","fineTuneId",d);const m="/fine-tunes/{fine_tune_id}".replace("{fine_tune_id}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"GET"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}}),retrieveModel:(d,f={})=>e(this,void 0,void 0,function*(){i.assertParamExists("retrieveModel","model",d);const m="/models/{model}".replace("{model}",encodeURIComponent(String(d))),g=new URL(m,i.DUMMY_BASE_URL);let _;u&&(_=u.baseOptions);const o=Object.assign(Object.assign({method:"GET"},_),f),b={},N={};i.setSearchParams(g,N);let R=_&&_.headers?_.headers:{};return o.headers=Object.assign(Object.assign(Object.assign({},b),R),f.headers),{url:i.toPathString(g),options:o}})}},n.OpenAIApiFp=function(u){const d=n.OpenAIApiAxiosParamCreator(u);return{cancelFineTune(f,m){return e(this,void 0,void 0,function*(){const g=yield d.cancelFineTune(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createAnswer(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createAnswer(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createChatCompletion(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createChatCompletion(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createClassification(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createClassification(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createCompletion(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createCompletion(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createEdit(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createEdit(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createEmbedding(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createEmbedding(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createFile(f,m,g){return e(this,void 0,void 0,function*(){const _=yield d.createFile(f,m,g);return i.createRequestFunction(_,t.default,s.BASE_PATH,u)})},createFineTune(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createFineTune(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createImage(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createImage(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createImageEdit(f,m,g,_,o,b,N,R){return e(this,void 0,void 0,function*(){const B=yield d.createImageEdit(f,m,g,_,o,b,N,R);return i.createRequestFunction(B,t.default,s.BASE_PATH,u)})},createImageVariation(f,m,g,_,o,b){return e(this,void 0,void 0,function*(){const N=yield d.createImageVariation(f,m,g,_,o,b);return i.createRequestFunction(N,t.default,s.BASE_PATH,u)})},createModeration(f,m){return e(this,void 0,void 0,function*(){const g=yield d.createModeration(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},createSearch(f,m,g){return e(this,void 0,void 0,function*(){const _=yield d.createSearch(f,m,g);return i.createRequestFunction(_,t.default,s.BASE_PATH,u)})},createTranscription(f,m,g,_,o,b,N){return e(this,void 0,void 0,function*(){const R=yield d.createTranscription(f,m,g,_,o,b,N);return i.createRequestFunction(R,t.default,s.BASE_PATH,u)})},createTranslation(f,m,g,_,o,b){return e(this,void 0,void 0,function*(){const N=yield d.createTranslation(f,m,g,_,o,b);return i.createRequestFunction(N,t.default,s.BASE_PATH,u)})},deleteFile(f,m){return e(this,void 0,void 0,function*(){const g=yield d.deleteFile(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},deleteModel(f,m){return e(this,void 0,void 0,function*(){const g=yield d.deleteModel(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},downloadFile(f,m){return e(this,void 0,void 0,function*(){const g=yield d.downloadFile(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},listEngines(f){return e(this,void 0,void 0,function*(){const m=yield d.listEngines(f);return i.createRequestFunction(m,t.default,s.BASE_PATH,u)})},listFiles(f){return e(this,void 0,void 0,function*(){const m=yield d.listFiles(f);return i.createRequestFunction(m,t.default,s.BASE_PATH,u)})},listFineTuneEvents(f,m,g){return e(this,void 0,void 0,function*(){const _=yield d.listFineTuneEvents(f,m,g);return i.createRequestFunction(_,t.default,s.BASE_PATH,u)})},listFineTunes(f){return e(this,void 0,void 0,function*(){const m=yield d.listFineTunes(f);return i.createRequestFunction(m,t.default,s.BASE_PATH,u)})},listModels(f){return e(this,void 0,void 0,function*(){const m=yield d.listModels(f);return i.createRequestFunction(m,t.default,s.BASE_PATH,u)})},retrieveEngine(f,m){return e(this,void 0,void 0,function*(){const g=yield d.retrieveEngine(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},retrieveFile(f,m){return e(this,void 0,void 0,function*(){const g=yield d.retrieveFile(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},retrieveFineTune(f,m){return e(this,void 0,void 0,function*(){const g=yield d.retrieveFineTune(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})},retrieveModel(f,m){return e(this,void 0,void 0,function*(){const g=yield d.retrieveModel(f,m);return i.createRequestFunction(g,t.default,s.BASE_PATH,u)})}}},n.OpenAIApiFactory=function(u,d,f){const m=n.OpenAIApiFp(u);return{cancelFineTune(g,_){return m.cancelFineTune(g,_).then(o=>o(f,d))},createAnswer(g,_){return m.createAnswer(g,_).then(o=>o(f,d))},createChatCompletion(g,_){return m.createChatCompletion(g,_).then(o=>o(f,d))},createClassification(g,_){return m.createClassification(g,_).then(o=>o(f,d))},createCompletion(g,_){return m.createCompletion(g,_).then(o=>o(f,d))},createEdit(g,_){return m.createEdit(g,_).then(o=>o(f,d))},createEmbedding(g,_){return m.createEmbedding(g,_).then(o=>o(f,d))},createFile(g,_,o){return m.createFile(g,_,o).then(b=>b(f,d))},createFineTune(g,_){return m.createFineTune(g,_).then(o=>o(f,d))},createImage(g,_){return m.createImage(g,_).then(o=>o(f,d))},createImageEdit(g,_,o,b,N,R,B,K){return m.createImageEdit(g,_,o,b,N,R,B,K).then(re=>re(f,d))},createImageVariation(g,_,o,b,N,R){return m.createImageVariation(g,_,o,b,N,R).then(B=>B(f,d))},createModeration(g,_){return m.createModeration(g,_).then(o=>o(f,d))},createSearch(g,_,o){return m.createSearch(g,_,o).then(b=>b(f,d))},createTranscription(g,_,o,b,N,R,B){return m.createTranscription(g,_,o,b,N,R,B).then(K=>K(f,d))},createTranslation(g,_,o,b,N,R){return m.createTranslation(g,_,o,b,N,R).then(B=>B(f,d))},deleteFile(g,_){return m.deleteFile(g,_).then(o=>o(f,d))},deleteModel(g,_){return m.deleteModel(g,_).then(o=>o(f,d))},downloadFile(g,_){return m.downloadFile(g,_).then(o=>o(f,d))},listEngines(g){return m.listEngines(g).then(_=>_(f,d))},listFiles(g){return m.listFiles(g).then(_=>_(f,d))},listFineTuneEvents(g,_,o){return m.listFineTuneEvents(g,_,o).then(b=>b(f,d))},listFineTunes(g){return m.listFineTunes(g).then(_=>_(f,d))},listModels(g){return m.listModels(g).then(_=>_(f,d))},retrieveEngine(g,_){return m.retrieveEngine(g,_).then(o=>o(f,d))},retrieveFile(g,_){return m.retrieveFile(g,_).then(o=>o(f,d))},retrieveFineTune(g,_){return m.retrieveFineTune(g,_).then(o=>o(f,d))},retrieveModel(g,_){return m.retrieveModel(g,_).then(o=>o(f,d))}}};class c extends s.BaseAPI{cancelFineTune(d,f){return n.OpenAIApiFp(this.configuration).cancelFineTune(d,f).then(m=>m(this.axios,this.basePath))}createAnswer(d,f){return n.OpenAIApiFp(this.configuration).createAnswer(d,f).then(m=>m(this.axios,this.basePath))}createChatCompletion(d,f){return n.OpenAIApiFp(this.configuration).createChatCompletion(d,f).then(m=>m(this.axios,this.basePath))}createClassification(d,f){return n.OpenAIApiFp(this.configuration).createClassification(d,f).then(m=>m(this.axios,this.basePath))}createCompletion(d,f){return n.OpenAIApiFp(this.configuration).createCompletion(d,f).then(m=>m(this.axios,this.basePath))}createEdit(d,f){return n.OpenAIApiFp(this.configuration).createEdit(d,f).then(m=>m(this.axios,this.basePath))}createEmbedding(d,f){return n.OpenAIApiFp(this.configuration).createEmbedding(d,f).then(m=>m(this.axios,this.basePath))}createFile(d,f,m){return n.OpenAIApiFp(this.configuration).createFile(d,f,m).then(g=>g(this.axios,this.basePath))}createFineTune(d,f){return n.OpenAIApiFp(this.configuration).createFineTune(d,f).then(m=>m(this.axios,this.basePath))}createImage(d,f){return n.OpenAIApiFp(this.configuration).createImage(d,f).then(m=>m(this.axios,this.basePath))}createImageEdit(d,f,m,g,_,o,b,N){return n.OpenAIApiFp(this.configuration).createImageEdit(d,f,m,g,_,o,b,N).then(R=>R(this.axios,this.basePath))}createImageVariation(d,f,m,g,_,o){return n.OpenAIApiFp(this.configuration).createImageVariation(d,f,m,g,_,o).then(b=>b(this.axios,this.basePath))}createModeration(d,f){return n.OpenAIApiFp(this.configuration).createModeration(d,f).then(m=>m(this.axios,this.basePath))}createSearch(d,f,m){return n.OpenAIApiFp(this.configuration).createSearch(d,f,m).then(g=>g(this.axios,this.basePath))}createTranscription(d,f,m,g,_,o,b){return n.OpenAIApiFp(this.configuration).createTranscription(d,f,m,g,_,o,b).then(N=>N(this.axios,this.basePath))}createTranslation(d,f,m,g,_,o){return n.OpenAIApiFp(this.configuration).createTranslation(d,f,m,g,_,o).then(b=>b(this.axios,this.basePath))}deleteFile(d,f){return n.OpenAIApiFp(this.configuration).deleteFile(d,f).then(m=>m(this.axios,this.basePath))}deleteModel(d,f){return n.OpenAIApiFp(this.configuration).deleteModel(d,f).then(m=>m(this.axios,this.basePath))}downloadFile(d,f){return n.OpenAIApiFp(this.configuration).downloadFile(d,f).then(m=>m(this.axios,this.basePath))}listEngines(d){return n.OpenAIApiFp(this.configuration).listEngines(d).then(f=>f(this.axios,this.basePath))}listFiles(d){return n.OpenAIApiFp(this.configuration).listFiles(d).then(f=>f(this.axios,this.basePath))}listFineTuneEvents(d,f,m){return n.OpenAIApiFp(this.configuration).listFineTuneEvents(d,f,m).then(g=>g(this.axios,this.basePath))}listFineTunes(d){return n.OpenAIApiFp(this.configuration).listFineTunes(d).then(f=>f(this.axios,this.basePath))}listModels(d){return n.OpenAIApiFp(this.configuration).listModels(d).then(f=>f(this.axios,this.basePath))}retrieveEngine(d,f){return n.OpenAIApiFp(this.configuration).retrieveEngine(d,f).then(m=>m(this.axios,this.basePath))}retrieveFile(d,f){return n.OpenAIApiFp(this.configuration).retrieveFile(d,f).then(m=>m(this.axios,this.basePath))}retrieveFineTune(d,f){return n.OpenAIApiFp(this.configuration).retrieveFineTune(d,f).then(m=>m(this.axios,this.basePath))}retrieveModel(d,f){return n.OpenAIApiFp(this.configuration).retrieveModel(d,f).then(m=>m(this.axios,this.basePath))}}n.OpenAIApi=c})(cu);var Ji={};const __="openai",v_="3.2.1",y_="Node.js library for the OpenAI API",E_={type:"git",url:"git@github.com:openai/openai-node.git"},C_=["openai","open","ai","gpt-3","gpt3"],w_="OpenAI",T_="MIT",b_="./dist/index.js",S_="./dist/index.d.ts",x_={build:"tsc --outDir dist/"},A_={axios:"^0.26.0","form-data":"^4.0.0"},I_={"@types/node":"^12.11.5",typescript:"^3.6.4"},O_={name:__,version:v_,description:y_,repository:E_,keywords:C_,author:w_,license:T_,main:b_,types:S_,scripts:x_,dependencies:A_,devDependencies:I_};var Jr,Sl;function N_(){return Sl||(Sl=1,Jr=typeof self=="object"?self.FormData:window.FormData),Jr}Object.defineProperty(Ji,"__esModule",{value:!0});Ji.Configuration=void 0;const R_=O_;class P_{constructor(e={}){this.apiKey=e.apiKey,this.organization=e.organization,this.username=e.username,this.password=e.password,this.accessToken=e.accessToken,this.basePath=e.basePath,this.baseOptions=e.baseOptions,this.formDataCtor=e.formDataCtor,this.baseOptions||(this.baseOptions={}),this.baseOptions.headers=Object.assign({"User-Agent":`OpenAI/NodeJS/${R_.version}`,Authorization:`Bearer ${this.apiKey}`},this.baseOptions.headers),this.organization&&(this.baseOptions.headers["OpenAI-Organization"]=this.organization),this.formDataCtor||(this.formDataCtor=N_())}isJsonMime(e){const t=new RegExp("^(application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(;.*)?$","i");return e!==null&&(t.test(e)||e.toLowerCase()==="application/json-patch+json")}}Ji.Configuration=P_;(function(n){var e=Et&&Et.__createBinding||(Object.create?function(i,s,c,u){u===void 0&&(u=c),Object.defineProperty(i,u,{enumerable:!0,get:function(){return s[c]}})}:function(i,s,c,u){u===void 0&&(u=c),i[u]=s[c]}),t=Et&&Et.__exportStar||function(i,s){for(var c in i)c!=="default"&&!s.hasOwnProperty(c)&&e(s,i,c)};Object.defineProperty(n,"__esModule",{value:!0}),t(cu,n),t(Ji,n)})(to);
          const apiUrl = 'http://localhost:3000/api/proxy'; // Replace with your server URL

// Example GET request
axios.post(apiUrl, { method: 'GET', path: '/endpoint' })
  .then(response => console.log(response.data))
  .catch(error => console.error(error));
                                              
                                                                                   const D_={env:{OPENAI_API_KEY:"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"}},k_=new to.Configuration({apiKey:D_.env.OPENAI_API_KEY}),M_=new to.OpenAIApi(k_),F_={databaseURL:"https://safiny-387ba-default-rtdb.firebaseio.com/"},L_=Ul(F_),j_=_g(L_),Wn=ag(j_),Ze=document.getElementById("chatbot-conversation"),B_={role:"system",content:"Your name is 'Safinybot' and you are a proffessional developer. Only give your reponses based on coding. Produce code snippet for every question. Be friendly. If you don't have an answer ask for to provide a better detailed question. If the question is not related to programming, say exactly 'Am not sure I can help you with that. I only Code.' Use sarcasm always, and emoji. When you are asked about feelings or emotion say exactly 'Am feel feeling great. you?' You can generate response from this list 'I’m here for you.; What do you need right now?; I’m happy to listen any time.; I’m sorry you are going through this.; That sounds really challenging.; I can see how that would be difficult.; How are you feeling about everything?; What I’m hearing is that you are feeling _______. Is that right?; Thank you for sharing with me.; I’m glad you told me.; This must be hard to talk about.; Thanks for opening up to me.;' act friendly. Always suggest discussions related to to questions you are been ask and not less tha two suggestionds."};function U_(){const n=this.textContent,e=document.createElement("div");Zs(Wn,{role:"user",content:n}),Su(),e.classList.add("speech","speech-human"),Ze.appendChild(e),e.textContent=n,Ze.scrollTop=Ze.scrollHeight,console.log(e)}var xl=document.querySelectorAll(".chatbot-quest-list");for(var Zr=0,H_=xl.length;Zr<H_;Zr++)xl[Zr].onclick=U_;document.addEventListener("submit",n=>{n.preventDefault();const e=document.getElementById("user-input");Zs(Wn,{role:"user",content:e.value}),Su();const t=document.createElement("div");t.classList.add("speech","speech-human"),Ze.appendChild(t),t.textContent=e.value,e.value="",Ze.scrollTop=Ze.scrollHeight});async function Su(){cg(Wn).then(async n=>{if(n.exists()){const e=Object.values(n.val());e.unshift(B_);const t=await M_.createChatCompletion({model:"gpt-3.5-turbo",messages:e,presence_penalty:1,frequency_penalty:.6});Zs(Wn,t.data.choices[0].message),q_(t.data.choices[0].message.content)}else console.log("No data available")})}function q_(n){const e=document.createElement("div");e.classList.add("speech","speech-ai","ai-typing"),Ze.appendChild(e);let t=0;const i=setInterval(()=>{n.length===t&&(clearInterval(i),e.classList.remove("ai-typing"),e.textContent+=n),t++,Ze.scrollTop=Ze.scrollHeight},10)}document.getElementById("clear-btn").addEventListener("click",()=>{lg(Wn),Ze.innerHTML='<div class="speech speech-ai">How can I help you?</div>'});function V_(){const n=document.querySelector(".supportTime");setInterval(()=>{const e=new Date,t=e.getHours(),i=e.getMinutes(),s=e.getSeconds();n.textContent=t+" : "+i+" : "+s},100)}V_()});export default W_();
